const je=function(){const E=document.createElement("link").relList;if(E&&E.supports&&E.supports("modulepreload"))return;for(const g of document.querySelectorAll('link[rel="modulepreload"]'))B(g);new MutationObserver(g=>{for(const e of g)if(e.type==="childList")for(const l of e.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&B(l)}).observe(document,{childList:!0,subtree:!0});function M(g){const e={};return g.integrity&&(e.integrity=g.integrity),g.referrerpolicy&&(e.referrerPolicy=g.referrerpolicy),g.crossorigin==="use-credentials"?e.credentials="include":g.crossorigin==="anonymous"?e.credentials="omit":e.credentials="same-origin",e}function B(g){if(g.ep)return;g.ep=!0;const e=M(g);fetch(g.href,e)}};je();function N(){}function Ue(I){return I()}function ke(){return Object.create(null)}function ce(I){I.forEach(Ue)}function be(I){return typeof I=="function"}function ve(I,E){return I!=I?E==E:I!==E||I&&typeof I=="object"||typeof I=="function"}function qe(I){return Object.keys(I).length===0}function _e(I,E){I.appendChild(E)}function Pe(I,E,M){I.insertBefore(E,M||null)}function ge(I){I.parentNode.removeChild(I)}function Me(I){return document.createElement(I)}function et(I){return document.createTextNode(I)}function tt(){return et(" ")}function ee(I,E,M){M==null?I.removeAttribute(E):I.getAttribute(E)!==M&&I.setAttribute(E,M)}function nt(I){return Array.from(I.childNodes)}let te;function _(I){te=I}function it(){if(!te)throw new Error("Function called outside component initialization");return te}function Ne(I){it().$$.on_mount.push(I)}const q=[],ue=[],le=[],De=[],rt=Promise.resolve();let xe=!1;function at(){xe||(xe=!0,rt.then(Ze))}function ye(I){le.push(I)}const de=new Set;let ae=0;function Ze(){const I=te;do{for(;ae<q.length;){const E=q[ae];ae++,_(E),st(E.$$)}for(_(null),q.length=0,ae=0;ue.length;)ue.pop()();for(let E=0;E<le.length;E+=1){const M=le[E];de.has(M)||(de.add(M),M())}le.length=0}while(q.length);for(;De.length;)De.pop()();xe=!1,de.clear(),_(I)}function st(I){if(I.fragment!==null){I.update(),ce(I.before_update);const E=I.dirty;I.dirty=[-1],I.fragment&&I.fragment.p(I.ctx,E),I.after_update.forEach(ye)}}const fe=new Set;let ot;function Se(I,E){I&&I.i&&(fe.delete(I),I.i(E))}function He(I,E,M,B){if(I&&I.o){if(fe.has(I))return;fe.add(I),ot.c.push(()=>{fe.delete(I),B&&(M&&I.d(1),B())}),I.o(E)}}function Ve(I){I&&I.c()}function we(I,E,M,B){const{fragment:g,on_mount:e,on_destroy:l,after_update:s}=I.$$;g&&g.m(E,M),B||ye(()=>{const i=e.map(Ue).filter(be);l?l.push(...i):ce(i),I.$$.on_mount=[]}),s.forEach(ye)}function Ce(I,E){const M=I.$$;M.fragment!==null&&(ce(M.on_destroy),M.fragment&&M.fragment.d(E),M.on_destroy=M.fragment=null,M.ctx=[])}function lt(I,E){I.$$.dirty[0]===-1&&(q.push(I),at(),I.$$.dirty.fill(0)),I.$$.dirty[E/31|0]|=1<<E%31}function Ae(I,E,M,B,g,e,l,s=[-1]){const i=te;_(I);const u=I.$$={fragment:null,ctx:null,props:e,update:N,not_equal:g,bound:ke(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(E.context||(i?i.$$.context:[])),callbacks:ke(),dirty:s,skip_bound:!1,root:E.target||i.$$.root};l&&l(u.root);let o=!1;if(u.ctx=M?M(I,E.props||{},(f,r,...t)=>{const a=t.length?t[0]:r;return u.ctx&&g(u.ctx[f],u.ctx[f]=a)&&(!u.skip_bound&&u.bound[f]&&u.bound[f](a),o&&lt(I,f)),r}):[],u.update(),o=!0,ce(u.before_update),u.fragment=B?B(u.ctx):!1,E.target){if(E.hydrate){const f=nt(E.target);u.fragment&&u.fragment.l(f),f.forEach(ge)}else u.fragment&&u.fragment.c();E.intro&&Se(I.$$.fragment),we(I,E.target,E.anchor,E.customElement),Ze()}_(i)}class Ie{$destroy(){Ce(this,1),this.$destroy=N}$on(E,M){const B=this.$$.callbacks[E]||(this.$$.callbacks[E]=[]);return B.push(M),()=>{const g=B.indexOf(M);g!==-1&&B.splice(g,1)}}$set(E){this.$$set&&!qe(E)&&(this.$$.skip_bound=!0,this.$$set(E),this.$$.skip_bound=!1)}}const Y=[];function ft(I,E=N){let M;const B=new Set;function g(s){if(ve(I,s)&&(I=s,M)){const i=!Y.length;for(const u of B)u[1](),Y.push(u,I);if(i){for(let u=0;u<Y.length;u+=2)Y[u][0](Y[u+1]);Y.length=0}}}function e(s){g(s(I))}function l(s,i=N){const u=[s,i];return B.add(u),B.size===1&&(M=E(g)||N),s(I),()=>{B.delete(u),B.size===0&&(M(),M=null)}}return{set:g,update:e,subscribe:l}}const Qe=ft(null);let se=null;async function ut(I){if(se!==null)return se;const E=new URL("https://maps.googleapis.com/maps/api/js");for(const[M,B]of Object.entries(I))B!==void 0&&E.searchParams.set(M,B);return E.searchParams.set("callback","__maps_callback__"),se=new Promise(M=>{window.__maps_callback__=()=>{delete window.__maps_callback__,M()};const B=document.createElement("script");B.src=E.toString(),document.body.appendChild(B)}),se}function ct(I){let E;return{c(){E=Me("div"),ee(E,"id","map"),ee(E,"class","svelte-pwipf8")},m(M,B){Pe(M,E,B),I[1](E)},p:N,i:N,o:N,d(M){M&&ge(E),I[1](null)}}}function vt(I,E,M){let B;Ne(async()=>{await ut({key:"AIzaSyBIewvG8LT8FZgPcIi1GXHOqbjG3GjXeCw"});const e=new google.maps.Map(B,{zoom:4,center:{lat:37.7749,lng:-122.4194},disableDefaultUI:!0,draggable:!1,zoomControl:!1});Qe.set(e)});function g(e){ue[e?"unshift":"push"](()=>{B=e,M(0,B)})}return[B,g]}class gt extends Ie{constructor(E){super(),Ae(this,E,vt,ct,ve,{})}}var pe=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{};function ht(I){return I&&I.__esModule&&Object.prototype.hasOwnProperty.call(I,"default")?I.default:I}var Ke={exports:{}};/*!
 * matter-js 0.18.0 by @liabru
 * http://brm.io/matter-js/
 * License MIT
 * 
 * The MIT License (MIT)
 * 
 * Copyright (c) Liam Brummitt and contributors.
 * 
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 * 
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 * 
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */(function(I,E){(function(B,g){I.exports=g()})(pe,function(){return function(M){var B={};function g(e){if(B[e])return B[e].exports;var l=B[e]={i:e,l:!1,exports:{}};return M[e].call(l.exports,l,l.exports,g),l.l=!0,l.exports}return g.m=M,g.c=B,g.d=function(e,l,s){g.o(e,l)||Object.defineProperty(e,l,{enumerable:!0,get:s})},g.r=function(e){typeof Symbol!="undefined"&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},g.t=function(e,l){if(l&1&&(e=g(e)),l&8||l&4&&typeof e=="object"&&e&&e.__esModule)return e;var s=Object.create(null);if(g.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:e}),l&2&&typeof e!="string")for(var i in e)g.d(s,i,function(u){return e[u]}.bind(null,i));return s},g.n=function(e){var l=e&&e.__esModule?function(){return e.default}:function(){return e};return g.d(l,"a",l),l},g.o=function(e,l){return Object.prototype.hasOwnProperty.call(e,l)},g.p="",g(g.s=21)}([function(M,B){var g={};M.exports=g,function(){g._nextId=0,g._seed=0,g._nowStartTime=+new Date,g._warnedOnce={},g._decomp=null,g.extend=function(l,s){var i,u;typeof s=="boolean"?(i=2,u=s):(i=1,u=!0);for(var o=i;o<arguments.length;o++){var f=arguments[o];if(f)for(var r in f)u&&f[r]&&f[r].constructor===Object&&(!l[r]||l[r].constructor===Object)?(l[r]=l[r]||{},g.extend(l[r],u,f[r])):l[r]=f[r]}return l},g.clone=function(l,s){return g.extend({},s,l)},g.keys=function(l){if(Object.keys)return Object.keys(l);var s=[];for(var i in l)s.push(i);return s},g.values=function(l){var s=[];if(Object.keys){for(var i=Object.keys(l),u=0;u<i.length;u++)s.push(l[i[u]]);return s}for(var o in l)s.push(l[o]);return s},g.get=function(l,s,i,u){s=s.split(".").slice(i,u);for(var o=0;o<s.length;o+=1)l=l[s[o]];return l},g.set=function(l,s,i,u,o){var f=s.split(".").slice(u,o);return g.get(l,s,0,-1)[f[f.length-1]]=i,i},g.shuffle=function(l){for(var s=l.length-1;s>0;s--){var i=Math.floor(g.random()*(s+1)),u=l[s];l[s]=l[i],l[i]=u}return l},g.choose=function(l){return l[Math.floor(g.random()*l.length)]},g.isElement=function(l){return typeof HTMLElement!="undefined"?l instanceof HTMLElement:!!(l&&l.nodeType&&l.nodeName)},g.isArray=function(l){return Object.prototype.toString.call(l)==="[object Array]"},g.isFunction=function(l){return typeof l=="function"},g.isPlainObject=function(l){return typeof l=="object"&&l.constructor===Object},g.isString=function(l){return toString.call(l)==="[object String]"},g.clamp=function(l,s,i){return l<s?s:l>i?i:l},g.sign=function(l){return l<0?-1:1},g.now=function(){if(typeof window!="undefined"&&window.performance){if(window.performance.now)return window.performance.now();if(window.performance.webkitNow)return window.performance.webkitNow()}return Date.now?Date.now():new Date-g._nowStartTime},g.random=function(l,s){return l=typeof l!="undefined"?l:0,s=typeof s!="undefined"?s:1,l+e()*(s-l)};var e=function(){return g._seed=(g._seed*9301+49297)%233280,g._seed/233280};g.colorToNumber=function(l){return l=l.replace("#",""),l.length==3&&(l=l.charAt(0)+l.charAt(0)+l.charAt(1)+l.charAt(1)+l.charAt(2)+l.charAt(2)),parseInt(l,16)},g.logLevel=1,g.log=function(){console&&g.logLevel>0&&g.logLevel<=3&&console.log.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))},g.info=function(){console&&g.logLevel>0&&g.logLevel<=2&&console.info.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))},g.warn=function(){console&&g.logLevel>0&&g.logLevel<=3&&console.warn.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))},g.warnOnce=function(){var l=Array.prototype.slice.call(arguments).join(" ");g._warnedOnce[l]||(g.warn(l),g._warnedOnce[l]=!0)},g.deprecated=function(l,s,i){l[s]=g.chain(function(){g.warnOnce("\u{1F505} deprecated \u{1F505}",i)},l[s])},g.nextId=function(){return g._nextId++},g.indexOf=function(l,s){if(l.indexOf)return l.indexOf(s);for(var i=0;i<l.length;i++)if(l[i]===s)return i;return-1},g.map=function(l,s){if(l.map)return l.map(s);for(var i=[],u=0;u<l.length;u+=1)i.push(s(l[u]));return i},g.topologicalSort=function(l){var s=[],i=[],u=[];for(var o in l)!i[o]&&!u[o]&&g._topologicalSort(o,i,u,l,s);return s},g._topologicalSort=function(l,s,i,u,o){var f=u[l]||[];i[l]=!0;for(var r=0;r<f.length;r+=1){var t=f[r];i[t]||s[t]||g._topologicalSort(t,s,i,u,o)}i[l]=!1,s[l]=!0,o.push(l)},g.chain=function(){for(var l=[],s=0;s<arguments.length;s+=1){var i=arguments[s];i._chained?l.push.apply(l,i._chained):l.push(i)}var u=function(){for(var o,f=new Array(arguments.length),r=0,t=arguments.length;r<t;r++)f[r]=arguments[r];for(r=0;r<l.length;r+=1){var a=l[r].apply(o,f);typeof a!="undefined"&&(o=a)}return o};return u._chained=l,u},g.chainPathBefore=function(l,s,i){return g.set(l,s,g.chain(i,g.get(l,s)))},g.chainPathAfter=function(l,s,i){return g.set(l,s,g.chain(g.get(l,s),i))},g.setDecomp=function(l){g._decomp=l},g.getDecomp=function(){var l=g._decomp;try{!l&&typeof window!="undefined"&&(l=window.decomp),!l&&typeof pe!="undefined"&&(l=pe.decomp)}catch{l=null}return l}}()},function(M,B){var g={};M.exports=g,function(){g.create=function(e){var l={min:{x:0,y:0},max:{x:0,y:0}};return e&&g.update(l,e),l},g.update=function(e,l,s){e.min.x=1/0,e.max.x=-1/0,e.min.y=1/0,e.max.y=-1/0;for(var i=0;i<l.length;i++){var u=l[i];u.x>e.max.x&&(e.max.x=u.x),u.x<e.min.x&&(e.min.x=u.x),u.y>e.max.y&&(e.max.y=u.y),u.y<e.min.y&&(e.min.y=u.y)}s&&(s.x>0?e.max.x+=s.x:e.min.x+=s.x,s.y>0?e.max.y+=s.y:e.min.y+=s.y)},g.contains=function(e,l){return l.x>=e.min.x&&l.x<=e.max.x&&l.y>=e.min.y&&l.y<=e.max.y},g.overlaps=function(e,l){return e.min.x<=l.max.x&&e.max.x>=l.min.x&&e.max.y>=l.min.y&&e.min.y<=l.max.y},g.translate=function(e,l){e.min.x+=l.x,e.max.x+=l.x,e.min.y+=l.y,e.max.y+=l.y},g.shift=function(e,l){var s=e.max.x-e.min.x,i=e.max.y-e.min.y;e.min.x=l.x,e.max.x=l.x+s,e.min.y=l.y,e.max.y=l.y+i}}()},function(M,B){var g={};M.exports=g,function(){g.create=function(e,l){return{x:e||0,y:l||0}},g.clone=function(e){return{x:e.x,y:e.y}},g.magnitude=function(e){return Math.sqrt(e.x*e.x+e.y*e.y)},g.magnitudeSquared=function(e){return e.x*e.x+e.y*e.y},g.rotate=function(e,l,s){var i=Math.cos(l),u=Math.sin(l);s||(s={});var o=e.x*i-e.y*u;return s.y=e.x*u+e.y*i,s.x=o,s},g.rotateAbout=function(e,l,s,i){var u=Math.cos(l),o=Math.sin(l);i||(i={});var f=s.x+((e.x-s.x)*u-(e.y-s.y)*o);return i.y=s.y+((e.x-s.x)*o+(e.y-s.y)*u),i.x=f,i},g.normalise=function(e){var l=g.magnitude(e);return l===0?{x:0,y:0}:{x:e.x/l,y:e.y/l}},g.dot=function(e,l){return e.x*l.x+e.y*l.y},g.cross=function(e,l){return e.x*l.y-e.y*l.x},g.cross3=function(e,l,s){return(l.x-e.x)*(s.y-e.y)-(l.y-e.y)*(s.x-e.x)},g.add=function(e,l,s){return s||(s={}),s.x=e.x+l.x,s.y=e.y+l.y,s},g.sub=function(e,l,s){return s||(s={}),s.x=e.x-l.x,s.y=e.y-l.y,s},g.mult=function(e,l){return{x:e.x*l,y:e.y*l}},g.div=function(e,l){return{x:e.x/l,y:e.y/l}},g.perp=function(e,l){return l=l===!0?-1:1,{x:l*-e.y,y:l*e.x}},g.neg=function(e){return{x:-e.x,y:-e.y}},g.angle=function(e,l){return Math.atan2(l.y-e.y,l.x-e.x)},g._temp=[g.create(),g.create(),g.create(),g.create(),g.create(),g.create()]}()},function(M,B,g){var e={};M.exports=e;var l=g(2),s=g(0);(function(){e.create=function(i,u){for(var o=[],f=0;f<i.length;f++){var r=i[f],t={x:r.x,y:r.y,index:f,body:u,isInternal:!1};o.push(t)}return o},e.fromPath=function(i,u){var o=/L?\s*([-\d.e]+)[\s,]*([-\d.e]+)*/ig,f=[];return i.replace(o,function(r,t,a){f.push({x:parseFloat(t),y:parseFloat(a)})}),e.create(f,u)},e.centre=function(i){for(var u=e.area(i,!0),o={x:0,y:0},f,r,t,a=0;a<i.length;a++)t=(a+1)%i.length,f=l.cross(i[a],i[t]),r=l.mult(l.add(i[a],i[t]),f),o=l.add(o,r);return l.div(o,6*u)},e.mean=function(i){for(var u={x:0,y:0},o=0;o<i.length;o++)u.x+=i[o].x,u.y+=i[o].y;return l.div(u,i.length)},e.area=function(i,u){for(var o=0,f=i.length-1,r=0;r<i.length;r++)o+=(i[f].x-i[r].x)*(i[f].y+i[r].y),f=r;return u?o/2:Math.abs(o)/2},e.inertia=function(i,u){for(var o=0,f=0,r=i,t,a,n=0;n<r.length;n++)a=(n+1)%r.length,t=Math.abs(l.cross(r[a],r[n])),o+=t*(l.dot(r[a],r[a])+l.dot(r[a],r[n])+l.dot(r[n],r[n])),f+=t;return u/6*(o/f)},e.translate=function(i,u,o){o=typeof o!="undefined"?o:1;var f=i.length,r=u.x*o,t=u.y*o,a;for(a=0;a<f;a++)i[a].x+=r,i[a].y+=t;return i},e.rotate=function(i,u,o){if(u!==0){var f=Math.cos(u),r=Math.sin(u),t=o.x,a=o.y,n=i.length,v,p,C,w;for(w=0;w<n;w++)v=i[w],p=v.x-t,C=v.y-a,v.x=t+(p*f-C*r),v.y=a+(p*r+C*f);return i}},e.contains=function(i,u){for(var o=u.x,f=u.y,r=i.length,t=i[r-1],a,n=0;n<r;n++){if(a=i[n],(o-t.x)*(a.y-t.y)+(f-t.y)*(t.x-a.x)>0)return!1;t=a}return!0},e.scale=function(i,u,o,f){if(u===1&&o===1)return i;f=f||e.centre(i);for(var r,t,a=0;a<i.length;a++)r=i[a],t=l.sub(r,f),i[a].x=f.x+t.x*u,i[a].y=f.y+t.y*o;return i},e.chamfer=function(i,u,o,f,r){typeof u=="number"?u=[u]:u=u||[8],o=typeof o!="undefined"?o:-1,f=f||2,r=r||14;for(var t=[],a=0;a<i.length;a++){var n=i[a-1>=0?a-1:i.length-1],v=i[a],p=i[(a+1)%i.length],C=u[a<u.length?a:u.length-1];if(C===0){t.push(v);continue}var w=l.normalise({x:v.y-n.y,y:n.x-v.x}),c=l.normalise({x:p.y-v.y,y:v.x-p.x}),h=Math.sqrt(2*Math.pow(C,2)),m=l.mult(s.clone(w),C),d=l.normalise(l.mult(l.add(w,c),.5)),y=l.sub(v,l.mult(d,h)),S=o;o===-1&&(S=Math.pow(C,.32)*1.75),S=s.clamp(S,f,r),S%2===1&&(S+=1);for(var P=Math.acos(l.dot(w,c)),x=P/S,A=0;A<S;A++)t.push(l.add(l.rotate(m,x*A),y))}return t},e.clockwiseSort=function(i){var u=e.mean(i);return i.sort(function(o,f){return l.angle(u,o)-l.angle(u,f)}),i},e.isConvex=function(i){var u=0,o=i.length,f,r,t,a;if(o<3)return null;for(f=0;f<o;f++)if(r=(f+1)%o,t=(f+2)%o,a=(i[r].x-i[f].x)*(i[t].y-i[r].y),a-=(i[r].y-i[f].y)*(i[t].x-i[r].x),a<0?u|=1:a>0&&(u|=2),u===3)return!1;return u!==0?!0:null},e.hull=function(i){var u=[],o=[],f,r;for(i=i.slice(0),i.sort(function(t,a){var n=t.x-a.x;return n!==0?n:t.y-a.y}),r=0;r<i.length;r+=1){for(f=i[r];o.length>=2&&l.cross3(o[o.length-2],o[o.length-1],f)<=0;)o.pop();o.push(f)}for(r=i.length-1;r>=0;r-=1){for(f=i[r];u.length>=2&&l.cross3(u[u.length-2],u[u.length-1],f)<=0;)u.pop();u.push(f)}return u.pop(),o.pop(),u.concat(o)}})()},function(M,B,g){var e={};M.exports=e;var l=g(0);(function(){e.on=function(s,i,u){for(var o=i.split(" "),f,r=0;r<o.length;r++)f=o[r],s.events=s.events||{},s.events[f]=s.events[f]||[],s.events[f].push(u);return u},e.off=function(s,i,u){if(!i){s.events={};return}typeof i=="function"&&(u=i,i=l.keys(s.events).join(" "));for(var o=i.split(" "),f=0;f<o.length;f++){var r=s.events[o[f]],t=[];if(u&&r)for(var a=0;a<r.length;a++)r[a]!==u&&t.push(r[a]);s.events[o[f]]=t}},e.trigger=function(s,i,u){var o,f,r,t,a=s.events;if(a&&l.keys(a).length>0){u||(u={}),o=i.split(" ");for(var n=0;n<o.length;n++)if(f=o[n],r=a[f],r){t=l.clone(u,!1),t.name=f,t.source=s;for(var v=0;v<r.length;v++)r[v].apply(s,[t])}}}})()},function(M,B,g){var e={};M.exports=e;var l=g(4),s=g(0),i=g(1),u=g(6);(function(){e.create=function(o){return s.extend({id:s.nextId(),type:"composite",parent:null,isModified:!1,bodies:[],constraints:[],composites:[],label:"Composite",plugin:{},cache:{allBodies:null,allConstraints:null,allComposites:null}},o)},e.setModified=function(o,f,r,t){if(o.isModified=f,f&&o.cache&&(o.cache.allBodies=null,o.cache.allConstraints=null,o.cache.allComposites=null),r&&o.parent&&e.setModified(o.parent,f,r,t),t)for(var a=0;a<o.composites.length;a++){var n=o.composites[a];e.setModified(n,f,r,t)}},e.add=function(o,f){var r=[].concat(f);l.trigger(o,"beforeAdd",{object:f});for(var t=0;t<r.length;t++){var a=r[t];switch(a.type){case"body":if(a.parent!==a){s.warn("Composite.add: skipped adding a compound body part (you must add its parent instead)");break}e.addBody(o,a);break;case"constraint":e.addConstraint(o,a);break;case"composite":e.addComposite(o,a);break;case"mouseConstraint":e.addConstraint(o,a.constraint);break}}return l.trigger(o,"afterAdd",{object:f}),o},e.remove=function(o,f,r){var t=[].concat(f);l.trigger(o,"beforeRemove",{object:f});for(var a=0;a<t.length;a++){var n=t[a];switch(n.type){case"body":e.removeBody(o,n,r);break;case"constraint":e.removeConstraint(o,n,r);break;case"composite":e.removeComposite(o,n,r);break;case"mouseConstraint":e.removeConstraint(o,n.constraint);break}}return l.trigger(o,"afterRemove",{object:f}),o},e.addComposite=function(o,f){return o.composites.push(f),f.parent=o,e.setModified(o,!0,!0,!1),o},e.removeComposite=function(o,f,r){var t=s.indexOf(o.composites,f);if(t!==-1&&e.removeCompositeAt(o,t),r)for(var a=0;a<o.composites.length;a++)e.removeComposite(o.composites[a],f,!0);return o},e.removeCompositeAt=function(o,f){return o.composites.splice(f,1),e.setModified(o,!0,!0,!1),o},e.addBody=function(o,f){return o.bodies.push(f),e.setModified(o,!0,!0,!1),o},e.removeBody=function(o,f,r){var t=s.indexOf(o.bodies,f);if(t!==-1&&e.removeBodyAt(o,t),r)for(var a=0;a<o.composites.length;a++)e.removeBody(o.composites[a],f,!0);return o},e.removeBodyAt=function(o,f){return o.bodies.splice(f,1),e.setModified(o,!0,!0,!1),o},e.addConstraint=function(o,f){return o.constraints.push(f),e.setModified(o,!0,!0,!1),o},e.removeConstraint=function(o,f,r){var t=s.indexOf(o.constraints,f);if(t!==-1&&e.removeConstraintAt(o,t),r)for(var a=0;a<o.composites.length;a++)e.removeConstraint(o.composites[a],f,!0);return o},e.removeConstraintAt=function(o,f){return o.constraints.splice(f,1),e.setModified(o,!0,!0,!1),o},e.clear=function(o,f,r){if(r)for(var t=0;t<o.composites.length;t++)e.clear(o.composites[t],f,!0);return f?o.bodies=o.bodies.filter(function(a){return a.isStatic}):o.bodies.length=0,o.constraints.length=0,o.composites.length=0,e.setModified(o,!0,!0,!1),o},e.allBodies=function(o){if(o.cache&&o.cache.allBodies)return o.cache.allBodies;for(var f=[].concat(o.bodies),r=0;r<o.composites.length;r++)f=f.concat(e.allBodies(o.composites[r]));return o.cache&&(o.cache.allBodies=f),f},e.allConstraints=function(o){if(o.cache&&o.cache.allConstraints)return o.cache.allConstraints;for(var f=[].concat(o.constraints),r=0;r<o.composites.length;r++)f=f.concat(e.allConstraints(o.composites[r]));return o.cache&&(o.cache.allConstraints=f),f},e.allComposites=function(o){if(o.cache&&o.cache.allComposites)return o.cache.allComposites;for(var f=[].concat(o.composites),r=0;r<o.composites.length;r++)f=f.concat(e.allComposites(o.composites[r]));return o.cache&&(o.cache.allComposites=f),f},e.get=function(o,f,r){var t,a;switch(r){case"body":t=e.allBodies(o);break;case"constraint":t=e.allConstraints(o);break;case"composite":t=e.allComposites(o).concat(o);break}return t?(a=t.filter(function(n){return n.id.toString()===f.toString()}),a.length===0?null:a[0]):null},e.move=function(o,f,r){return e.remove(o,f),e.add(r,f),o},e.rebase=function(o){for(var f=e.allBodies(o).concat(e.allConstraints(o)).concat(e.allComposites(o)),r=0;r<f.length;r++)f[r].id=s.nextId();return o},e.translate=function(o,f,r){for(var t=r?e.allBodies(o):o.bodies,a=0;a<t.length;a++)u.translate(t[a],f);return o},e.rotate=function(o,f,r,t){for(var a=Math.cos(f),n=Math.sin(f),v=t?e.allBodies(o):o.bodies,p=0;p<v.length;p++){var C=v[p],w=C.position.x-r.x,c=C.position.y-r.y;u.setPosition(C,{x:r.x+(w*a-c*n),y:r.y+(w*n+c*a)}),u.rotate(C,f)}return o},e.scale=function(o,f,r,t,a){for(var n=a?e.allBodies(o):o.bodies,v=0;v<n.length;v++){var p=n[v],C=p.position.x-t.x,w=p.position.y-t.y;u.setPosition(p,{x:t.x+C*f,y:t.y+w*r}),u.scale(p,f,r)}return o},e.bounds=function(o){for(var f=e.allBodies(o),r=[],t=0;t<f.length;t+=1){var a=f[t];r.push(a.bounds.min,a.bounds.max)}return i.create(r)}})()},function(M,B,g){var e={};M.exports=e;var l=g(3),s=g(2),i=g(7);g(16);var u=g(0),o=g(1),f=g(11);(function(){e._inertiaScale=4,e._nextCollidingGroupId=1,e._nextNonCollidingGroupId=-1,e._nextCategory=1,e.create=function(t){var a={id:u.nextId(),type:"body",label:"Body",parts:[],plugin:{},angle:0,vertices:l.fromPath("L 0 0 L 40 0 L 40 40 L 0 40"),position:{x:0,y:0},force:{x:0,y:0},torque:0,positionImpulse:{x:0,y:0},constraintImpulse:{x:0,y:0,angle:0},totalContacts:0,speed:0,angularSpeed:0,velocity:{x:0,y:0},angularVelocity:0,isSensor:!1,isStatic:!1,isSleeping:!1,motion:0,sleepThreshold:60,density:.001,restitution:0,friction:.1,frictionStatic:.5,frictionAir:.01,collisionFilter:{category:1,mask:4294967295,group:0},slop:.05,timeScale:1,render:{visible:!0,opacity:1,strokeStyle:null,fillStyle:null,lineWidth:null,sprite:{xScale:1,yScale:1,xOffset:0,yOffset:0}},events:null,bounds:null,chamfer:null,circleRadius:0,positionPrev:null,anglePrev:0,parent:null,axes:null,area:0,mass:0,inertia:0,_original:null},n=u.extend(a,t);return r(n,t),n},e.nextGroup=function(t){return t?e._nextNonCollidingGroupId--:e._nextCollidingGroupId++},e.nextCategory=function(){return e._nextCategory=e._nextCategory<<1,e._nextCategory};var r=function(t,a){a=a||{},e.set(t,{bounds:t.bounds||o.create(t.vertices),positionPrev:t.positionPrev||s.clone(t.position),anglePrev:t.anglePrev||t.angle,vertices:t.vertices,parts:t.parts||[t],isStatic:t.isStatic,isSleeping:t.isSleeping,parent:t.parent||t}),l.rotate(t.vertices,t.angle,t.position),f.rotate(t.axes,t.angle),o.update(t.bounds,t.vertices,t.velocity),e.set(t,{axes:a.axes||t.axes,area:a.area||t.area,mass:a.mass||t.mass,inertia:a.inertia||t.inertia});var n=t.isStatic?"#14151f":u.choose(["#f19648","#f5d259","#f55a3c","#063e7b","#ececd1"]),v=t.isStatic?"#555":"#ccc",p=t.isStatic&&t.render.fillStyle===null?1:0;t.render.fillStyle=t.render.fillStyle||n,t.render.strokeStyle=t.render.strokeStyle||v,t.render.lineWidth=t.render.lineWidth||p,t.render.sprite.xOffset+=-(t.bounds.min.x-t.position.x)/(t.bounds.max.x-t.bounds.min.x),t.render.sprite.yOffset+=-(t.bounds.min.y-t.position.y)/(t.bounds.max.y-t.bounds.min.y)};e.set=function(t,a,n){var v;typeof a=="string"&&(v=a,a={},a[v]=n);for(v in a)if(!!Object.prototype.hasOwnProperty.call(a,v))switch(n=a[v],v){case"isStatic":e.setStatic(t,n);break;case"isSleeping":i.set(t,n);break;case"mass":e.setMass(t,n);break;case"density":e.setDensity(t,n);break;case"inertia":e.setInertia(t,n);break;case"vertices":e.setVertices(t,n);break;case"position":e.setPosition(t,n);break;case"angle":e.setAngle(t,n);break;case"velocity":e.setVelocity(t,n);break;case"angularVelocity":e.setAngularVelocity(t,n);break;case"parts":e.setParts(t,n);break;case"centre":e.setCentre(t,n);break;default:t[v]=n}},e.setStatic=function(t,a){for(var n=0;n<t.parts.length;n++){var v=t.parts[n];v.isStatic=a,a?(v._original={restitution:v.restitution,friction:v.friction,mass:v.mass,inertia:v.inertia,density:v.density,inverseMass:v.inverseMass,inverseInertia:v.inverseInertia},v.restitution=0,v.friction=1,v.mass=v.inertia=v.density=1/0,v.inverseMass=v.inverseInertia=0,v.positionPrev.x=v.position.x,v.positionPrev.y=v.position.y,v.anglePrev=v.angle,v.angularVelocity=0,v.speed=0,v.angularSpeed=0,v.motion=0):v._original&&(v.restitution=v._original.restitution,v.friction=v._original.friction,v.mass=v._original.mass,v.inertia=v._original.inertia,v.density=v._original.density,v.inverseMass=v._original.inverseMass,v.inverseInertia=v._original.inverseInertia,v._original=null)}},e.setMass=function(t,a){var n=t.inertia/(t.mass/6);t.inertia=n*(a/6),t.inverseInertia=1/t.inertia,t.mass=a,t.inverseMass=1/t.mass,t.density=t.mass/t.area},e.setDensity=function(t,a){e.setMass(t,a*t.area),t.density=a},e.setInertia=function(t,a){t.inertia=a,t.inverseInertia=1/t.inertia},e.setVertices=function(t,a){a[0].body===t?t.vertices=a:t.vertices=l.create(a,t),t.axes=f.fromVertices(t.vertices),t.area=l.area(t.vertices),e.setMass(t,t.density*t.area);var n=l.centre(t.vertices);l.translate(t.vertices,n,-1),e.setInertia(t,e._inertiaScale*l.inertia(t.vertices,t.mass)),l.translate(t.vertices,t.position),o.update(t.bounds,t.vertices,t.velocity)},e.setParts=function(t,a,n){var v;for(a=a.slice(0),t.parts.length=0,t.parts.push(t),t.parent=t,v=0;v<a.length;v++){var p=a[v];p!==t&&(p.parent=t,t.parts.push(p))}if(t.parts.length!==1){if(n=typeof n!="undefined"?n:!0,n){var C=[];for(v=0;v<a.length;v++)C=C.concat(a[v].vertices);l.clockwiseSort(C);var w=l.hull(C),c=l.centre(w);e.setVertices(t,w),l.translate(t.vertices,c)}var h=e._totalProperties(t);t.area=h.area,t.parent=t,t.position.x=h.centre.x,t.position.y=h.centre.y,t.positionPrev.x=h.centre.x,t.positionPrev.y=h.centre.y,e.setMass(t,h.mass),e.setInertia(t,h.inertia),e.setPosition(t,h.centre)}},e.setCentre=function(t,a,n){n?(t.positionPrev.x+=a.x,t.positionPrev.y+=a.y,t.position.x+=a.x,t.position.y+=a.y):(t.positionPrev.x=a.x-(t.position.x-t.positionPrev.x),t.positionPrev.y=a.y-(t.position.y-t.positionPrev.y),t.position.x=a.x,t.position.y=a.y)},e.setPosition=function(t,a){var n=s.sub(a,t.position);t.positionPrev.x+=n.x,t.positionPrev.y+=n.y;for(var v=0;v<t.parts.length;v++){var p=t.parts[v];p.position.x+=n.x,p.position.y+=n.y,l.translate(p.vertices,n),o.update(p.bounds,p.vertices,t.velocity)}},e.setAngle=function(t,a){var n=a-t.angle;t.anglePrev+=n;for(var v=0;v<t.parts.length;v++){var p=t.parts[v];p.angle+=n,l.rotate(p.vertices,n,t.position),f.rotate(p.axes,n),o.update(p.bounds,p.vertices,t.velocity),v>0&&s.rotateAbout(p.position,n,t.position,p.position)}},e.setVelocity=function(t,a){t.positionPrev.x=t.position.x-a.x,t.positionPrev.y=t.position.y-a.y,t.velocity.x=a.x,t.velocity.y=a.y,t.speed=s.magnitude(t.velocity)},e.setAngularVelocity=function(t,a){t.anglePrev=t.angle-a,t.angularVelocity=a,t.angularSpeed=Math.abs(t.angularVelocity)},e.translate=function(t,a){e.setPosition(t,s.add(t.position,a))},e.rotate=function(t,a,n){if(!n)e.setAngle(t,t.angle+a);else{var v=Math.cos(a),p=Math.sin(a),C=t.position.x-n.x,w=t.position.y-n.y;e.setPosition(t,{x:n.x+(C*v-w*p),y:n.y+(C*p+w*v)}),e.setAngle(t,t.angle+a)}},e.scale=function(t,a,n,v){var p=0,C=0;v=v||t.position;for(var w=0;w<t.parts.length;w++){var c=t.parts[w];l.scale(c.vertices,a,n,v),c.axes=f.fromVertices(c.vertices),c.area=l.area(c.vertices),e.setMass(c,t.density*c.area),l.translate(c.vertices,{x:-c.position.x,y:-c.position.y}),e.setInertia(c,e._inertiaScale*l.inertia(c.vertices,c.mass)),l.translate(c.vertices,{x:c.position.x,y:c.position.y}),w>0&&(p+=c.area,C+=c.inertia),c.position.x=v.x+(c.position.x-v.x)*a,c.position.y=v.y+(c.position.y-v.y)*n,o.update(c.bounds,c.vertices,t.velocity)}t.parts.length>1&&(t.area=p,t.isStatic||(e.setMass(t,t.density*p),e.setInertia(t,C))),t.circleRadius&&(a===n?t.circleRadius*=a:t.circleRadius=null)},e.update=function(t,a,n,v){var p=Math.pow(a*n*t.timeScale,2),C=1-t.frictionAir*n*t.timeScale,w=t.position.x-t.positionPrev.x,c=t.position.y-t.positionPrev.y;t.velocity.x=w*C*v+t.force.x/t.mass*p,t.velocity.y=c*C*v+t.force.y/t.mass*p,t.positionPrev.x=t.position.x,t.positionPrev.y=t.position.y,t.position.x+=t.velocity.x,t.position.y+=t.velocity.y,t.angularVelocity=(t.angle-t.anglePrev)*C*v+t.torque/t.inertia*p,t.anglePrev=t.angle,t.angle+=t.angularVelocity,t.speed=s.magnitude(t.velocity),t.angularSpeed=Math.abs(t.angularVelocity);for(var h=0;h<t.parts.length;h++){var m=t.parts[h];l.translate(m.vertices,t.velocity),h>0&&(m.position.x+=t.velocity.x,m.position.y+=t.velocity.y),t.angularVelocity!==0&&(l.rotate(m.vertices,t.angularVelocity,t.position),f.rotate(m.axes,t.angularVelocity),h>0&&s.rotateAbout(m.position,t.angularVelocity,t.position,m.position)),o.update(m.bounds,m.vertices,t.velocity)}},e.applyForce=function(t,a,n){t.force.x+=n.x,t.force.y+=n.y;var v={x:a.x-t.position.x,y:a.y-t.position.y};t.torque+=v.x*n.y-v.y*n.x},e._totalProperties=function(t){for(var a={mass:0,area:0,inertia:0,centre:{x:0,y:0}},n=t.parts.length===1?0:1;n<t.parts.length;n++){var v=t.parts[n],p=v.mass!==1/0?v.mass:1;a.mass+=p,a.area+=v.area,a.inertia+=v.inertia,a.centre=s.add(a.centre,s.mult(v.position,p))}return a.centre=s.div(a.centre,a.mass),a}})()},function(M,B,g){var e={};M.exports=e;var l=g(4);(function(){e._motionWakeThreshold=.18,e._motionSleepThreshold=.08,e._minBias=.9,e.update=function(s,i){for(var u=i*i*i,o=0;o<s.length;o++){var f=s[o],r=f.speed*f.speed+f.angularSpeed*f.angularSpeed;if(f.force.x!==0||f.force.y!==0){e.set(f,!1);continue}var t=Math.min(f.motion,r),a=Math.max(f.motion,r);f.motion=e._minBias*t+(1-e._minBias)*a,f.sleepThreshold>0&&f.motion<e._motionSleepThreshold*u?(f.sleepCounter+=1,f.sleepCounter>=f.sleepThreshold&&e.set(f,!0)):f.sleepCounter>0&&(f.sleepCounter-=1)}},e.afterCollisions=function(s,i){for(var u=i*i*i,o=0;o<s.length;o++){var f=s[o];if(!!f.isActive){var r=f.collision,t=r.bodyA.parent,a=r.bodyB.parent;if(!(t.isSleeping&&a.isSleeping||t.isStatic||a.isStatic)&&(t.isSleeping||a.isSleeping)){var n=t.isSleeping&&!t.isStatic?t:a,v=n===t?a:t;!n.isStatic&&v.motion>e._motionWakeThreshold*u&&e.set(n,!1)}}}},e.set=function(s,i){var u=s.isSleeping;i?(s.isSleeping=!0,s.sleepCounter=s.sleepThreshold,s.positionImpulse.x=0,s.positionImpulse.y=0,s.positionPrev.x=s.position.x,s.positionPrev.y=s.position.y,s.anglePrev=s.angle,s.speed=0,s.angularSpeed=0,s.motion=0,u||l.trigger(s,"sleepStart")):(s.isSleeping=!1,s.sleepCounter=0,u&&l.trigger(s,"sleepEnd"))}})()},function(M,B,g){var e={};M.exports=e;var l=g(3),s=g(9);(function(){var i=[],u={overlap:0,axis:null},o={overlap:0,axis:null};e.create=function(f,r){return{pair:null,collided:!1,bodyA:f,bodyB:r,parentA:f.parent,parentB:r.parent,depth:0,normal:{x:0,y:0},tangent:{x:0,y:0},penetration:{x:0,y:0},supports:[]}},e.collides=function(f,r,t){if(e._overlapAxes(u,f.vertices,r.vertices,f.axes),u.overlap<=0||(e._overlapAxes(o,r.vertices,f.vertices,r.axes),o.overlap<=0))return null;var a=t&&t.table[s.id(f,r)],n;a?n=a.collision:(n=e.create(f,r),n.collided=!0,n.bodyA=f.id<r.id?f:r,n.bodyB=f.id<r.id?r:f,n.parentA=n.bodyA.parent,n.parentB=n.bodyB.parent),f=n.bodyA,r=n.bodyB;var v;u.overlap<o.overlap?v=u:v=o;var p=n.normal,C=n.supports,w=v.axis,c=w.x,h=w.y;c*(r.position.x-f.position.x)+h*(r.position.y-f.position.y)<0?(p.x=c,p.y=h):(p.x=-c,p.y=-h),n.tangent.x=-p.y,n.tangent.y=p.x,n.depth=v.overlap,n.penetration.x=p.x*n.depth,n.penetration.y=p.y*n.depth;var m=e._findSupports(f,r,p,1),d=0;if(l.contains(f.vertices,m[0])&&(C[d++]=m[0]),l.contains(f.vertices,m[1])&&(C[d++]=m[1]),d<2){var y=e._findSupports(r,f,p,-1);l.contains(r.vertices,y[0])&&(C[d++]=y[0]),d<2&&l.contains(r.vertices,y[1])&&(C[d++]=y[1])}return d===0&&(C[d++]=m[0]),C.length=d,n},e._overlapAxes=function(f,r,t,a){var n=r.length,v=t.length,p=r[0].x,C=r[0].y,w=t[0].x,c=t[0].y,h=a.length,m=Number.MAX_VALUE,d=0,y,S,P,x,A,T;for(A=0;A<h;A++){var L=a[A],R=L.x,F=L.y,O=p*R+C*F,D=w*R+c*F,k=O,H=D;for(T=1;T<n;T+=1)x=r[T].x*R+r[T].y*F,x>k?k=x:x<O&&(O=x);for(T=1;T<v;T+=1)x=t[T].x*R+t[T].y*F,x>H?H=x:x<D&&(D=x);if(S=k-D,P=H-O,y=S<P?S:P,y<m&&(m=y,d=A,y<=0))break}f.axis=a[d],f.overlap=m},e._projectToAxis=function(f,r,t){for(var a=r[0].x*t.x+r[0].y*t.y,n=a,v=1;v<r.length;v+=1){var p=r[v].x*t.x+r[v].y*t.y;p>n?n=p:p<a&&(a=p)}f.min=a,f.max=n},e._findSupports=function(f,r,t,a){var n=r.vertices,v=n.length,p=f.position.x,C=f.position.y,w=t.x*a,c=t.y*a,h=Number.MAX_VALUE,m,d,y,S,P;for(P=0;P<v;P+=1)d=n[P],S=w*(p-d.x)+c*(C-d.y),S<h&&(h=S,m=d);return y=n[(v+m.index-1)%v],h=w*(p-y.x)+c*(C-y.y),d=n[(m.index+1)%v],w*(p-d.x)+c*(C-d.y)<h?(i[0]=m,i[1]=d,i):(i[0]=m,i[1]=y,i)}})()},function(M,B,g){var e={};M.exports=e;var l=g(17);(function(){e.create=function(s,i){var u=s.bodyA,o=s.bodyB,f={id:e.id(u,o),bodyA:u,bodyB:o,collision:s,contacts:[],activeContacts:[],separation:0,isActive:!0,confirmedActive:!0,isSensor:u.isSensor||o.isSensor,timeCreated:i,timeUpdated:i,inverseMass:0,friction:0,frictionStatic:0,restitution:0,slop:0};return e.update(f,s,i),f},e.update=function(s,i,u){var o=s.contacts,f=i.supports,r=s.activeContacts,t=i.parentA,a=i.parentB,n=t.vertices.length;s.isActive=!0,s.timeUpdated=u,s.collision=i,s.separation=i.depth,s.inverseMass=t.inverseMass+a.inverseMass,s.friction=t.friction<a.friction?t.friction:a.friction,s.frictionStatic=t.frictionStatic>a.frictionStatic?t.frictionStatic:a.frictionStatic,s.restitution=t.restitution>a.restitution?t.restitution:a.restitution,s.slop=t.slop>a.slop?t.slop:a.slop,i.pair=s,r.length=0;for(var v=0;v<f.length;v++){var p=f[v],C=p.body===t?p.index:n+p.index,w=o[C];w?r.push(w):r.push(o[C]=l.create(p))}},e.setActive=function(s,i,u){i?(s.isActive=!0,s.timeUpdated=u):(s.isActive=!1,s.activeContacts.length=0)},e.id=function(s,i){return s.id<i.id?"A"+s.id+"B"+i.id:"A"+i.id+"B"+s.id}})()},function(M,B,g){var e={};M.exports=e;var l=g(3),s=g(2),i=g(7),u=g(1),o=g(11),f=g(0);(function(){e._warming=.4,e._torqueDampen=1,e._minLength=1e-6,e.create=function(r){var t=r;t.bodyA&&!t.pointA&&(t.pointA={x:0,y:0}),t.bodyB&&!t.pointB&&(t.pointB={x:0,y:0});var a=t.bodyA?s.add(t.bodyA.position,t.pointA):t.pointA,n=t.bodyB?s.add(t.bodyB.position,t.pointB):t.pointB,v=s.magnitude(s.sub(a,n));t.length=typeof t.length!="undefined"?t.length:v,t.id=t.id||f.nextId(),t.label=t.label||"Constraint",t.type="constraint",t.stiffness=t.stiffness||(t.length>0?1:.7),t.damping=t.damping||0,t.angularStiffness=t.angularStiffness||0,t.angleA=t.bodyA?t.bodyA.angle:t.angleA,t.angleB=t.bodyB?t.bodyB.angle:t.angleB,t.plugin={};var p={visible:!0,lineWidth:2,strokeStyle:"#ffffff",type:"line",anchors:!0};return t.length===0&&t.stiffness>.1?(p.type="pin",p.anchors=!1):t.stiffness<.9&&(p.type="spring"),t.render=f.extend(p,t.render),t},e.preSolveAll=function(r){for(var t=0;t<r.length;t+=1){var a=r[t],n=a.constraintImpulse;a.isStatic||n.x===0&&n.y===0&&n.angle===0||(a.position.x+=n.x,a.position.y+=n.y,a.angle+=n.angle)}},e.solveAll=function(r,t){for(var a=0;a<r.length;a+=1){var n=r[a],v=!n.bodyA||n.bodyA&&n.bodyA.isStatic,p=!n.bodyB||n.bodyB&&n.bodyB.isStatic;(v||p)&&e.solve(r[a],t)}for(a=0;a<r.length;a+=1)n=r[a],v=!n.bodyA||n.bodyA&&n.bodyA.isStatic,p=!n.bodyB||n.bodyB&&n.bodyB.isStatic,!v&&!p&&e.solve(r[a],t)},e.solve=function(r,t){var a=r.bodyA,n=r.bodyB,v=r.pointA,p=r.pointB;if(!(!a&&!n)){a&&!a.isStatic&&(s.rotate(v,a.angle-r.angleA,v),r.angleA=a.angle),n&&!n.isStatic&&(s.rotate(p,n.angle-r.angleB,p),r.angleB=n.angle);var C=v,w=p;if(a&&(C=s.add(a.position,v)),n&&(w=s.add(n.position,p)),!(!C||!w)){var c=s.sub(C,w),h=s.magnitude(c);h<e._minLength&&(h=e._minLength);var m=(h-r.length)/h,d=r.stiffness<1?r.stiffness*t:r.stiffness,y=s.mult(c,m*d),S=(a?a.inverseMass:0)+(n?n.inverseMass:0),P=(a?a.inverseInertia:0)+(n?n.inverseInertia:0),x=S+P,A,T,L,R,F;if(r.damping){var O=s.create();L=s.div(c,h),F=s.sub(n&&s.sub(n.position,n.positionPrev)||O,a&&s.sub(a.position,a.positionPrev)||O),R=s.dot(L,F)}a&&!a.isStatic&&(T=a.inverseMass/S,a.constraintImpulse.x-=y.x*T,a.constraintImpulse.y-=y.y*T,a.position.x-=y.x*T,a.position.y-=y.y*T,r.damping&&(a.positionPrev.x-=r.damping*L.x*R*T,a.positionPrev.y-=r.damping*L.y*R*T),A=s.cross(v,y)/x*e._torqueDampen*a.inverseInertia*(1-r.angularStiffness),a.constraintImpulse.angle-=A,a.angle-=A),n&&!n.isStatic&&(T=n.inverseMass/S,n.constraintImpulse.x+=y.x*T,n.constraintImpulse.y+=y.y*T,n.position.x+=y.x*T,n.position.y+=y.y*T,r.damping&&(n.positionPrev.x+=r.damping*L.x*R*T,n.positionPrev.y+=r.damping*L.y*R*T),A=s.cross(p,y)/x*e._torqueDampen*n.inverseInertia*(1-r.angularStiffness),n.constraintImpulse.angle+=A,n.angle+=A)}}},e.postSolveAll=function(r){for(var t=0;t<r.length;t++){var a=r[t],n=a.constraintImpulse;if(!(a.isStatic||n.x===0&&n.y===0&&n.angle===0)){i.set(a,!1);for(var v=0;v<a.parts.length;v++){var p=a.parts[v];l.translate(p.vertices,n),v>0&&(p.position.x+=n.x,p.position.y+=n.y),n.angle!==0&&(l.rotate(p.vertices,n.angle,a.position),o.rotate(p.axes,n.angle),v>0&&s.rotateAbout(p.position,n.angle,a.position,p.position)),u.update(p.bounds,p.vertices,a.velocity)}n.angle*=e._warming,n.x*=e._warming,n.y*=e._warming}}},e.pointAWorld=function(r){return{x:(r.bodyA?r.bodyA.position.x:0)+r.pointA.x,y:(r.bodyA?r.bodyA.position.y:0)+r.pointA.y}},e.pointBWorld=function(r){return{x:(r.bodyB?r.bodyB.position.x:0)+r.pointB.x,y:(r.bodyB?r.bodyB.position.y:0)+r.pointB.y}}})()},function(M,B,g){var e={};M.exports=e;var l=g(2),s=g(0);(function(){e.fromVertices=function(i){for(var u={},o=0;o<i.length;o++){var f=(o+1)%i.length,r=l.normalise({x:i[f].y-i[o].y,y:i[o].x-i[f].x}),t=r.y===0?1/0:r.x/r.y;t=t.toFixed(3).toString(),u[t]=r}return s.values(u)},e.rotate=function(i,u){if(u!==0)for(var o=Math.cos(u),f=Math.sin(u),r=0;r<i.length;r++){var t=i[r],a;a=t.x*o-t.y*f,t.y=t.x*f+t.y*o,t.x=a}}})()},function(M,B,g){var e={};M.exports=e;var l=g(3),s=g(0),i=g(6),u=g(1),o=g(2);(function(){e.rectangle=function(f,r,t,a,n){n=n||{};var v={label:"Rectangle Body",position:{x:f,y:r},vertices:l.fromPath("L 0 0 L "+t+" 0 L "+t+" "+a+" L 0 "+a)};if(n.chamfer){var p=n.chamfer;v.vertices=l.chamfer(v.vertices,p.radius,p.quality,p.qualityMin,p.qualityMax),delete n.chamfer}return i.create(s.extend({},v,n))},e.trapezoid=function(f,r,t,a,n,v){v=v||{},n*=.5;var p=(1-n*2)*t,C=t*n,w=C+p,c=w+C,h;n<.5?h="L 0 0 L "+C+" "+-a+" L "+w+" "+-a+" L "+c+" 0":h="L 0 0 L "+w+" "+-a+" L "+c+" 0";var m={label:"Trapezoid Body",position:{x:f,y:r},vertices:l.fromPath(h)};if(v.chamfer){var d=v.chamfer;m.vertices=l.chamfer(m.vertices,d.radius,d.quality,d.qualityMin,d.qualityMax),delete v.chamfer}return i.create(s.extend({},m,v))},e.circle=function(f,r,t,a,n){a=a||{};var v={label:"Circle Body",circleRadius:t};n=n||25;var p=Math.ceil(Math.max(10,Math.min(n,t)));return p%2===1&&(p+=1),e.polygon(f,r,p,t,s.extend({},v,a))},e.polygon=function(f,r,t,a,n){if(n=n||{},t<3)return e.circle(f,r,a,n);for(var v=2*Math.PI/t,p="",C=v*.5,w=0;w<t;w+=1){var c=C+w*v,h=Math.cos(c)*a,m=Math.sin(c)*a;p+="L "+h.toFixed(3)+" "+m.toFixed(3)+" "}var d={label:"Polygon Body",position:{x:f,y:r},vertices:l.fromPath(p)};if(n.chamfer){var y=n.chamfer;d.vertices=l.chamfer(d.vertices,y.radius,y.quality,y.qualityMin,y.qualityMax),delete n.chamfer}return i.create(s.extend({},d,n))},e.fromVertices=function(f,r,t,a,n,v,p,C){var w=s.getDecomp(),c,h,m,d,y,S,P,x,A,T,L;for(c=Boolean(w&&w.quickDecomp),a=a||{},m=[],n=typeof n!="undefined"?n:!1,v=typeof v!="undefined"?v:.01,p=typeof p!="undefined"?p:10,C=typeof C!="undefined"?C:.01,s.isArray(t[0])||(t=[t]),T=0;T<t.length;T+=1)if(S=t[T],d=l.isConvex(S),y=!d,y&&!c&&s.warnOnce("Bodies.fromVertices: Install the 'poly-decomp' library and use Common.setDecomp or provide 'decomp' as a global to decompose concave vertices."),d||!c)d?S=l.clockwiseSort(S):S=l.hull(S),m.push({position:{x:f,y:r},vertices:S});else{var R=S.map(function(z){return[z.x,z.y]});w.makeCCW(R),v!==!1&&w.removeCollinearPoints(R,v),C!==!1&&w.removeDuplicatePoints&&w.removeDuplicatePoints(R,C);var F=w.quickDecomp(R);for(P=0;P<F.length;P++){var O=F[P],D=O.map(function(z){return{x:z[0],y:z[1]}});p>0&&l.area(D)<p||m.push({position:l.centre(D),vertices:D})}}for(P=0;P<m.length;P++)m[P]=i.create(s.extend(m[P],a));if(n){var k=5;for(P=0;P<m.length;P++){var H=m[P];for(x=P+1;x<m.length;x++){var W=m[x];if(u.overlaps(H.bounds,W.bounds)){var $=H.vertices,V=W.vertices;for(A=0;A<H.vertices.length;A++)for(L=0;L<W.vertices.length;L++){var Z=o.magnitudeSquared(o.sub($[(A+1)%$.length],V[L])),G=o.magnitudeSquared(o.sub($[A],V[(L+1)%V.length]));Z<k&&G<k&&($[A].isInternal=!0,V[L].isInternal=!0)}}}}}return m.length>1?(h=i.create(s.extend({parts:m.slice(0)},a)),i.setPosition(h,{x:f,y:r}),h):m[0]}})()},function(M,B,g){var e={};M.exports=e;var l=g(0);(function(){e.create=function(s){var i={};return s||l.log("Mouse.create: element was undefined, defaulting to document.body","warn"),i.element=s||document.body,i.absolute={x:0,y:0},i.position={x:0,y:0},i.mousedownPosition={x:0,y:0},i.mouseupPosition={x:0,y:0},i.offset={x:0,y:0},i.scale={x:1,y:1},i.wheelDelta=0,i.button=-1,i.pixelRatio=parseInt(i.element.getAttribute("data-pixel-ratio"),10)||1,i.sourceEvents={mousemove:null,mousedown:null,mouseup:null,mousewheel:null},i.mousemove=function(u){var o=e._getRelativeMousePosition(u,i.element,i.pixelRatio),f=u.changedTouches;f&&(i.button=0,u.preventDefault()),i.absolute.x=o.x,i.absolute.y=o.y,i.position.x=i.absolute.x*i.scale.x+i.offset.x,i.position.y=i.absolute.y*i.scale.y+i.offset.y,i.sourceEvents.mousemove=u},i.mousedown=function(u){var o=e._getRelativeMousePosition(u,i.element,i.pixelRatio),f=u.changedTouches;f?(i.button=0,u.preventDefault()):i.button=u.button,i.absolute.x=o.x,i.absolute.y=o.y,i.position.x=i.absolute.x*i.scale.x+i.offset.x,i.position.y=i.absolute.y*i.scale.y+i.offset.y,i.mousedownPosition.x=i.position.x,i.mousedownPosition.y=i.position.y,i.sourceEvents.mousedown=u},i.mouseup=function(u){var o=e._getRelativeMousePosition(u,i.element,i.pixelRatio),f=u.changedTouches;f&&u.preventDefault(),i.button=-1,i.absolute.x=o.x,i.absolute.y=o.y,i.position.x=i.absolute.x*i.scale.x+i.offset.x,i.position.y=i.absolute.y*i.scale.y+i.offset.y,i.mouseupPosition.x=i.position.x,i.mouseupPosition.y=i.position.y,i.sourceEvents.mouseup=u},i.mousewheel=function(u){i.wheelDelta=Math.max(-1,Math.min(1,u.wheelDelta||-u.detail)),u.preventDefault()},e.setElement(i,i.element),i},e.setElement=function(s,i){s.element=i,i.addEventListener("mousemove",s.mousemove),i.addEventListener("mousedown",s.mousedown),i.addEventListener("mouseup",s.mouseup),i.addEventListener("mousewheel",s.mousewheel),i.addEventListener("DOMMouseScroll",s.mousewheel),i.addEventListener("touchmove",s.mousemove),i.addEventListener("touchstart",s.mousedown),i.addEventListener("touchend",s.mouseup)},e.clearSourceEvents=function(s){s.sourceEvents.mousemove=null,s.sourceEvents.mousedown=null,s.sourceEvents.mouseup=null,s.sourceEvents.mousewheel=null,s.wheelDelta=0},e.setOffset=function(s,i){s.offset.x=i.x,s.offset.y=i.y,s.position.x=s.absolute.x*s.scale.x+s.offset.x,s.position.y=s.absolute.y*s.scale.y+s.offset.y},e.setScale=function(s,i){s.scale.x=i.x,s.scale.y=i.y,s.position.x=s.absolute.x*s.scale.x+s.offset.x,s.position.y=s.absolute.y*s.scale.y+s.offset.y},e._getRelativeMousePosition=function(s,i,u){var o=i.getBoundingClientRect(),f=document.documentElement||document.body.parentNode||document.body,r=window.pageXOffset!==void 0?window.pageXOffset:f.scrollLeft,t=window.pageYOffset!==void 0?window.pageYOffset:f.scrollTop,a=s.changedTouches,n,v;return a?(n=a[0].pageX-o.left-r,v=a[0].pageY-o.top-t):(n=s.pageX-o.left-r,v=s.pageY-o.top-t),{x:n/(i.clientWidth/(i.width||i.clientWidth)*u),y:v/(i.clientHeight/(i.height||i.clientHeight)*u)}}})()},function(M,B,g){var e={};M.exports=e;var l=g(0),s=g(8);(function(){e.create=function(i){var u={bodies:[],pairs:null};return l.extend(u,i)},e.setBodies=function(i,u){i.bodies=u.slice(0)},e.clear=function(i){i.bodies=[]},e.collisions=function(i){var u=[],o=i.pairs,f=i.bodies,r=f.length,t=e.canCollide,a=s.collides,n,v;for(f.sort(e._compareBoundsX),n=0;n<r;n++){var p=f[n],C=p.bounds,w=p.bounds.max.x,c=p.bounds.max.y,h=p.bounds.min.y,m=p.isStatic||p.isSleeping,d=p.parts.length,y=d===1;for(v=n+1;v<r;v++){var S=f[v],P=S.bounds;if(P.min.x>w)break;if(!(c<P.min.y||h>P.max.y)&&!(m&&(S.isStatic||S.isSleeping))&&!!t(p.collisionFilter,S.collisionFilter)){var x=S.parts.length;if(y&&x===1){var A=a(p,S,o);A&&u.push(A)}else for(var T=d>1?1:0,L=x>1?1:0,R=T;R<d;R++)for(var F=p.parts[R],C=F.bounds,O=L;O<x;O++){var D=S.parts[O],P=D.bounds;if(!(C.min.x>P.max.x||C.max.x<P.min.x||C.max.y<P.min.y||C.min.y>P.max.y)){var A=a(F,D,o);A&&u.push(A)}}}}}return u},e.canCollide=function(i,u){return i.group===u.group&&i.group!==0?i.group>0:(i.mask&u.category)!==0&&(u.mask&i.category)!==0},e._compareBoundsX=function(i,u){return i.bounds.min.x-u.bounds.min.x}})()},function(M,B,g){var e={};M.exports=e;var l=g(0);(function(){e._registry={},e.register=function(s){if(e.isPlugin(s)||l.warn("Plugin.register:",e.toString(s),"does not implement all required fields."),s.name in e._registry){var i=e._registry[s.name],u=e.versionParse(s.version).number,o=e.versionParse(i.version).number;u>o?(l.warn("Plugin.register:",e.toString(i),"was upgraded to",e.toString(s)),e._registry[s.name]=s):u<o?l.warn("Plugin.register:",e.toString(i),"can not be downgraded to",e.toString(s)):s!==i&&l.warn("Plugin.register:",e.toString(s),"is already registered to different plugin object")}else e._registry[s.name]=s;return s},e.resolve=function(s){return e._registry[e.dependencyParse(s).name]},e.toString=function(s){return typeof s=="string"?s:(s.name||"anonymous")+"@"+(s.version||s.range||"0.0.0")},e.isPlugin=function(s){return s&&s.name&&s.version&&s.install},e.isUsed=function(s,i){return s.used.indexOf(i)>-1},e.isFor=function(s,i){var u=s.for&&e.dependencyParse(s.for);return!s.for||i.name===u.name&&e.versionSatisfies(i.version,u.range)},e.use=function(s,i){if(s.uses=(s.uses||[]).concat(i||[]),s.uses.length===0){l.warn("Plugin.use:",e.toString(s),"does not specify any dependencies to install.");return}for(var u=e.dependencies(s),o=l.topologicalSort(u),f=[],r=0;r<o.length;r+=1)if(o[r]!==s.name){var t=e.resolve(o[r]);if(!t){f.push("\u274C "+o[r]);continue}e.isUsed(s,t.name)||(e.isFor(t,s)||(l.warn("Plugin.use:",e.toString(t),"is for",t.for,"but installed on",e.toString(s)+"."),t._warned=!0),t.install?t.install(s):(l.warn("Plugin.use:",e.toString(t),"does not specify an install function."),t._warned=!0),t._warned?(f.push("\u{1F536} "+e.toString(t)),delete t._warned):f.push("\u2705 "+e.toString(t)),s.used.push(t.name))}f.length>0&&l.info(f.join("  "))},e.dependencies=function(s,i){var u=e.dependencyParse(s),o=u.name;if(i=i||{},!(o in i)){s=e.resolve(s)||s,i[o]=l.map(s.uses||[],function(r){e.isPlugin(r)&&e.register(r);var t=e.dependencyParse(r),a=e.resolve(r);return a&&!e.versionSatisfies(a.version,t.range)?(l.warn("Plugin.dependencies:",e.toString(a),"does not satisfy",e.toString(t),"used by",e.toString(u)+"."),a._warned=!0,s._warned=!0):a||(l.warn("Plugin.dependencies:",e.toString(r),"used by",e.toString(u),"could not be resolved."),s._warned=!0),t.name});for(var f=0;f<i[o].length;f+=1)e.dependencies(i[o][f],i);return i}},e.dependencyParse=function(s){if(l.isString(s)){var i=/^[\w-]+(@(\*|[\^~]?\d+\.\d+\.\d+(-[0-9A-Za-z-+]+)?))?$/;return i.test(s)||l.warn("Plugin.dependencyParse:",s,"is not a valid dependency string."),{name:s.split("@")[0],range:s.split("@")[1]||"*"}}return{name:s.name,range:s.range||s.version}},e.versionParse=function(s){var i=/^(\*)|(\^|~|>=|>)?\s*((\d+)\.(\d+)\.(\d+))(-[0-9A-Za-z-+]+)?$/;i.test(s)||l.warn("Plugin.versionParse:",s,"is not a valid version or range.");var u=i.exec(s),o=Number(u[4]),f=Number(u[5]),r=Number(u[6]);return{isRange:Boolean(u[1]||u[2]),version:u[3],range:s,operator:u[1]||u[2]||"",major:o,minor:f,patch:r,parts:[o,f,r],prerelease:u[7],number:o*1e8+f*1e4+r}},e.versionSatisfies=function(s,i){i=i||"*";var u=e.versionParse(i),o=e.versionParse(s);if(u.isRange){if(u.operator==="*"||s==="*")return!0;if(u.operator===">")return o.number>u.number;if(u.operator===">=")return o.number>=u.number;if(u.operator==="~")return o.major===u.major&&o.minor===u.minor&&o.patch>=u.patch;if(u.operator==="^")return u.major>0?o.major===u.major&&o.number>=u.number:u.minor>0?o.minor===u.minor&&o.patch>=u.patch:o.patch===u.patch}return s===i||s==="*"}})()},function(M,B,g){var e={};M.exports=e;var l=g(0),s=g(5),i=g(1),u=g(4),o=g(2),f=g(13);(function(){var r,t;typeof window!="undefined"&&(r=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||function(c){window.setTimeout(function(){c(l.now())},1e3/60)},t=window.cancelAnimationFrame||window.mozCancelAnimationFrame||window.webkitCancelAnimationFrame||window.msCancelAnimationFrame),e._goodFps=30,e._goodDelta=1e3/60,e.create=function(c){var h={controller:e,engine:null,element:null,canvas:null,mouse:null,frameRequestId:null,timing:{historySize:60,delta:0,deltaHistory:[],lastTime:0,lastTimestamp:0,lastElapsed:0,timestampElapsed:0,timestampElapsedHistory:[],engineDeltaHistory:[],engineElapsedHistory:[],elapsedHistory:[]},options:{width:800,height:600,pixelRatio:1,background:"#14151f",wireframeBackground:"#14151f",hasBounds:!!c.bounds,enabled:!0,wireframes:!0,showSleeping:!0,showDebug:!1,showStats:!1,showPerformance:!1,showBounds:!1,showVelocity:!1,showCollisions:!1,showSeparations:!1,showAxes:!1,showPositions:!1,showAngleIndicator:!1,showIds:!1,showVertexNumbers:!1,showConvexHulls:!1,showInternalEdges:!1,showMousePosition:!1}},m=l.extend(h,c);return m.canvas&&(m.canvas.width=m.options.width||m.canvas.width,m.canvas.height=m.options.height||m.canvas.height),m.mouse=c.mouse,m.engine=c.engine,m.canvas=m.canvas||v(m.options.width,m.options.height),m.context=m.canvas.getContext("2d"),m.textures={},m.bounds=m.bounds||{min:{x:0,y:0},max:{x:m.canvas.width,y:m.canvas.height}},m.options.showBroadphase=!1,m.options.pixelRatio!==1&&e.setPixelRatio(m,m.options.pixelRatio),l.isElement(m.element)?m.element.appendChild(m.canvas):m.canvas.parentNode||l.log("Render.create: options.element was undefined, render.canvas was created but not appended","warn"),m},e.run=function(c){(function h(m){c.frameRequestId=r(h),a(c,m),e.world(c,m),(c.options.showStats||c.options.showDebug)&&e.stats(c,c.context,m),(c.options.showPerformance||c.options.showDebug)&&e.performance(c,c.context,m)})()},e.stop=function(c){t(c.frameRequestId)},e.setPixelRatio=function(c,h){var m=c.options,d=c.canvas;h==="auto"&&(h=p(d)),m.pixelRatio=h,d.setAttribute("data-pixel-ratio",h),d.width=m.width*h,d.height=m.height*h,d.style.width=m.width+"px",d.style.height=m.height+"px"},e.lookAt=function(c,h,m,d){d=typeof d!="undefined"?d:!0,h=l.isArray(h)?h:[h],m=m||{x:0,y:0};for(var y={min:{x:1/0,y:1/0},max:{x:-1/0,y:-1/0}},S=0;S<h.length;S+=1){var P=h[S],x=P.bounds?P.bounds.min:P.min||P.position||P,A=P.bounds?P.bounds.max:P.max||P.position||P;x&&A&&(x.x<y.min.x&&(y.min.x=x.x),A.x>y.max.x&&(y.max.x=A.x),x.y<y.min.y&&(y.min.y=x.y),A.y>y.max.y&&(y.max.y=A.y))}var T=y.max.x-y.min.x+2*m.x,L=y.max.y-y.min.y+2*m.y,R=c.canvas.height,F=c.canvas.width,O=F/R,D=T/L,k=1,H=1;D>O?H=D/O:k=O/D,c.options.hasBounds=!0,c.bounds.min.x=y.min.x,c.bounds.max.x=y.min.x+T*k,c.bounds.min.y=y.min.y,c.bounds.max.y=y.min.y+L*H,d&&(c.bounds.min.x+=T*.5-T*k*.5,c.bounds.max.x+=T*.5-T*k*.5,c.bounds.min.y+=L*.5-L*H*.5,c.bounds.max.y+=L*.5-L*H*.5),c.bounds.min.x-=m.x,c.bounds.max.x-=m.x,c.bounds.min.y-=m.y,c.bounds.max.y-=m.y,c.mouse&&(f.setScale(c.mouse,{x:(c.bounds.max.x-c.bounds.min.x)/c.canvas.width,y:(c.bounds.max.y-c.bounds.min.y)/c.canvas.height}),f.setOffset(c.mouse,c.bounds.min))},e.startViewTransform=function(c){var h=c.bounds.max.x-c.bounds.min.x,m=c.bounds.max.y-c.bounds.min.y,d=h/c.options.width,y=m/c.options.height;c.context.setTransform(c.options.pixelRatio/d,0,0,c.options.pixelRatio/y,0,0),c.context.translate(-c.bounds.min.x,-c.bounds.min.y)},e.endViewTransform=function(c){c.context.setTransform(c.options.pixelRatio,0,0,c.options.pixelRatio,0,0)},e.world=function(c,h){var m=l.now(),d=c.engine,y=d.world,S=c.canvas,P=c.context,x=c.options,A=c.timing,T=s.allBodies(y),L=s.allConstraints(y),R=x.wireframes?x.wireframeBackground:x.background,F=[],O=[],D,k={timestamp:d.timing.timestamp};if(u.trigger(c,"beforeRender",k),c.currentBackground!==R&&w(c,R),P.globalCompositeOperation="source-in",P.fillStyle="transparent",P.fillRect(0,0,S.width,S.height),P.globalCompositeOperation="source-over",x.hasBounds){for(D=0;D<T.length;D++){var H=T[D];i.overlaps(H.bounds,c.bounds)&&F.push(H)}for(D=0;D<L.length;D++){var W=L[D],$=W.bodyA,V=W.bodyB,Z=W.pointA,G=W.pointB;$&&(Z=o.add($.position,W.pointA)),V&&(G=o.add(V.position,W.pointB)),!(!Z||!G)&&(i.contains(c.bounds,Z)||i.contains(c.bounds,G))&&O.push(W)}e.startViewTransform(c),c.mouse&&(f.setScale(c.mouse,{x:(c.bounds.max.x-c.bounds.min.x)/c.options.width,y:(c.bounds.max.y-c.bounds.min.y)/c.options.height}),f.setOffset(c.mouse,c.bounds.min))}else O=L,F=T,c.options.pixelRatio!==1&&c.context.setTransform(c.options.pixelRatio,0,0,c.options.pixelRatio,0,0);!x.wireframes||d.enableSleeping&&x.showSleeping?e.bodies(c,F,P):(x.showConvexHulls&&e.bodyConvexHulls(c,F,P),e.bodyWireframes(c,F,P)),x.showBounds&&e.bodyBounds(c,F,P),(x.showAxes||x.showAngleIndicator)&&e.bodyAxes(c,F,P),x.showPositions&&e.bodyPositions(c,F,P),x.showVelocity&&e.bodyVelocity(c,F,P),x.showIds&&e.bodyIds(c,F,P),x.showSeparations&&e.separations(c,d.pairs.list,P),x.showCollisions&&e.collisions(c,d.pairs.list,P),x.showVertexNumbers&&e.vertexNumbers(c,F,P),x.showMousePosition&&e.mousePosition(c,c.mouse,P),e.constraints(O,P),x.hasBounds&&e.endViewTransform(c),u.trigger(c,"afterRender",k),A.lastElapsed=l.now()-m},e.stats=function(c,h,m){for(var d=c.engine,y=d.world,S=s.allBodies(y),P=0,x=55,A=44,T=0,L=0,R=0;R<S.length;R+=1)P+=S[R].parts.length;var F={Part:P,Body:S.length,Cons:s.allConstraints(y).length,Comp:s.allComposites(y).length,Pair:d.pairs.list.length};h.fillStyle="#0e0f19",h.fillRect(T,L,x*5.5,A),h.font="12px Arial",h.textBaseline="top",h.textAlign="right";for(var O in F){var D=F[O];h.fillStyle="#aaa",h.fillText(O,T+x,L+8),h.fillStyle="#eee",h.fillText(D,T+x,L+26),T+=x}},e.performance=function(c,h){var m=c.engine,d=c.timing,y=d.deltaHistory,S=d.elapsedHistory,P=d.timestampElapsedHistory,x=d.engineDeltaHistory,A=d.engineElapsedHistory,T=m.timing.lastDelta,L=n(y),R=n(S),F=n(x),O=n(A),D=n(P),k=D/L||0,H=1e3/L||0,W=4,$=12,V=60,Z=34,G=10,z=69;h.fillStyle="#0e0f19",h.fillRect(0,50,$*4+V*5+22,Z),e.status(h,G,z,V,W,y.length,Math.round(H)+" fps",H/e._goodFps,function(U){return y[U]/L-1}),e.status(h,G+$+V,z,V,W,x.length,T.toFixed(2)+" dt",e._goodDelta/T,function(U){return x[U]/F-1}),e.status(h,G+($+V)*2,z,V,W,A.length,O.toFixed(2)+" ut",1-O/e._goodFps,function(U){return A[U]/O-1}),e.status(h,G+($+V)*3,z,V,W,S.length,R.toFixed(2)+" rt",1-R/e._goodFps,function(U){return S[U]/R-1}),e.status(h,G+($+V)*4,z,V,W,P.length,k.toFixed(2)+" x",k*k*k,function(U){return(P[U]/y[U]/k||0)-1})},e.status=function(c,h,m,d,y,S,P,x,A){c.strokeStyle="#888",c.fillStyle="#444",c.lineWidth=1,c.fillRect(h,m+7,d,1),c.beginPath(),c.moveTo(h,m+7-y*l.clamp(.4*A(0),-2,2));for(var T=0;T<d;T+=1)c.lineTo(h+T,m+7-(T<S?y*l.clamp(.4*A(T),-2,2):0));c.stroke(),c.fillStyle="hsl("+l.clamp(25+95*x,0,120)+",100%,60%)",c.fillRect(h,m-7,4,4),c.font="12px Arial",c.textBaseline="middle",c.textAlign="right",c.fillStyle="#eee",c.fillText(P,h+d,m-5)},e.constraints=function(c,h){for(var m=h,d=0;d<c.length;d++){var y=c[d];if(!(!y.render.visible||!y.pointA||!y.pointB)){var S=y.bodyA,P=y.bodyB,x,A;if(S?x=o.add(S.position,y.pointA):x=y.pointA,y.render.type==="pin")m.beginPath(),m.arc(x.x,x.y,3,0,2*Math.PI),m.closePath();else{if(P?A=o.add(P.position,y.pointB):A=y.pointB,m.beginPath(),m.moveTo(x.x,x.y),y.render.type==="spring")for(var T=o.sub(A,x),L=o.perp(o.normalise(T)),R=Math.ceil(l.clamp(y.length/5,12,20)),F,O=1;O<R;O+=1)F=O%2===0?1:-1,m.lineTo(x.x+T.x*(O/R)+L.x*F*4,x.y+T.y*(O/R)+L.y*F*4);m.lineTo(A.x,A.y)}y.render.lineWidth&&(m.lineWidth=y.render.lineWidth,m.strokeStyle=y.render.strokeStyle,m.stroke()),y.render.anchors&&(m.fillStyle=y.render.strokeStyle,m.beginPath(),m.arc(x.x,x.y,3,0,2*Math.PI),m.arc(A.x,A.y,3,0,2*Math.PI),m.closePath(),m.fill())}}},e.bodies=function(c,h,m){var d=m;c.engine;var y=c.options,S=y.showInternalEdges||!y.wireframes,P,x,A,T;for(A=0;A<h.length;A++)if(P=h[A],!!P.render.visible){for(T=P.parts.length>1?1:0;T<P.parts.length;T++)if(x=P.parts[T],!!x.render.visible){if(y.showSleeping&&P.isSleeping?d.globalAlpha=.5*x.render.opacity:x.render.opacity!==1&&(d.globalAlpha=x.render.opacity),x.render.sprite&&x.render.sprite.texture&&!y.wireframes){var L=x.render.sprite,R=C(c,L.texture);d.translate(x.position.x,x.position.y),d.rotate(x.angle),d.drawImage(R,R.width*-L.xOffset*L.xScale,R.height*-L.yOffset*L.yScale,R.width*L.xScale,R.height*L.yScale),d.rotate(-x.angle),d.translate(-x.position.x,-x.position.y)}else{if(x.circleRadius)d.beginPath(),d.arc(x.position.x,x.position.y,x.circleRadius,0,2*Math.PI);else{d.beginPath(),d.moveTo(x.vertices[0].x,x.vertices[0].y);for(var F=1;F<x.vertices.length;F++)!x.vertices[F-1].isInternal||S?d.lineTo(x.vertices[F].x,x.vertices[F].y):d.moveTo(x.vertices[F].x,x.vertices[F].y),x.vertices[F].isInternal&&!S&&d.moveTo(x.vertices[(F+1)%x.vertices.length].x,x.vertices[(F+1)%x.vertices.length].y);d.lineTo(x.vertices[0].x,x.vertices[0].y),d.closePath()}y.wireframes?(d.lineWidth=1,d.strokeStyle="#bbb",d.stroke()):(d.fillStyle=x.render.fillStyle,x.render.lineWidth&&(d.lineWidth=x.render.lineWidth,d.strokeStyle=x.render.strokeStyle,d.stroke()),d.fill())}d.globalAlpha=1}}},e.bodyWireframes=function(c,h,m){var d=m,y=c.options.showInternalEdges,S,P,x,A,T;for(d.beginPath(),x=0;x<h.length;x++)if(S=h[x],!!S.render.visible)for(T=S.parts.length>1?1:0;T<S.parts.length;T++){for(P=S.parts[T],d.moveTo(P.vertices[0].x,P.vertices[0].y),A=1;A<P.vertices.length;A++)!P.vertices[A-1].isInternal||y?d.lineTo(P.vertices[A].x,P.vertices[A].y):d.moveTo(P.vertices[A].x,P.vertices[A].y),P.vertices[A].isInternal&&!y&&d.moveTo(P.vertices[(A+1)%P.vertices.length].x,P.vertices[(A+1)%P.vertices.length].y);d.lineTo(P.vertices[0].x,P.vertices[0].y)}d.lineWidth=1,d.strokeStyle="#bbb",d.stroke()},e.bodyConvexHulls=function(c,h,m){var d=m,y,S,P;for(d.beginPath(),S=0;S<h.length;S++)if(y=h[S],!(!y.render.visible||y.parts.length===1)){for(d.moveTo(y.vertices[0].x,y.vertices[0].y),P=1;P<y.vertices.length;P++)d.lineTo(y.vertices[P].x,y.vertices[P].y);d.lineTo(y.vertices[0].x,y.vertices[0].y)}d.lineWidth=1,d.strokeStyle="rgba(255,255,255,0.2)",d.stroke()},e.vertexNumbers=function(c,h,m){var d=m,y,S,P;for(y=0;y<h.length;y++){var x=h[y].parts;for(P=x.length>1?1:0;P<x.length;P++){var A=x[P];for(S=0;S<A.vertices.length;S++)d.fillStyle="rgba(255,255,255,0.2)",d.fillText(y+"_"+S,A.position.x+(A.vertices[S].x-A.position.x)*.8,A.position.y+(A.vertices[S].y-A.position.y)*.8)}}},e.mousePosition=function(c,h,m){var d=m;d.fillStyle="rgba(255,255,255,0.8)",d.fillText(h.position.x+"  "+h.position.y,h.position.x+5,h.position.y-5)},e.bodyBounds=function(c,h,m){var d=m;c.engine;var y=c.options;d.beginPath();for(var S=0;S<h.length;S++){var P=h[S];if(P.render.visible)for(var x=h[S].parts,A=x.length>1?1:0;A<x.length;A++){var T=x[A];d.rect(T.bounds.min.x,T.bounds.min.y,T.bounds.max.x-T.bounds.min.x,T.bounds.max.y-T.bounds.min.y)}}y.wireframes?d.strokeStyle="rgba(255,255,255,0.08)":d.strokeStyle="rgba(0,0,0,0.1)",d.lineWidth=1,d.stroke()},e.bodyAxes=function(c,h,m){var d=m;c.engine;var y=c.options,S,P,x,A;for(d.beginPath(),P=0;P<h.length;P++){var T=h[P],L=T.parts;if(!!T.render.visible)if(y.showAxes)for(x=L.length>1?1:0;x<L.length;x++)for(S=L[x],A=0;A<S.axes.length;A++){var R=S.axes[A];d.moveTo(S.position.x,S.position.y),d.lineTo(S.position.x+R.x*20,S.position.y+R.y*20)}else for(x=L.length>1?1:0;x<L.length;x++)for(S=L[x],A=0;A<S.axes.length;A++)d.moveTo(S.position.x,S.position.y),d.lineTo((S.vertices[0].x+S.vertices[S.vertices.length-1].x)/2,(S.vertices[0].y+S.vertices[S.vertices.length-1].y)/2)}y.wireframes?(d.strokeStyle="indianred",d.lineWidth=1):(d.strokeStyle="rgba(255, 255, 255, 0.4)",d.globalCompositeOperation="overlay",d.lineWidth=2),d.stroke(),d.globalCompositeOperation="source-over"},e.bodyPositions=function(c,h,m){var d=m;c.engine;var y=c.options,S,P,x,A;for(d.beginPath(),x=0;x<h.length;x++)if(S=h[x],!!S.render.visible)for(A=0;A<S.parts.length;A++)P=S.parts[A],d.arc(P.position.x,P.position.y,3,0,2*Math.PI,!1),d.closePath();for(y.wireframes?d.fillStyle="indianred":d.fillStyle="rgba(0,0,0,0.5)",d.fill(),d.beginPath(),x=0;x<h.length;x++)S=h[x],S.render.visible&&(d.arc(S.positionPrev.x,S.positionPrev.y,2,0,2*Math.PI,!1),d.closePath());d.fillStyle="rgba(255,165,0,0.8)",d.fill()},e.bodyVelocity=function(c,h,m){var d=m;d.beginPath();for(var y=0;y<h.length;y++){var S=h[y];!S.render.visible||(d.moveTo(S.position.x,S.position.y),d.lineTo(S.position.x+(S.position.x-S.positionPrev.x)*2,S.position.y+(S.position.y-S.positionPrev.y)*2))}d.lineWidth=3,d.strokeStyle="cornflowerblue",d.stroke()},e.bodyIds=function(c,h,m){var d=m,y,S;for(y=0;y<h.length;y++)if(!!h[y].render.visible){var P=h[y].parts;for(S=P.length>1?1:0;S<P.length;S++){var x=P[S];d.font="12px Arial",d.fillStyle="rgba(255,255,255,0.5)",d.fillText(x.id,x.position.x+10,x.position.y-10)}}},e.collisions=function(c,h,m){var d=m,y=c.options,S,P,x,A;for(d.beginPath(),x=0;x<h.length;x++)if(S=h[x],!!S.isActive)for(P=S.collision,A=0;A<S.activeContacts.length;A++){var T=S.activeContacts[A],L=T.vertex;d.rect(L.x-1.5,L.y-1.5,3.5,3.5)}for(y.wireframes?d.fillStyle="rgba(255,255,255,0.7)":d.fillStyle="orange",d.fill(),d.beginPath(),x=0;x<h.length;x++)if(S=h[x],!!S.isActive&&(P=S.collision,S.activeContacts.length>0)){var R=S.activeContacts[0].vertex.x,F=S.activeContacts[0].vertex.y;S.activeContacts.length===2&&(R=(S.activeContacts[0].vertex.x+S.activeContacts[1].vertex.x)/2,F=(S.activeContacts[0].vertex.y+S.activeContacts[1].vertex.y)/2),P.bodyB===P.supports[0].body||P.bodyA.isStatic===!0?d.moveTo(R-P.normal.x*8,F-P.normal.y*8):d.moveTo(R+P.normal.x*8,F+P.normal.y*8),d.lineTo(R,F)}y.wireframes?d.strokeStyle="rgba(255,165,0,0.7)":d.strokeStyle="orange",d.lineWidth=1,d.stroke()},e.separations=function(c,h,m){var d=m,y=c.options,S,P,x,A,T;for(d.beginPath(),T=0;T<h.length;T++)if(S=h[T],!!S.isActive){P=S.collision,x=P.bodyA,A=P.bodyB;var L=1;!A.isStatic&&!x.isStatic&&(L=.5),A.isStatic&&(L=0),d.moveTo(A.position.x,A.position.y),d.lineTo(A.position.x-P.penetration.x*L,A.position.y-P.penetration.y*L),L=1,!A.isStatic&&!x.isStatic&&(L=.5),x.isStatic&&(L=0),d.moveTo(x.position.x,x.position.y),d.lineTo(x.position.x+P.penetration.x*L,x.position.y+P.penetration.y*L)}y.wireframes?d.strokeStyle="rgba(255,165,0,0.5)":d.strokeStyle="orange",d.stroke()},e.inspector=function(c,h){c.engine;var m=c.selected,d=c.render,y=d.options,S;if(y.hasBounds){var P=d.bounds.max.x-d.bounds.min.x,x=d.bounds.max.y-d.bounds.min.y,A=P/d.options.width,T=x/d.options.height;h.scale(1/A,1/T),h.translate(-d.bounds.min.x,-d.bounds.min.y)}for(var L=0;L<m.length;L++){var R=m[L].data;switch(h.translate(.5,.5),h.lineWidth=1,h.strokeStyle="rgba(255,165,0,0.9)",h.setLineDash([1,2]),R.type){case"body":S=R.bounds,h.beginPath(),h.rect(Math.floor(S.min.x-3),Math.floor(S.min.y-3),Math.floor(S.max.x-S.min.x+6),Math.floor(S.max.y-S.min.y+6)),h.closePath(),h.stroke();break;case"constraint":var F=R.pointA;R.bodyA&&(F=R.pointB),h.beginPath(),h.arc(F.x,F.y,10,0,2*Math.PI),h.closePath(),h.stroke();break}h.setLineDash([]),h.translate(-.5,-.5)}c.selectStart!==null&&(h.translate(.5,.5),h.lineWidth=1,h.strokeStyle="rgba(255,165,0,0.6)",h.fillStyle="rgba(255,165,0,0.1)",S=c.selectBounds,h.beginPath(),h.rect(Math.floor(S.min.x),Math.floor(S.min.y),Math.floor(S.max.x-S.min.x),Math.floor(S.max.y-S.min.y)),h.closePath(),h.stroke(),h.fill(),h.translate(-.5,-.5)),y.hasBounds&&h.setTransform(1,0,0,1,0,0)};var a=function(c,h){var m=c.engine,d=c.timing,y=d.historySize,S=m.timing.timestamp;d.delta=h-d.lastTime||e._goodDelta,d.lastTime=h,d.timestampElapsed=S-d.lastTimestamp||0,d.lastTimestamp=S,d.deltaHistory.unshift(d.delta),d.deltaHistory.length=Math.min(d.deltaHistory.length,y),d.engineDeltaHistory.unshift(m.timing.lastDelta),d.engineDeltaHistory.length=Math.min(d.engineDeltaHistory.length,y),d.timestampElapsedHistory.unshift(d.timestampElapsed),d.timestampElapsedHistory.length=Math.min(d.timestampElapsedHistory.length,y),d.engineElapsedHistory.unshift(m.timing.lastElapsed),d.engineElapsedHistory.length=Math.min(d.engineElapsedHistory.length,y),d.elapsedHistory.unshift(d.lastElapsed),d.elapsedHistory.length=Math.min(d.elapsedHistory.length,y)},n=function(c){for(var h=0,m=0;m<c.length;m+=1)h+=c[m];return h/c.length||0},v=function(c,h){var m=document.createElement("canvas");return m.width=c,m.height=h,m.oncontextmenu=function(){return!1},m.onselectstart=function(){return!1},m},p=function(c){var h=c.getContext("2d"),m=window.devicePixelRatio||1,d=h.webkitBackingStorePixelRatio||h.mozBackingStorePixelRatio||h.msBackingStorePixelRatio||h.oBackingStorePixelRatio||h.backingStorePixelRatio||1;return m/d},C=function(c,h){var m=c.textures[h];return m||(m=c.textures[h]=new Image,m.src=h,m)},w=function(c,h){var m=h;/(jpg|gif|png)$/.test(h)&&(m="url("+h+")"),c.canvas.style.background=m,c.canvas.style.backgroundSize="contain",c.currentBackground=h}})()},function(M,B){var g={};M.exports=g,function(){g.create=function(e){return{vertex:e,normalImpulse:0,tangentImpulse:0}}}()},function(M,B,g){var e={};M.exports=e;var l=g(7),s=g(19),i=g(14),u=g(20),o=g(4),f=g(5),r=g(10),t=g(0),a=g(6);(function(){e.create=function(n){n=n||{};var v={positionIterations:6,velocityIterations:4,constraintIterations:2,enableSleeping:!1,events:[],plugin:{},gravity:{x:0,y:1,scale:.001},timing:{timestamp:0,timeScale:1,lastDelta:0,lastElapsed:0}},p=t.extend(v,n);return p.world=n.world||f.create({label:"World"}),p.pairs=n.pairs||u.create(),p.detector=n.detector||i.create(),p.grid={buckets:[]},p.world.gravity=p.gravity,p.broadphase=p.grid,p.metrics={},p},e.update=function(n,v,p){var C=t.now();v=v||1e3/60,p=p||1;var w=n.world,c=n.detector,h=n.pairs,m=n.timing,d=m.timestamp,y;m.timestamp+=v*m.timeScale,m.lastDelta=v*m.timeScale;var S={timestamp:m.timestamp};o.trigger(n,"beforeUpdate",S);var P=f.allBodies(w),x=f.allConstraints(w);for(w.isModified&&i.setBodies(c,P),w.isModified&&f.setModified(w,!1,!1,!0),n.enableSleeping&&l.update(P,m.timeScale),e._bodiesApplyGravity(P,n.gravity),e._bodiesUpdate(P,v,m.timeScale,p,w.bounds),r.preSolveAll(P),y=0;y<n.constraintIterations;y++)r.solveAll(x,m.timeScale);r.postSolveAll(P),c.pairs=n.pairs;var A=i.collisions(c);for(u.update(h,A,d),n.enableSleeping&&l.afterCollisions(h.list,m.timeScale),h.collisionStart.length>0&&o.trigger(n,"collisionStart",{pairs:h.collisionStart}),s.preSolvePosition(h.list),y=0;y<n.positionIterations;y++)s.solvePosition(h.list,m.timeScale);for(s.postSolvePosition(P),r.preSolveAll(P),y=0;y<n.constraintIterations;y++)r.solveAll(x,m.timeScale);for(r.postSolveAll(P),s.preSolveVelocity(h.list),y=0;y<n.velocityIterations;y++)s.solveVelocity(h.list,m.timeScale);return h.collisionActive.length>0&&o.trigger(n,"collisionActive",{pairs:h.collisionActive}),h.collisionEnd.length>0&&o.trigger(n,"collisionEnd",{pairs:h.collisionEnd}),e._bodiesClearForces(P),o.trigger(n,"afterUpdate",S),n.timing.lastElapsed=t.now()-C,n},e.merge=function(n,v){if(t.extend(n,v),v.world){n.world=v.world,e.clear(n);for(var p=f.allBodies(n.world),C=0;C<p.length;C++){var w=p[C];l.set(w,!1),w.id=t.nextId()}}},e.clear=function(n){u.clear(n.pairs),i.clear(n.detector)},e._bodiesClearForces=function(n){for(var v=0;v<n.length;v++){var p=n[v];p.force.x=0,p.force.y=0,p.torque=0}},e._bodiesApplyGravity=function(n,v){var p=typeof v.scale!="undefined"?v.scale:.001;if(!(v.x===0&&v.y===0||p===0))for(var C=0;C<n.length;C++){var w=n[C];w.isStatic||w.isSleeping||(w.force.y+=w.mass*v.y*p,w.force.x+=w.mass*v.x*p)}},e._bodiesUpdate=function(n,v,p,C,w){for(var c=0;c<n.length;c++){var h=n[c];h.isStatic||h.isSleeping||a.update(h,v,p,C)}}})()},function(M,B,g){var e={};M.exports=e;var l=g(3),s=g(1);(function(){e._restingThresh=4,e._restingThreshTangent=6,e._positionDampen=.9,e._positionWarming=.8,e._frictionNormalMultiplier=5,e.preSolvePosition=function(i){var u,o,f,r=i.length;for(u=0;u<r;u++)o=i[u],o.isActive&&(f=o.activeContacts.length,o.collision.parentA.totalContacts+=f,o.collision.parentB.totalContacts+=f)},e.solvePosition=function(i,u){var o,f,r,t,a,n,v,p,C=e._positionDampen,w=i.length;for(o=0;o<w;o++)f=i[o],!(!f.isActive||f.isSensor)&&(r=f.collision,t=r.parentA,a=r.parentB,n=r.normal,f.separation=n.x*(a.positionImpulse.x+r.penetration.x-t.positionImpulse.x)+n.y*(a.positionImpulse.y+r.penetration.y-t.positionImpulse.y));for(o=0;o<w;o++)f=i[o],!(!f.isActive||f.isSensor)&&(r=f.collision,t=r.parentA,a=r.parentB,n=r.normal,p=(f.separation-f.slop)*u,(t.isStatic||a.isStatic)&&(p*=2),t.isStatic||t.isSleeping||(v=C/t.totalContacts,t.positionImpulse.x+=n.x*p*v,t.positionImpulse.y+=n.y*p*v),a.isStatic||a.isSleeping||(v=C/a.totalContacts,a.positionImpulse.x-=n.x*p*v,a.positionImpulse.y-=n.y*p*v))},e.postSolvePosition=function(i){for(var u=e._positionWarming,o=i.length,f=l.translate,r=s.update,t=0;t<o;t++){var a=i[t],n=a.positionImpulse,v=n.x,p=n.y,C=a.velocity;if(a.totalContacts=0,v!==0||p!==0){for(var w=0;w<a.parts.length;w++){var c=a.parts[w];f(c.vertices,n),r(c.bounds,c.vertices,C),c.position.x+=v,c.position.y+=p}a.positionPrev.x+=v,a.positionPrev.y+=p,v*C.x+p*C.y<0?(n.x=0,n.y=0):(n.x*=u,n.y*=u)}}},e.preSolveVelocity=function(i){var u=i.length,o,f;for(o=0;o<u;o++){var r=i[o];if(!(!r.isActive||r.isSensor)){var t=r.activeContacts,a=t.length,n=r.collision,v=n.parentA,p=n.parentB,C=n.normal,w=n.tangent;for(f=0;f<a;f++){var c=t[f],h=c.vertex,m=c.normalImpulse,d=c.tangentImpulse;if(m!==0||d!==0){var y=C.x*m+w.x*d,S=C.y*m+w.y*d;v.isStatic||v.isSleeping||(v.positionPrev.x+=y*v.inverseMass,v.positionPrev.y+=S*v.inverseMass,v.anglePrev+=v.inverseInertia*((h.x-v.position.x)*S-(h.y-v.position.y)*y)),p.isStatic||p.isSleeping||(p.positionPrev.x-=y*p.inverseMass,p.positionPrev.y-=S*p.inverseMass,p.anglePrev-=p.inverseInertia*((h.x-p.position.x)*S-(h.y-p.position.y)*y))}}}}},e.solveVelocity=function(i,u){var o=u*u,f=e._restingThresh*o,r=e._frictionNormalMultiplier,t=e._restingThreshTangent*o,a=Number.MAX_VALUE,n=i.length,v,p,C,w;for(C=0;C<n;C++){var c=i[C];if(!(!c.isActive||c.isSensor)){var h=c.collision,m=h.parentA,d=h.parentB,y=m.velocity,S=d.velocity,P=h.normal.x,x=h.normal.y,A=h.tangent.x,T=h.tangent.y,L=c.activeContacts,R=L.length,F=1/R,O=m.inverseMass+d.inverseMass,D=c.friction*c.frictionStatic*r*o;for(y.x=m.position.x-m.positionPrev.x,y.y=m.position.y-m.positionPrev.y,S.x=d.position.x-d.positionPrev.x,S.y=d.position.y-d.positionPrev.y,m.angularVelocity=m.angle-m.anglePrev,d.angularVelocity=d.angle-d.anglePrev,w=0;w<R;w++){var k=L[w],H=k.vertex,W=H.x-m.position.x,$=H.y-m.position.y,V=H.x-d.position.x,Z=H.y-d.position.y,G=y.x-$*m.angularVelocity,z=y.y+W*m.angularVelocity,U=S.x-Z*d.angularVelocity,Je=S.y+V*d.angularVelocity,Te=G-U,Ee=z-Je,j=P*Te+x*Ee,J=A*Te+T*Ee,Be=c.separation+j,he=Math.min(Be,1);he=Be<0?0:he;var Le=he*D;J>Le||-J>Le?(p=J>0?J:-J,v=c.friction*(J>0?1:-1)*o,v<-p?v=-p:v>p&&(v=p)):(v=J,p=a);var Re=W*x-$*P,Fe=V*x-Z*P,Oe=F/(O+m.inverseInertia*Re*Re+d.inverseInertia*Fe*Fe),ne=(1+c.restitution)*j*Oe;if(v*=Oe,j*j>f&&j<0)k.normalImpulse=0;else{var Xe=k.normalImpulse;k.normalImpulse+=ne,k.normalImpulse=Math.min(k.normalImpulse,0),ne=k.normalImpulse-Xe}if(J*J>t)k.tangentImpulse=0;else{var Ye=k.tangentImpulse;k.tangentImpulse+=v,k.tangentImpulse<-p&&(k.tangentImpulse=-p),k.tangentImpulse>p&&(k.tangentImpulse=p),v=k.tangentImpulse-Ye}var ie=P*ne+A*v,re=x*ne+T*v;m.isStatic||m.isSleeping||(m.positionPrev.x+=ie*m.inverseMass,m.positionPrev.y+=re*m.inverseMass,m.anglePrev+=(W*re-$*ie)*m.inverseInertia),d.isStatic||d.isSleeping||(d.positionPrev.x-=ie*d.inverseMass,d.positionPrev.y-=re*d.inverseMass,d.anglePrev-=(V*re-Z*ie)*d.inverseInertia)}}}}})()},function(M,B,g){var e={};M.exports=e;var l=g(9),s=g(0);(function(){e.create=function(i){return s.extend({table:{},list:[],collisionStart:[],collisionActive:[],collisionEnd:[]},i)},e.update=function(i,u,o){var f=i.list,r=f.length,t=i.table,a=u.length,n=i.collisionStart,v=i.collisionEnd,p=i.collisionActive,C,w,c,h;for(n.length=0,v.length=0,p.length=0,h=0;h<r;h++)f[h].confirmedActive=!1;for(h=0;h<a;h++)C=u[h],c=C.pair,c?(c.isActive?p.push(c):n.push(c),l.update(c,C,o),c.confirmedActive=!0):(c=l.create(C,o),t[c.id]=c,n.push(c),f.push(c));var m=[];for(r=f.length,h=0;h<r;h++)c=f[h],c.confirmedActive||(l.setActive(c,!1,o),v.push(c),!c.collision.bodyA.isSleeping&&!c.collision.bodyB.isSleeping&&m.push(h));for(h=0;h<m.length;h++)w=m[h]-h,c=f[w],f.splice(w,1),delete t[c.id]},e.clear=function(i){return i.table={},i.list.length=0,i.collisionStart.length=0,i.collisionActive.length=0,i.collisionEnd.length=0,i}})()},function(M,B,g){var e=M.exports=g(22);e.Axes=g(11),e.Bodies=g(12),e.Body=g(6),e.Bounds=g(1),e.Collision=g(8),e.Common=g(0),e.Composite=g(5),e.Composites=g(23),e.Constraint=g(10),e.Contact=g(17),e.Detector=g(14),e.Engine=g(18),e.Events=g(4),e.Grid=g(24),e.Mouse=g(13),e.MouseConstraint=g(25),e.Pair=g(9),e.Pairs=g(20),e.Plugin=g(15),e.Query=g(26),e.Render=g(16),e.Resolver=g(19),e.Runner=g(27),e.SAT=g(28),e.Sleeping=g(7),e.Svg=g(29),e.Vector=g(2),e.Vertices=g(3),e.World=g(30),e.Engine.run=e.Runner.run,e.Common.deprecated(e.Engine,"run","Engine.run \u27A4 use Matter.Runner.run(engine) instead")},function(M,B,g){var e={};M.exports=e;var l=g(15),s=g(0);(function(){e.name="matter-js",e.version="0.18.0",e.uses=[],e.used=[],e.use=function(){l.use(e,Array.prototype.slice.call(arguments))},e.before=function(i,u){return i=i.replace(/^Matter./,""),s.chainPathBefore(e,i,u)},e.after=function(i,u){return i=i.replace(/^Matter./,""),s.chainPathAfter(e,i,u)}})()},function(M,B,g){var e={};M.exports=e;var l=g(5),s=g(10),i=g(0),u=g(6),o=g(12),f=i.deprecated;(function(){e.stack=function(r,t,a,n,v,p,C){for(var w=l.create({label:"Stack"}),c=r,h=t,m,d=0,y=0;y<n;y++){for(var S=0,P=0;P<a;P++){var x=C(c,h,P,y,m,d);if(x){var A=x.bounds.max.y-x.bounds.min.y,T=x.bounds.max.x-x.bounds.min.x;A>S&&(S=A),u.translate(x,{x:T*.5,y:A*.5}),c=x.bounds.max.x+v,l.addBody(w,x),m=x,d+=1}else c+=v}h+=S+p,c=r}return w},e.chain=function(r,t,a,n,v,p){for(var C=r.bodies,w=1;w<C.length;w++){var c=C[w-1],h=C[w],m=c.bounds.max.y-c.bounds.min.y,d=c.bounds.max.x-c.bounds.min.x,y=h.bounds.max.y-h.bounds.min.y,S=h.bounds.max.x-h.bounds.min.x,P={bodyA:c,pointA:{x:d*t,y:m*a},bodyB:h,pointB:{x:S*n,y:y*v}},x=i.extend(P,p);l.addConstraint(r,s.create(x))}return r.label+=" Chain",r},e.mesh=function(r,t,a,n,v){var p=r.bodies,C,w,c,h,m;for(C=0;C<a;C++){for(w=1;w<t;w++)c=p[w-1+C*t],h=p[w+C*t],l.addConstraint(r,s.create(i.extend({bodyA:c,bodyB:h},v)));if(C>0)for(w=0;w<t;w++)c=p[w+(C-1)*t],h=p[w+C*t],l.addConstraint(r,s.create(i.extend({bodyA:c,bodyB:h},v))),n&&w>0&&(m=p[w-1+(C-1)*t],l.addConstraint(r,s.create(i.extend({bodyA:m,bodyB:h},v)))),n&&w<t-1&&(m=p[w+1+(C-1)*t],l.addConstraint(r,s.create(i.extend({bodyA:m,bodyB:h},v))))}return r.label+=" Mesh",r},e.pyramid=function(r,t,a,n,v,p,C){return e.stack(r,t,a,n,v,p,function(w,c,h,m,d,y){var S=Math.min(n,Math.ceil(a/2)),P=d?d.bounds.max.x-d.bounds.min.x:0;if(!(m>S)){m=S-m;var x=m,A=a-1-m;if(!(h<x||h>A)){y===1&&u.translate(d,{x:(h+(a%2===1?1:-1))*P,y:0});var T=d?h*P:0;return C(r+T+h*v,c,h,m,d,y)}}})},e.newtonsCradle=function(r,t,a,n,v){for(var p=l.create({label:"Newtons Cradle"}),C=0;C<a;C++){var w=1.9,c=o.circle(r+C*(n*w),t+v,n,{inertia:1/0,restitution:1,friction:0,frictionAir:1e-4,slop:1}),h=s.create({pointA:{x:r+C*(n*w),y:t},bodyB:c});l.addBody(p,c),l.addConstraint(p,h)}return p},f(e,"newtonsCradle","Composites.newtonsCradle \u27A4 moved to newtonsCradle example"),e.car=function(r,t,a,n,v){var p=u.nextGroup(!0),C=20,w=-a*.5+C,c=a*.5-C,h=0,m=l.create({label:"Car"}),d=o.rectangle(r,t,a,n,{collisionFilter:{group:p},chamfer:{radius:n*.5},density:2e-4}),y=o.circle(r+w,t+h,v,{collisionFilter:{group:p},friction:.8}),S=o.circle(r+c,t+h,v,{collisionFilter:{group:p},friction:.8}),P=s.create({bodyB:d,pointB:{x:w,y:h},bodyA:y,stiffness:1,length:0}),x=s.create({bodyB:d,pointB:{x:c,y:h},bodyA:S,stiffness:1,length:0});return l.addBody(m,d),l.addBody(m,y),l.addBody(m,S),l.addConstraint(m,P),l.addConstraint(m,x),m},f(e,"car","Composites.car \u27A4 moved to car example"),e.softBody=function(r,t,a,n,v,p,C,w,c,h){c=i.extend({inertia:1/0},c),h=i.extend({stiffness:.2,render:{type:"line",anchors:!1}},h);var m=e.stack(r,t,a,n,v,p,function(d,y){return o.circle(d,y,w,c)});return e.mesh(m,a,n,C,h),m.label="Soft Body",m},f(e,"softBody","Composites.softBody \u27A4 moved to softBody and cloth examples")})()},function(M,B,g){var e={};M.exports=e;var l=g(9),s=g(0),i=s.deprecated;(function(){e.create=function(u){var o={buckets:{},pairs:{},pairsList:[],bucketWidth:48,bucketHeight:48};return s.extend(o,u)},e.update=function(u,o,f,r){var t,a,n,v=f.world,p=u.buckets,C,w,c=!1;for(t=0;t<o.length;t++){var h=o[t];if(!(h.isSleeping&&!r)&&!(v.bounds&&(h.bounds.max.x<v.bounds.min.x||h.bounds.min.x>v.bounds.max.x||h.bounds.max.y<v.bounds.min.y||h.bounds.min.y>v.bounds.max.y))){var m=e._getRegion(u,h);if(!h.region||m.id!==h.region.id||r){(!h.region||r)&&(h.region=m);var d=e._regionUnion(m,h.region);for(a=d.startCol;a<=d.endCol;a++)for(n=d.startRow;n<=d.endRow;n++){w=e._getBucketId(a,n),C=p[w];var y=a>=m.startCol&&a<=m.endCol&&n>=m.startRow&&n<=m.endRow,S=a>=h.region.startCol&&a<=h.region.endCol&&n>=h.region.startRow&&n<=h.region.endRow;!y&&S&&S&&C&&e._bucketRemoveBody(u,C,h),(h.region===m||y&&!S||r)&&(C||(C=e._createBucket(p,w)),e._bucketAddBody(u,C,h))}h.region=m,c=!0}}}c&&(u.pairsList=e._createActivePairsList(u))},i(e,"update","Grid.update \u27A4 replaced by Matter.Detector"),e.clear=function(u){u.buckets={},u.pairs={},u.pairsList=[]},i(e,"clear","Grid.clear \u27A4 replaced by Matter.Detector"),e._regionUnion=function(u,o){var f=Math.min(u.startCol,o.startCol),r=Math.max(u.endCol,o.endCol),t=Math.min(u.startRow,o.startRow),a=Math.max(u.endRow,o.endRow);return e._createRegion(f,r,t,a)},e._getRegion=function(u,o){var f=o.bounds,r=Math.floor(f.min.x/u.bucketWidth),t=Math.floor(f.max.x/u.bucketWidth),a=Math.floor(f.min.y/u.bucketHeight),n=Math.floor(f.max.y/u.bucketHeight);return e._createRegion(r,t,a,n)},e._createRegion=function(u,o,f,r){return{id:u+","+o+","+f+","+r,startCol:u,endCol:o,startRow:f,endRow:r}},e._getBucketId=function(u,o){return"C"+u+"R"+o},e._createBucket=function(u,o){var f=u[o]=[];return f},e._bucketAddBody=function(u,o,f){var r=u.pairs,t=l.id,a=o.length,n;for(n=0;n<a;n++){var v=o[n];if(!(f.id===v.id||f.isStatic&&v.isStatic)){var p=t(f,v),C=r[p];C?C[2]+=1:r[p]=[f,v,1]}}o.push(f)},e._bucketRemoveBody=function(u,o,f){var r=u.pairs,t=l.id,a;o.splice(s.indexOf(o,f),1);var n=o.length;for(a=0;a<n;a++){var v=r[t(f,o[a])];v&&(v[2]-=1)}},e._createActivePairsList=function(u){var o,f=u.pairs,r=s.keys(f),t=r.length,a=[],n;for(n=0;n<t;n++)o=f[r[n]],o[2]>0?a.push(o):delete f[r[n]];return a}})()},function(M,B,g){var e={};M.exports=e;var l=g(3),s=g(7),i=g(13),u=g(4),o=g(14),f=g(10),r=g(5),t=g(0),a=g(1);(function(){e.create=function(n,v){var p=(n?n.mouse:null)||(v?v.mouse:null);p||(n&&n.render&&n.render.canvas?p=i.create(n.render.canvas):v&&v.element?p=i.create(v.element):(p=i.create(),t.warn("MouseConstraint.create: options.mouse was undefined, options.element was undefined, may not function as expected")));var C=f.create({label:"Mouse Constraint",pointA:p.position,pointB:{x:0,y:0},length:.01,stiffness:.1,angularStiffness:1,render:{strokeStyle:"#90EE90",lineWidth:3}}),w={type:"mouseConstraint",mouse:p,element:null,body:null,constraint:C,collisionFilter:{category:1,mask:4294967295,group:0}},c=t.extend(w,v);return u.on(n,"beforeUpdate",function(){var h=r.allBodies(n.world);e.update(c,h),e._triggerEvents(c)}),c},e.update=function(n,v){var p=n.mouse,C=n.constraint,w=n.body;if(p.button===0){if(C.bodyB)s.set(C.bodyB,!1),C.pointA=p.position;else for(var c=0;c<v.length;c++)if(w=v[c],a.contains(w.bounds,p.position)&&o.canCollide(w.collisionFilter,n.collisionFilter))for(var h=w.parts.length>1?1:0;h<w.parts.length;h++){var m=w.parts[h];if(l.contains(m.vertices,p.position)){C.pointA=p.position,C.bodyB=n.body=w,C.pointB={x:p.position.x-w.position.x,y:p.position.y-w.position.y},C.angleB=w.angle,s.set(w,!1),u.trigger(n,"startdrag",{mouse:p,body:w});break}}}else C.bodyB=n.body=null,C.pointB=null,w&&u.trigger(n,"enddrag",{mouse:p,body:w})},e._triggerEvents=function(n){var v=n.mouse,p=v.sourceEvents;p.mousemove&&u.trigger(n,"mousemove",{mouse:v}),p.mousedown&&u.trigger(n,"mousedown",{mouse:v}),p.mouseup&&u.trigger(n,"mouseup",{mouse:v}),i.clearSourceEvents(v)}})()},function(M,B,g){var e={};M.exports=e;var l=g(2),s=g(8),i=g(1),u=g(12),o=g(3);(function(){e.collides=function(f,r){for(var t=[],a=r.length,n=f.bounds,v=s.collides,p=i.overlaps,C=0;C<a;C++){var w=r[C],c=w.parts.length,h=c===1?0:1;if(p(w.bounds,n))for(var m=h;m<c;m++){var d=w.parts[m];if(p(d.bounds,n)){var y=v(d,f);if(y){t.push(y);break}}}}return t},e.ray=function(f,r,t,a){a=a||1e-100;for(var n=l.angle(r,t),v=l.magnitude(l.sub(r,t)),p=(t.x+r.x)*.5,C=(t.y+r.y)*.5,w=u.rectangle(p,C,v,a,{angle:n}),c=e.collides(w,f),h=0;h<c.length;h+=1){var m=c[h];m.body=m.bodyB=m.bodyA}return c},e.region=function(f,r,t){for(var a=[],n=0;n<f.length;n++){var v=f[n],p=i.overlaps(v.bounds,r);(p&&!t||!p&&t)&&a.push(v)}return a},e.point=function(f,r){for(var t=[],a=0;a<f.length;a++){var n=f[a];if(i.contains(n.bounds,r))for(var v=n.parts.length===1?0:1;v<n.parts.length;v++){var p=n.parts[v];if(i.contains(p.bounds,r)&&o.contains(p.vertices,r)){t.push(n);break}}}return t}})()},function(M,B,g){var e={};M.exports=e;var l=g(4),s=g(18),i=g(0);(function(){var u,o;if(typeof window!="undefined"&&(u=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame,o=window.cancelAnimationFrame||window.mozCancelAnimationFrame||window.webkitCancelAnimationFrame||window.msCancelAnimationFrame),!u){var f;u=function(r){f=setTimeout(function(){r(i.now())},1e3/60)},o=function(){clearTimeout(f)}}e.create=function(r){var t={fps:60,correction:1,deltaSampleSize:60,counterTimestamp:0,frameCounter:0,deltaHistory:[],timePrev:null,timeScalePrev:1,frameRequestId:null,isFixed:!1,enabled:!0},a=i.extend(t,r);return a.delta=a.delta||1e3/a.fps,a.deltaMin=a.deltaMin||1e3/a.fps,a.deltaMax=a.deltaMax||1e3/(a.fps*.5),a.fps=1e3/a.delta,a},e.run=function(r,t){return typeof r.positionIterations!="undefined"&&(t=r,r=e.create()),function a(n){r.frameRequestId=u(a),n&&r.enabled&&e.tick(r,t,n)}(),r},e.tick=function(r,t,a){var n=t.timing,v=1,p,C={timestamp:n.timestamp};l.trigger(r,"beforeTick",C),r.isFixed?p=r.delta:(p=a-r.timePrev||r.delta,r.timePrev=a,r.deltaHistory.push(p),r.deltaHistory=r.deltaHistory.slice(-r.deltaSampleSize),p=Math.min.apply(null,r.deltaHistory),p=p<r.deltaMin?r.deltaMin:p,p=p>r.deltaMax?r.deltaMax:p,v=p/r.delta,r.delta=p),r.timeScalePrev!==0&&(v*=n.timeScale/r.timeScalePrev),n.timeScale===0&&(v=0),r.timeScalePrev=n.timeScale,r.correction=v,r.frameCounter+=1,a-r.counterTimestamp>=1e3&&(r.fps=r.frameCounter*((a-r.counterTimestamp)/1e3),r.counterTimestamp=a,r.frameCounter=0),l.trigger(r,"tick",C),l.trigger(r,"beforeUpdate",C),s.update(t,p,v),l.trigger(r,"afterUpdate",C),l.trigger(r,"afterTick",C)},e.stop=function(r){o(r.frameRequestId)},e.start=function(r,t){e.run(r,t)}})()},function(M,B,g){var e={};M.exports=e;var l=g(8),s=g(0),i=s.deprecated;(function(){e.collides=function(u,o){return l.collides(u,o)},i(e,"collides","SAT.collides \u27A4 replaced by Collision.collides")})()},function(M,B,g){var e={};M.exports=e,g(1);var l=g(0);(function(){e.pathToVertices=function(s,i){typeof window!="undefined"&&!("SVGPathSeg"in window)&&l.warn("Svg.pathToVertices: SVGPathSeg not defined, a polyfill is required.");var u,o,f,r,t,a,n,v,p,C,w=[],c,h,m=0,d=0,y=0;i=i||15;var S=function(x,A,T){var L=T%2===1&&T>1;if(!p||x!=p.x||A!=p.y){p&&L?(c=p.x,h=p.y):(c=0,h=0);var R={x:c+x,y:h+A};(L||!p)&&(p=R),w.push(R),d=c+x,y=h+A}},P=function(x){var A=x.pathSegTypeAsLetter.toUpperCase();if(A!=="Z"){switch(A){case"M":case"L":case"T":case"C":case"S":case"Q":d=x.x,y=x.y;break;case"H":d=x.x;break;case"V":y=x.y;break}S(d,y,x.pathSegType)}};for(e._svgPathToAbsolute(s),f=s.getTotalLength(),a=[],u=0;u<s.pathSegList.numberOfItems;u+=1)a.push(s.pathSegList.getItem(u));for(n=a.concat();m<f;){if(C=s.getPathSegAtLength(m),t=a[C],t!=v){for(;n.length&&n[0]!=t;)P(n.shift());v=t}switch(t.pathSegTypeAsLetter.toUpperCase()){case"C":case"T":case"S":case"Q":case"A":r=s.getPointAtLength(m),S(r.x,r.y,0);break}m+=i}for(u=0,o=n.length;u<o;++u)P(n[u]);return w},e._svgPathToAbsolute=function(s){for(var i,u,o,f,r,t,a=s.pathSegList,n=0,v=0,p=a.numberOfItems,C=0;C<p;++C){var w=a.getItem(C),c=w.pathSegTypeAsLetter;if(/[MLHVCSQTA]/.test(c))"x"in w&&(n=w.x),"y"in w&&(v=w.y);else switch("x1"in w&&(o=n+w.x1),"x2"in w&&(r=n+w.x2),"y1"in w&&(f=v+w.y1),"y2"in w&&(t=v+w.y2),"x"in w&&(n+=w.x),"y"in w&&(v+=w.y),c){case"m":a.replaceItem(s.createSVGPathSegMovetoAbs(n,v),C);break;case"l":a.replaceItem(s.createSVGPathSegLinetoAbs(n,v),C);break;case"h":a.replaceItem(s.createSVGPathSegLinetoHorizontalAbs(n),C);break;case"v":a.replaceItem(s.createSVGPathSegLinetoVerticalAbs(v),C);break;case"c":a.replaceItem(s.createSVGPathSegCurvetoCubicAbs(n,v,o,f,r,t),C);break;case"s":a.replaceItem(s.createSVGPathSegCurvetoCubicSmoothAbs(n,v,r,t),C);break;case"q":a.replaceItem(s.createSVGPathSegCurvetoQuadraticAbs(n,v,o,f),C);break;case"t":a.replaceItem(s.createSVGPathSegCurvetoQuadraticSmoothAbs(n,v),C);break;case"a":a.replaceItem(s.createSVGPathSegArcAbs(n,v,w.r1,w.r2,w.angle,w.largeArcFlag,w.sweepFlag),C);break;case"z":case"Z":n=i,v=u;break}(c=="M"||c=="m")&&(i=n,u=v)}}})()},function(M,B,g){var e={};M.exports=e;var l=g(5);g(0),function(){e.create=l.create,e.add=l.add,e.remove=l.remove,e.clear=l.clear,e.addComposite=l.addComposite,e.addBody=l.addBody,e.addConstraint=l.addConstraint}()}])})})(Ke);var K=ht(Ke.exports);const dt=K.Engine,We=K.Render,$e=K.Runner,b=K.Bodies,pt=K.Composite,mt=K.Mouse,xt=K.Events,me=K.Body,Ge=K.Composites,Q=512,ze=80,oe=50;let X;Qe.subscribe(I=>X=I);async function yt(I){I.width=window.innerWidth,I.height=window.innerHeight;const E=dt.create(),M=We.create({engine:E,canvas:I,bounds:{max:{x:window.innerWidth,y:window.innerHeight},min:{x:0,y:0}},options:{width:window.innerWidth,height:window.innerHeight,wireframes:!1}}),B=Ge.stack(500,80,2,1,10,0,(n,v,p)=>{const C=p===0?10:30,w=p===0?1:50,c=p===0?1:.05,h=p===0?"handle":"collider";return b.circle(window.innerWidth/2,window.innerHeight/2,C,{label:h,mass:w,frictionAir:c,render:{fillStyle:"#E6AE00",lineWidth:3,strokeStyle:"#333"}},64)}),g=Ge.chain(B,0,0,0,0,{stiffness:1,length:50,render:{lineWidth:.5,fillStyle:"red",strokeStyle:"#666"}}),[e,l]=g.bodies,s=mt.create(M.canvas),i=b.rectangle(I.width/2,I.height+Q/2,I.width,Q,{isStatic:!0,label:"wallBot"}),u=b.rectangle(I.width/2,-Q/2,I.width,Q,{isStatic:!0,label:"wallTop"}),o=b.rectangle(-Q/2,I.height/2,Q,I.height,{isStatic:!0,label:"wallLeft"}),f=b.rectangle(I.width+Q/2,I.height/2,Q,I.height,{isStatic:!0,label:"wallRight"});pt.add(E.world,[g,i,o,f,u]),We.run(M);const r=$e.create();$e.run(r,E);let t=null;xt.on(E,"afterUpdate",()=>{if(!s.position.x&&!s.position.y)return;const n=s.position.x,v=s.position.y,p=l.position.x,C=l.position.y;if(me.setPosition(e,{x:n,y:v}),!X)return;const w=p>n?"right":"left";if(!t){t=w;return}const c=w!==t,h=C<v,m=n<oe||n>window.innerWidth-oe||v<oe||v>window.innerHeight-oe;if(h&&!m&&c){const d=X.getZoom();X.setZoom(d+(w==="left"?-1:1))}t=w}),K.Events.on(E,"collisionStart",n=>{if(!!X)for(const v of n.pairs){const{bodyA:p,bodyB:C,separation:w}=v;if(w<1||p.label!=="collider"&&C.label!=="collider")continue;const{lat:c,lng:h}=X.getCenter().toJSON(),m=w*1e-4*Math.pow(1.6,23-X.getZoom());let d=c,y=h;(p.label==="wallLeft"||C.label==="wallLeft")&&(y-=m),(p.label==="wallRight"||C.label==="wallRight")&&(y+=m),(p.label==="wallTop"||C.label==="wallTop")&&(d+=m),(p.label==="wallBot"||C.label==="wallBot")&&(d-=m),d=Math.max(d,-ze),d=Math.min(d,ze),X.panTo({lat:d,lng:y})}}),window.addEventListener("resize",a);function a(){M.bounds.max.x=window.innerWidth,M.bounds.max.y=window.innerHeight,M.options.width=window.innerWidth,M.options.height=window.innerHeight,M.canvas.width=window.innerWidth,M.canvas.height=window.innerHeight,me.setPosition(f,{x:window.innerWidth+Q/2,y:window.innerHeight/2}),me.setPosition(i,{x:window.innerWidth/2,y:window.innerHeight+Q/2})}}function St(I){let E;return{c(){E=Me("canvas"),ee(E,"id","physics-canvas"),ee(E,"class","svelte-1o94rtw")},m(M,B){Pe(M,E,B),I[1](E)},p:N,i:N,o:N,d(M){M&&ge(E),I[1](null)}}}function wt(I,E,M){let B;Ne(()=>yt(B));function g(e){ue[e?"unshift":"push"](()=>{B=e,M(0,B)})}return[B,g]}class Ct extends Ie{constructor(E){super(),Ae(this,E,wt,St,ve,{})}}function Pt(I){let E,M,B,g,e;return M=new gt({}),g=new Ct({}),{c(){E=Me("main"),Ve(M.$$.fragment),B=tt(),Ve(g.$$.fragment),ee(E,"class","svelte-vfqu2l")},m(l,s){Pe(l,E,s),we(M,E,null),_e(E,B),we(g,E,null),e=!0},p:N,i(l){e||(Se(M.$$.fragment,l),Se(g.$$.fragment,l),e=!0)},o(l){He(M.$$.fragment,l),He(g.$$.fragment,l),e=!1},d(l){l&&ge(E),Ce(M),Ce(g)}}}class Mt extends Ie{constructor(E){super(),Ae(this,E,null,Pt,ve,{})}}new Mt({target:document.getElementById("app")});
