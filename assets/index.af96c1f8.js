const lt=function(){const T=document.createElement("link").relList;if(T&&T.supports&&T.supports("modulepreload"))return;for(const g of document.querySelectorAll('link[rel="modulepreload"]'))E(g);new MutationObserver(g=>{for(const e of g)if(e.type==="childList")for(const l of e.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&E(l)}).observe(document,{childList:!0,subtree:!0});function M(g){const e={};return g.integrity&&(e.integrity=g.integrity),g.referrerpolicy&&(e.referrerPolicy=g.referrerpolicy),g.crossorigin==="use-credentials"?e.credentials="include":g.crossorigin==="anonymous"?e.credentials="omit":e.credentials="same-origin",e}function E(g){if(g.ep)return;g.ep=!0;const e=M(g);fetch(g.href,e)}};lt();function Q(){}function qe(I){return I()}function Ue(){return Object.create(null)}function xe(I){I.forEach(qe)}function ft(I){return typeof I=="function"}function ye(I,T){return I!=I?T==T:I!==T||I&&typeof I=="object"||typeof I=="function"}function ut(I){return Object.keys(I).length===0}function ct(I,T){I.appendChild(T)}function Re(I,T,M){I.insertBefore(T,M||null)}function Se(I){I.parentNode.removeChild(I)}function Fe(I){return document.createElement(I)}function vt(I){return document.createTextNode(I)}function gt(){return vt(" ")}function ae(I,T,M){M==null?I.removeAttribute(T):I.getAttribute(T)!==M&&I.setAttribute(T,M)}function ht(I){return Array.from(I.childNodes)}let se;function ie(I){se=I}function dt(){if(!se)throw new Error("Function called outside component initialization");return se}function _e(I){dt().$$.on_mount.push(I)}const ee=[],pe=[],he=[],Ne=[],pt=Promise.resolve();let Me=!1;function mt(){Me||(Me=!0,pt.then(et))}function Ae(I){he.push(I)}const Pe=new Set;let ce=0;function et(){const I=se;do{for(;ce<ee.length;){const T=ee[ce];ce++,ie(T),xt(T.$$)}for(ie(null),ee.length=0,ce=0;pe.length;)pe.pop()();for(let T=0;T<he.length;T+=1){const M=he[T];Pe.has(M)||(Pe.add(M),M())}he.length=0}while(ee.length);for(;Ne.length;)Ne.pop()();Me=!1,Pe.clear(),ie(I)}function xt(I){if(I.fragment!==null){I.update(),xe(I.before_update);const T=I.dirty;I.dirty=[-1],I.fragment&&I.fragment.p(I.ctx,T),I.after_update.forEach(Ae)}}const de=new Set;let yt;function Ie(I,T){I&&I.i&&(de.delete(I),I.i(T))}function Qe(I,T,M,E){if(I&&I.o){if(de.has(I))return;de.add(I),yt.c.push(()=>{de.delete(I),E&&(M&&I.d(1),E())}),I.o(T)}}function Ze(I){I&&I.c()}function Te(I,T,M,E){const{fragment:g,on_mount:e,on_destroy:l,after_update:s}=I.$$;g&&g.m(T,M),E||Ae(()=>{const n=e.map(qe).filter(ft);l?l.push(...n):xe(n),I.$$.on_mount=[]}),s.forEach(Ae)}function Be(I,T){const M=I.$$;M.fragment!==null&&(xe(M.on_destroy),M.fragment&&M.fragment.d(T),M.on_destroy=M.fragment=null,M.ctx=[])}function St(I,T){I.$$.dirty[0]===-1&&(ee.push(I),mt(),I.$$.dirty.fill(0)),I.$$.dirty[T/31|0]|=1<<T%31}function ke(I,T,M,E,g,e,l,s=[-1]){const n=se;ie(I);const u=I.$$={fragment:null,ctx:null,props:e,update:Q,not_equal:g,bound:Ue(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(T.context||(n?n.$$.context:[])),callbacks:Ue(),dirty:s,skip_bound:!1,root:T.target||n.$$.root};l&&l(u.root);let o=!1;if(u.ctx=M?M(I,T.props||{},(f,i,...t)=>{const r=t.length?t[0]:i;return u.ctx&&g(u.ctx[f],u.ctx[f]=r)&&(!u.skip_bound&&u.bound[f]&&u.bound[f](r),o&&St(I,f)),i}):[],u.update(),o=!0,xe(u.before_update),u.fragment=E?E(u.ctx):!1,T.target){if(T.hydrate){const f=ht(T.target);u.fragment&&u.fragment.l(f),f.forEach(Se)}else u.fragment&&u.fragment.c();T.intro&&Ie(I.$$.fragment),Te(I,T.target,T.anchor,T.customElement),et()}ie(n)}class Oe{$destroy(){Be(this,1),this.$destroy=Q}$on(T,M){const E=this.$$.callbacks[T]||(this.$$.callbacks[T]=[]);return E.push(M),()=>{const g=E.indexOf(M);g!==-1&&E.splice(g,1)}}$set(T){this.$$set&&!ut(T)&&(this.$$.skip_bound=!0,this.$$set(T),this.$$.skip_bound=!1)}}const b=[];function wt(I,T=Q){let M;const E=new Set;function g(s){if(ye(I,s)&&(I=s,M)){const n=!b.length;for(const u of E)u[1](),b.push(u,I);if(n){for(let u=0;u<b.length;u+=2)b[u][0](b[u+1]);b.length=0}}}function e(s){g(s(I))}function l(s,n=Q){const u=[s,n];return E.add(u),E.size===1&&(M=T(g)||Q),s(I),()=>{E.delete(u),E.size===0&&(M(),M=null)}}return{set:g,update:e,subscribe:l}}const tt=wt(null);let ve=null;async function Pt(I){if(ve!==null)return ve;const T=new URL("https://maps.googleapis.com/maps/api/js");for(const[M,E]of Object.entries(I))E!==void 0&&T.searchParams.set(M,E);return T.searchParams.set("callback","__maps_callback__"),ve=new Promise(M=>{window.__maps_callback__=()=>{delete window.__maps_callback__,M()};const E=document.createElement("script");E.src=T.toString(),document.body.appendChild(E)}),ve}function Ct(I){let T;return{c(){T=Fe("div"),ae(T,"id","map"),ae(T,"class","svelte-pwipf8")},m(M,E){Re(M,T,E),I[1](T)},p:Q,i:Q,o:Q,d(M){M&&Se(T),I[1](null)}}}function Mt(I,T,M){let E;_e(async()=>{await Pt({key:"AIzaSyBIewvG8LT8FZgPcIi1GXHOqbjG3GjXeCw"});const e=new google.maps.Map(E,{zoom:4,center:{lat:37.7749,lng:-122.4194},disableDefaultUI:!0,draggable:!1,zoomControl:!1,restriction:{latLngBounds:{north:80,south:-80,east:180,west:-180}}});tt.set(e)});function g(e){pe[e?"unshift":"push"](()=>{E=e,M(0,E)})}return[E,g]}class At extends Oe{constructor(T){super(),ke(this,T,Mt,Ct,ye,{})}}var Ce=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{};function It(I){return I&&I.__esModule&&Object.prototype.hasOwnProperty.call(I,"default")?I.default:I}var nt={exports:{}};/*!
 * matter-js 0.18.0 by @liabru
 * http://brm.io/matter-js/
 * License MIT
 * 
 * The MIT License (MIT)
 * 
 * Copyright (c) Liam Brummitt and contributors.
 * 
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 * 
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 * 
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */(function(I,T){(function(E,g){I.exports=g()})(Ce,function(){return function(M){var E={};function g(e){if(E[e])return E[e].exports;var l=E[e]={i:e,l:!1,exports:{}};return M[e].call(l.exports,l,l.exports,g),l.l=!0,l.exports}return g.m=M,g.c=E,g.d=function(e,l,s){g.o(e,l)||Object.defineProperty(e,l,{enumerable:!0,get:s})},g.r=function(e){typeof Symbol!="undefined"&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},g.t=function(e,l){if(l&1&&(e=g(e)),l&8||l&4&&typeof e=="object"&&e&&e.__esModule)return e;var s=Object.create(null);if(g.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:e}),l&2&&typeof e!="string")for(var n in e)g.d(s,n,function(u){return e[u]}.bind(null,n));return s},g.n=function(e){var l=e&&e.__esModule?function(){return e.default}:function(){return e};return g.d(l,"a",l),l},g.o=function(e,l){return Object.prototype.hasOwnProperty.call(e,l)},g.p="",g(g.s=21)}([function(M,E){var g={};M.exports=g,function(){g._nextId=0,g._seed=0,g._nowStartTime=+new Date,g._warnedOnce={},g._decomp=null,g.extend=function(l,s){var n,u;typeof s=="boolean"?(n=2,u=s):(n=1,u=!0);for(var o=n;o<arguments.length;o++){var f=arguments[o];if(f)for(var i in f)u&&f[i]&&f[i].constructor===Object&&(!l[i]||l[i].constructor===Object)?(l[i]=l[i]||{},g.extend(l[i],u,f[i])):l[i]=f[i]}return l},g.clone=function(l,s){return g.extend({},s,l)},g.keys=function(l){if(Object.keys)return Object.keys(l);var s=[];for(var n in l)s.push(n);return s},g.values=function(l){var s=[];if(Object.keys){for(var n=Object.keys(l),u=0;u<n.length;u++)s.push(l[n[u]]);return s}for(var o in l)s.push(l[o]);return s},g.get=function(l,s,n,u){s=s.split(".").slice(n,u);for(var o=0;o<s.length;o+=1)l=l[s[o]];return l},g.set=function(l,s,n,u,o){var f=s.split(".").slice(u,o);return g.get(l,s,0,-1)[f[f.length-1]]=n,n},g.shuffle=function(l){for(var s=l.length-1;s>0;s--){var n=Math.floor(g.random()*(s+1)),u=l[s];l[s]=l[n],l[n]=u}return l},g.choose=function(l){return l[Math.floor(g.random()*l.length)]},g.isElement=function(l){return typeof HTMLElement!="undefined"?l instanceof HTMLElement:!!(l&&l.nodeType&&l.nodeName)},g.isArray=function(l){return Object.prototype.toString.call(l)==="[object Array]"},g.isFunction=function(l){return typeof l=="function"},g.isPlainObject=function(l){return typeof l=="object"&&l.constructor===Object},g.isString=function(l){return toString.call(l)==="[object String]"},g.clamp=function(l,s,n){return l<s?s:l>n?n:l},g.sign=function(l){return l<0?-1:1},g.now=function(){if(typeof window!="undefined"&&window.performance){if(window.performance.now)return window.performance.now();if(window.performance.webkitNow)return window.performance.webkitNow()}return Date.now?Date.now():new Date-g._nowStartTime},g.random=function(l,s){return l=typeof l!="undefined"?l:0,s=typeof s!="undefined"?s:1,l+e()*(s-l)};var e=function(){return g._seed=(g._seed*9301+49297)%233280,g._seed/233280};g.colorToNumber=function(l){return l=l.replace("#",""),l.length==3&&(l=l.charAt(0)+l.charAt(0)+l.charAt(1)+l.charAt(1)+l.charAt(2)+l.charAt(2)),parseInt(l,16)},g.logLevel=1,g.log=function(){console&&g.logLevel>0&&g.logLevel<=3&&console.log.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))},g.info=function(){console&&g.logLevel>0&&g.logLevel<=2&&console.info.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))},g.warn=function(){console&&g.logLevel>0&&g.logLevel<=3&&console.warn.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))},g.warnOnce=function(){var l=Array.prototype.slice.call(arguments).join(" ");g._warnedOnce[l]||(g.warn(l),g._warnedOnce[l]=!0)},g.deprecated=function(l,s,n){l[s]=g.chain(function(){g.warnOnce("\u{1F505} deprecated \u{1F505}",n)},l[s])},g.nextId=function(){return g._nextId++},g.indexOf=function(l,s){if(l.indexOf)return l.indexOf(s);for(var n=0;n<l.length;n++)if(l[n]===s)return n;return-1},g.map=function(l,s){if(l.map)return l.map(s);for(var n=[],u=0;u<l.length;u+=1)n.push(s(l[u]));return n},g.topologicalSort=function(l){var s=[],n=[],u=[];for(var o in l)!n[o]&&!u[o]&&g._topologicalSort(o,n,u,l,s);return s},g._topologicalSort=function(l,s,n,u,o){var f=u[l]||[];n[l]=!0;for(var i=0;i<f.length;i+=1){var t=f[i];n[t]||s[t]||g._topologicalSort(t,s,n,u,o)}n[l]=!1,s[l]=!0,o.push(l)},g.chain=function(){for(var l=[],s=0;s<arguments.length;s+=1){var n=arguments[s];n._chained?l.push.apply(l,n._chained):l.push(n)}var u=function(){for(var o,f=new Array(arguments.length),i=0,t=arguments.length;i<t;i++)f[i]=arguments[i];for(i=0;i<l.length;i+=1){var r=l[i].apply(o,f);typeof r!="undefined"&&(o=r)}return o};return u._chained=l,u},g.chainPathBefore=function(l,s,n){return g.set(l,s,g.chain(n,g.get(l,s)))},g.chainPathAfter=function(l,s,n){return g.set(l,s,g.chain(g.get(l,s),n))},g.setDecomp=function(l){g._decomp=l},g.getDecomp=function(){var l=g._decomp;try{!l&&typeof window!="undefined"&&(l=window.decomp),!l&&typeof Ce!="undefined"&&(l=Ce.decomp)}catch{l=null}return l}}()},function(M,E){var g={};M.exports=g,function(){g.create=function(e){var l={min:{x:0,y:0},max:{x:0,y:0}};return e&&g.update(l,e),l},g.update=function(e,l,s){e.min.x=1/0,e.max.x=-1/0,e.min.y=1/0,e.max.y=-1/0;for(var n=0;n<l.length;n++){var u=l[n];u.x>e.max.x&&(e.max.x=u.x),u.x<e.min.x&&(e.min.x=u.x),u.y>e.max.y&&(e.max.y=u.y),u.y<e.min.y&&(e.min.y=u.y)}s&&(s.x>0?e.max.x+=s.x:e.min.x+=s.x,s.y>0?e.max.y+=s.y:e.min.y+=s.y)},g.contains=function(e,l){return l.x>=e.min.x&&l.x<=e.max.x&&l.y>=e.min.y&&l.y<=e.max.y},g.overlaps=function(e,l){return e.min.x<=l.max.x&&e.max.x>=l.min.x&&e.max.y>=l.min.y&&e.min.y<=l.max.y},g.translate=function(e,l){e.min.x+=l.x,e.max.x+=l.x,e.min.y+=l.y,e.max.y+=l.y},g.shift=function(e,l){var s=e.max.x-e.min.x,n=e.max.y-e.min.y;e.min.x=l.x,e.max.x=l.x+s,e.min.y=l.y,e.max.y=l.y+n}}()},function(M,E){var g={};M.exports=g,function(){g.create=function(e,l){return{x:e||0,y:l||0}},g.clone=function(e){return{x:e.x,y:e.y}},g.magnitude=function(e){return Math.sqrt(e.x*e.x+e.y*e.y)},g.magnitudeSquared=function(e){return e.x*e.x+e.y*e.y},g.rotate=function(e,l,s){var n=Math.cos(l),u=Math.sin(l);s||(s={});var o=e.x*n-e.y*u;return s.y=e.x*u+e.y*n,s.x=o,s},g.rotateAbout=function(e,l,s,n){var u=Math.cos(l),o=Math.sin(l);n||(n={});var f=s.x+((e.x-s.x)*u-(e.y-s.y)*o);return n.y=s.y+((e.x-s.x)*o+(e.y-s.y)*u),n.x=f,n},g.normalise=function(e){var l=g.magnitude(e);return l===0?{x:0,y:0}:{x:e.x/l,y:e.y/l}},g.dot=function(e,l){return e.x*l.x+e.y*l.y},g.cross=function(e,l){return e.x*l.y-e.y*l.x},g.cross3=function(e,l,s){return(l.x-e.x)*(s.y-e.y)-(l.y-e.y)*(s.x-e.x)},g.add=function(e,l,s){return s||(s={}),s.x=e.x+l.x,s.y=e.y+l.y,s},g.sub=function(e,l,s){return s||(s={}),s.x=e.x-l.x,s.y=e.y-l.y,s},g.mult=function(e,l){return{x:e.x*l,y:e.y*l}},g.div=function(e,l){return{x:e.x/l,y:e.y/l}},g.perp=function(e,l){return l=l===!0?-1:1,{x:l*-e.y,y:l*e.x}},g.neg=function(e){return{x:-e.x,y:-e.y}},g.angle=function(e,l){return Math.atan2(l.y-e.y,l.x-e.x)},g._temp=[g.create(),g.create(),g.create(),g.create(),g.create(),g.create()]}()},function(M,E,g){var e={};M.exports=e;var l=g(2),s=g(0);(function(){e.create=function(n,u){for(var o=[],f=0;f<n.length;f++){var i=n[f],t={x:i.x,y:i.y,index:f,body:u,isInternal:!1};o.push(t)}return o},e.fromPath=function(n,u){var o=/L?\s*([-\d.e]+)[\s,]*([-\d.e]+)*/ig,f=[];return n.replace(o,function(i,t,r){f.push({x:parseFloat(t),y:parseFloat(r)})}),e.create(f,u)},e.centre=function(n){for(var u=e.area(n,!0),o={x:0,y:0},f,i,t,r=0;r<n.length;r++)t=(r+1)%n.length,f=l.cross(n[r],n[t]),i=l.mult(l.add(n[r],n[t]),f),o=l.add(o,i);return l.div(o,6*u)},e.mean=function(n){for(var u={x:0,y:0},o=0;o<n.length;o++)u.x+=n[o].x,u.y+=n[o].y;return l.div(u,n.length)},e.area=function(n,u){for(var o=0,f=n.length-1,i=0;i<n.length;i++)o+=(n[f].x-n[i].x)*(n[f].y+n[i].y),f=i;return u?o/2:Math.abs(o)/2},e.inertia=function(n,u){for(var o=0,f=0,i=n,t,r,a=0;a<i.length;a++)r=(a+1)%i.length,t=Math.abs(l.cross(i[r],i[a])),o+=t*(l.dot(i[r],i[r])+l.dot(i[r],i[a])+l.dot(i[a],i[a])),f+=t;return u/6*(o/f)},e.translate=function(n,u,o){o=typeof o!="undefined"?o:1;var f=n.length,i=u.x*o,t=u.y*o,r;for(r=0;r<f;r++)n[r].x+=i,n[r].y+=t;return n},e.rotate=function(n,u,o){if(u!==0){var f=Math.cos(u),i=Math.sin(u),t=o.x,r=o.y,a=n.length,v,p,P,w;for(w=0;w<a;w++)v=n[w],p=v.x-t,P=v.y-r,v.x=t+(p*f-P*i),v.y=r+(p*i+P*f);return n}},e.contains=function(n,u){for(var o=u.x,f=u.y,i=n.length,t=n[i-1],r,a=0;a<i;a++){if(r=n[a],(o-t.x)*(r.y-t.y)+(f-t.y)*(t.x-r.x)>0)return!1;t=r}return!0},e.scale=function(n,u,o,f){if(u===1&&o===1)return n;f=f||e.centre(n);for(var i,t,r=0;r<n.length;r++)i=n[r],t=l.sub(i,f),n[r].x=f.x+t.x*u,n[r].y=f.y+t.y*o;return n},e.chamfer=function(n,u,o,f,i){typeof u=="number"?u=[u]:u=u||[8],o=typeof o!="undefined"?o:-1,f=f||2,i=i||14;for(var t=[],r=0;r<n.length;r++){var a=n[r-1>=0?r-1:n.length-1],v=n[r],p=n[(r+1)%n.length],P=u[r<u.length?r:u.length-1];if(P===0){t.push(v);continue}var w=l.normalise({x:v.y-a.y,y:a.x-v.x}),c=l.normalise({x:p.y-v.y,y:v.x-p.x}),h=Math.sqrt(2*Math.pow(P,2)),m=l.mult(s.clone(w),P),d=l.normalise(l.mult(l.add(w,c),.5)),S=l.sub(v,l.mult(d,h)),y=o;o===-1&&(y=Math.pow(P,.32)*1.75),y=s.clamp(y,f,i),y%2===1&&(y+=1);for(var C=Math.acos(l.dot(w,c)),x=C/y,A=0;A<y;A++)t.push(l.add(l.rotate(m,x*A),S))}return t},e.clockwiseSort=function(n){var u=e.mean(n);return n.sort(function(o,f){return l.angle(u,o)-l.angle(u,f)}),n},e.isConvex=function(n){var u=0,o=n.length,f,i,t,r;if(o<3)return null;for(f=0;f<o;f++)if(i=(f+1)%o,t=(f+2)%o,r=(n[i].x-n[f].x)*(n[t].y-n[i].y),r-=(n[i].y-n[f].y)*(n[t].x-n[i].x),r<0?u|=1:r>0&&(u|=2),u===3)return!1;return u!==0?!0:null},e.hull=function(n){var u=[],o=[],f,i;for(n=n.slice(0),n.sort(function(t,r){var a=t.x-r.x;return a!==0?a:t.y-r.y}),i=0;i<n.length;i+=1){for(f=n[i];o.length>=2&&l.cross3(o[o.length-2],o[o.length-1],f)<=0;)o.pop();o.push(f)}for(i=n.length-1;i>=0;i-=1){for(f=n[i];u.length>=2&&l.cross3(u[u.length-2],u[u.length-1],f)<=0;)u.pop();u.push(f)}return u.pop(),o.pop(),u.concat(o)}})()},function(M,E,g){var e={};M.exports=e;var l=g(0);(function(){e.on=function(s,n,u){for(var o=n.split(" "),f,i=0;i<o.length;i++)f=o[i],s.events=s.events||{},s.events[f]=s.events[f]||[],s.events[f].push(u);return u},e.off=function(s,n,u){if(!n){s.events={};return}typeof n=="function"&&(u=n,n=l.keys(s.events).join(" "));for(var o=n.split(" "),f=0;f<o.length;f++){var i=s.events[o[f]],t=[];if(u&&i)for(var r=0;r<i.length;r++)i[r]!==u&&t.push(i[r]);s.events[o[f]]=t}},e.trigger=function(s,n,u){var o,f,i,t,r=s.events;if(r&&l.keys(r).length>0){u||(u={}),o=n.split(" ");for(var a=0;a<o.length;a++)if(f=o[a],i=r[f],i){t=l.clone(u,!1),t.name=f,t.source=s;for(var v=0;v<i.length;v++)i[v].apply(s,[t])}}}})()},function(M,E,g){var e={};M.exports=e;var l=g(4),s=g(0),n=g(1),u=g(6);(function(){e.create=function(o){return s.extend({id:s.nextId(),type:"composite",parent:null,isModified:!1,bodies:[],constraints:[],composites:[],label:"Composite",plugin:{},cache:{allBodies:null,allConstraints:null,allComposites:null}},o)},e.setModified=function(o,f,i,t){if(o.isModified=f,f&&o.cache&&(o.cache.allBodies=null,o.cache.allConstraints=null,o.cache.allComposites=null),i&&o.parent&&e.setModified(o.parent,f,i,t),t)for(var r=0;r<o.composites.length;r++){var a=o.composites[r];e.setModified(a,f,i,t)}},e.add=function(o,f){var i=[].concat(f);l.trigger(o,"beforeAdd",{object:f});for(var t=0;t<i.length;t++){var r=i[t];switch(r.type){case"body":if(r.parent!==r){s.warn("Composite.add: skipped adding a compound body part (you must add its parent instead)");break}e.addBody(o,r);break;case"constraint":e.addConstraint(o,r);break;case"composite":e.addComposite(o,r);break;case"mouseConstraint":e.addConstraint(o,r.constraint);break}}return l.trigger(o,"afterAdd",{object:f}),o},e.remove=function(o,f,i){var t=[].concat(f);l.trigger(o,"beforeRemove",{object:f});for(var r=0;r<t.length;r++){var a=t[r];switch(a.type){case"body":e.removeBody(o,a,i);break;case"constraint":e.removeConstraint(o,a,i);break;case"composite":e.removeComposite(o,a,i);break;case"mouseConstraint":e.removeConstraint(o,a.constraint);break}}return l.trigger(o,"afterRemove",{object:f}),o},e.addComposite=function(o,f){return o.composites.push(f),f.parent=o,e.setModified(o,!0,!0,!1),o},e.removeComposite=function(o,f,i){var t=s.indexOf(o.composites,f);if(t!==-1&&e.removeCompositeAt(o,t),i)for(var r=0;r<o.composites.length;r++)e.removeComposite(o.composites[r],f,!0);return o},e.removeCompositeAt=function(o,f){return o.composites.splice(f,1),e.setModified(o,!0,!0,!1),o},e.addBody=function(o,f){return o.bodies.push(f),e.setModified(o,!0,!0,!1),o},e.removeBody=function(o,f,i){var t=s.indexOf(o.bodies,f);if(t!==-1&&e.removeBodyAt(o,t),i)for(var r=0;r<o.composites.length;r++)e.removeBody(o.composites[r],f,!0);return o},e.removeBodyAt=function(o,f){return o.bodies.splice(f,1),e.setModified(o,!0,!0,!1),o},e.addConstraint=function(o,f){return o.constraints.push(f),e.setModified(o,!0,!0,!1),o},e.removeConstraint=function(o,f,i){var t=s.indexOf(o.constraints,f);if(t!==-1&&e.removeConstraintAt(o,t),i)for(var r=0;r<o.composites.length;r++)e.removeConstraint(o.composites[r],f,!0);return o},e.removeConstraintAt=function(o,f){return o.constraints.splice(f,1),e.setModified(o,!0,!0,!1),o},e.clear=function(o,f,i){if(i)for(var t=0;t<o.composites.length;t++)e.clear(o.composites[t],f,!0);return f?o.bodies=o.bodies.filter(function(r){return r.isStatic}):o.bodies.length=0,o.constraints.length=0,o.composites.length=0,e.setModified(o,!0,!0,!1),o},e.allBodies=function(o){if(o.cache&&o.cache.allBodies)return o.cache.allBodies;for(var f=[].concat(o.bodies),i=0;i<o.composites.length;i++)f=f.concat(e.allBodies(o.composites[i]));return o.cache&&(o.cache.allBodies=f),f},e.allConstraints=function(o){if(o.cache&&o.cache.allConstraints)return o.cache.allConstraints;for(var f=[].concat(o.constraints),i=0;i<o.composites.length;i++)f=f.concat(e.allConstraints(o.composites[i]));return o.cache&&(o.cache.allConstraints=f),f},e.allComposites=function(o){if(o.cache&&o.cache.allComposites)return o.cache.allComposites;for(var f=[].concat(o.composites),i=0;i<o.composites.length;i++)f=f.concat(e.allComposites(o.composites[i]));return o.cache&&(o.cache.allComposites=f),f},e.get=function(o,f,i){var t,r;switch(i){case"body":t=e.allBodies(o);break;case"constraint":t=e.allConstraints(o);break;case"composite":t=e.allComposites(o).concat(o);break}return t?(r=t.filter(function(a){return a.id.toString()===f.toString()}),r.length===0?null:r[0]):null},e.move=function(o,f,i){return e.remove(o,f),e.add(i,f),o},e.rebase=function(o){for(var f=e.allBodies(o).concat(e.allConstraints(o)).concat(e.allComposites(o)),i=0;i<f.length;i++)f[i].id=s.nextId();return o},e.translate=function(o,f,i){for(var t=i?e.allBodies(o):o.bodies,r=0;r<t.length;r++)u.translate(t[r],f);return o},e.rotate=function(o,f,i,t){for(var r=Math.cos(f),a=Math.sin(f),v=t?e.allBodies(o):o.bodies,p=0;p<v.length;p++){var P=v[p],w=P.position.x-i.x,c=P.position.y-i.y;u.setPosition(P,{x:i.x+(w*r-c*a),y:i.y+(w*a+c*r)}),u.rotate(P,f)}return o},e.scale=function(o,f,i,t,r){for(var a=r?e.allBodies(o):o.bodies,v=0;v<a.length;v++){var p=a[v],P=p.position.x-t.x,w=p.position.y-t.y;u.setPosition(p,{x:t.x+P*f,y:t.y+w*i}),u.scale(p,f,i)}return o},e.bounds=function(o){for(var f=e.allBodies(o),i=[],t=0;t<f.length;t+=1){var r=f[t];i.push(r.bounds.min,r.bounds.max)}return n.create(i)}})()},function(M,E,g){var e={};M.exports=e;var l=g(3),s=g(2),n=g(7);g(16);var u=g(0),o=g(1),f=g(11);(function(){e._inertiaScale=4,e._nextCollidingGroupId=1,e._nextNonCollidingGroupId=-1,e._nextCategory=1,e.create=function(t){var r={id:u.nextId(),type:"body",label:"Body",parts:[],plugin:{},angle:0,vertices:l.fromPath("L 0 0 L 40 0 L 40 40 L 0 40"),position:{x:0,y:0},force:{x:0,y:0},torque:0,positionImpulse:{x:0,y:0},constraintImpulse:{x:0,y:0,angle:0},totalContacts:0,speed:0,angularSpeed:0,velocity:{x:0,y:0},angularVelocity:0,isSensor:!1,isStatic:!1,isSleeping:!1,motion:0,sleepThreshold:60,density:.001,restitution:0,friction:.1,frictionStatic:.5,frictionAir:.01,collisionFilter:{category:1,mask:4294967295,group:0},slop:.05,timeScale:1,render:{visible:!0,opacity:1,strokeStyle:null,fillStyle:null,lineWidth:null,sprite:{xScale:1,yScale:1,xOffset:0,yOffset:0}},events:null,bounds:null,chamfer:null,circleRadius:0,positionPrev:null,anglePrev:0,parent:null,axes:null,area:0,mass:0,inertia:0,_original:null},a=u.extend(r,t);return i(a,t),a},e.nextGroup=function(t){return t?e._nextNonCollidingGroupId--:e._nextCollidingGroupId++},e.nextCategory=function(){return e._nextCategory=e._nextCategory<<1,e._nextCategory};var i=function(t,r){r=r||{},e.set(t,{bounds:t.bounds||o.create(t.vertices),positionPrev:t.positionPrev||s.clone(t.position),anglePrev:t.anglePrev||t.angle,vertices:t.vertices,parts:t.parts||[t],isStatic:t.isStatic,isSleeping:t.isSleeping,parent:t.parent||t}),l.rotate(t.vertices,t.angle,t.position),f.rotate(t.axes,t.angle),o.update(t.bounds,t.vertices,t.velocity),e.set(t,{axes:r.axes||t.axes,area:r.area||t.area,mass:r.mass||t.mass,inertia:r.inertia||t.inertia});var a=t.isStatic?"#14151f":u.choose(["#f19648","#f5d259","#f55a3c","#063e7b","#ececd1"]),v=t.isStatic?"#555":"#ccc",p=t.isStatic&&t.render.fillStyle===null?1:0;t.render.fillStyle=t.render.fillStyle||a,t.render.strokeStyle=t.render.strokeStyle||v,t.render.lineWidth=t.render.lineWidth||p,t.render.sprite.xOffset+=-(t.bounds.min.x-t.position.x)/(t.bounds.max.x-t.bounds.min.x),t.render.sprite.yOffset+=-(t.bounds.min.y-t.position.y)/(t.bounds.max.y-t.bounds.min.y)};e.set=function(t,r,a){var v;typeof r=="string"&&(v=r,r={},r[v]=a);for(v in r)if(!!Object.prototype.hasOwnProperty.call(r,v))switch(a=r[v],v){case"isStatic":e.setStatic(t,a);break;case"isSleeping":n.set(t,a);break;case"mass":e.setMass(t,a);break;case"density":e.setDensity(t,a);break;case"inertia":e.setInertia(t,a);break;case"vertices":e.setVertices(t,a);break;case"position":e.setPosition(t,a);break;case"angle":e.setAngle(t,a);break;case"velocity":e.setVelocity(t,a);break;case"angularVelocity":e.setAngularVelocity(t,a);break;case"parts":e.setParts(t,a);break;case"centre":e.setCentre(t,a);break;default:t[v]=a}},e.setStatic=function(t,r){for(var a=0;a<t.parts.length;a++){var v=t.parts[a];v.isStatic=r,r?(v._original={restitution:v.restitution,friction:v.friction,mass:v.mass,inertia:v.inertia,density:v.density,inverseMass:v.inverseMass,inverseInertia:v.inverseInertia},v.restitution=0,v.friction=1,v.mass=v.inertia=v.density=1/0,v.inverseMass=v.inverseInertia=0,v.positionPrev.x=v.position.x,v.positionPrev.y=v.position.y,v.anglePrev=v.angle,v.angularVelocity=0,v.speed=0,v.angularSpeed=0,v.motion=0):v._original&&(v.restitution=v._original.restitution,v.friction=v._original.friction,v.mass=v._original.mass,v.inertia=v._original.inertia,v.density=v._original.density,v.inverseMass=v._original.inverseMass,v.inverseInertia=v._original.inverseInertia,v._original=null)}},e.setMass=function(t,r){var a=t.inertia/(t.mass/6);t.inertia=a*(r/6),t.inverseInertia=1/t.inertia,t.mass=r,t.inverseMass=1/t.mass,t.density=t.mass/t.area},e.setDensity=function(t,r){e.setMass(t,r*t.area),t.density=r},e.setInertia=function(t,r){t.inertia=r,t.inverseInertia=1/t.inertia},e.setVertices=function(t,r){r[0].body===t?t.vertices=r:t.vertices=l.create(r,t),t.axes=f.fromVertices(t.vertices),t.area=l.area(t.vertices),e.setMass(t,t.density*t.area);var a=l.centre(t.vertices);l.translate(t.vertices,a,-1),e.setInertia(t,e._inertiaScale*l.inertia(t.vertices,t.mass)),l.translate(t.vertices,t.position),o.update(t.bounds,t.vertices,t.velocity)},e.setParts=function(t,r,a){var v;for(r=r.slice(0),t.parts.length=0,t.parts.push(t),t.parent=t,v=0;v<r.length;v++){var p=r[v];p!==t&&(p.parent=t,t.parts.push(p))}if(t.parts.length!==1){if(a=typeof a!="undefined"?a:!0,a){var P=[];for(v=0;v<r.length;v++)P=P.concat(r[v].vertices);l.clockwiseSort(P);var w=l.hull(P),c=l.centre(w);e.setVertices(t,w),l.translate(t.vertices,c)}var h=e._totalProperties(t);t.area=h.area,t.parent=t,t.position.x=h.centre.x,t.position.y=h.centre.y,t.positionPrev.x=h.centre.x,t.positionPrev.y=h.centre.y,e.setMass(t,h.mass),e.setInertia(t,h.inertia),e.setPosition(t,h.centre)}},e.setCentre=function(t,r,a){a?(t.positionPrev.x+=r.x,t.positionPrev.y+=r.y,t.position.x+=r.x,t.position.y+=r.y):(t.positionPrev.x=r.x-(t.position.x-t.positionPrev.x),t.positionPrev.y=r.y-(t.position.y-t.positionPrev.y),t.position.x=r.x,t.position.y=r.y)},e.setPosition=function(t,r){var a=s.sub(r,t.position);t.positionPrev.x+=a.x,t.positionPrev.y+=a.y;for(var v=0;v<t.parts.length;v++){var p=t.parts[v];p.position.x+=a.x,p.position.y+=a.y,l.translate(p.vertices,a),o.update(p.bounds,p.vertices,t.velocity)}},e.setAngle=function(t,r){var a=r-t.angle;t.anglePrev+=a;for(var v=0;v<t.parts.length;v++){var p=t.parts[v];p.angle+=a,l.rotate(p.vertices,a,t.position),f.rotate(p.axes,a),o.update(p.bounds,p.vertices,t.velocity),v>0&&s.rotateAbout(p.position,a,t.position,p.position)}},e.setVelocity=function(t,r){t.positionPrev.x=t.position.x-r.x,t.positionPrev.y=t.position.y-r.y,t.velocity.x=r.x,t.velocity.y=r.y,t.speed=s.magnitude(t.velocity)},e.setAngularVelocity=function(t,r){t.anglePrev=t.angle-r,t.angularVelocity=r,t.angularSpeed=Math.abs(t.angularVelocity)},e.translate=function(t,r){e.setPosition(t,s.add(t.position,r))},e.rotate=function(t,r,a){if(!a)e.setAngle(t,t.angle+r);else{var v=Math.cos(r),p=Math.sin(r),P=t.position.x-a.x,w=t.position.y-a.y;e.setPosition(t,{x:a.x+(P*v-w*p),y:a.y+(P*p+w*v)}),e.setAngle(t,t.angle+r)}},e.scale=function(t,r,a,v){var p=0,P=0;v=v||t.position;for(var w=0;w<t.parts.length;w++){var c=t.parts[w];l.scale(c.vertices,r,a,v),c.axes=f.fromVertices(c.vertices),c.area=l.area(c.vertices),e.setMass(c,t.density*c.area),l.translate(c.vertices,{x:-c.position.x,y:-c.position.y}),e.setInertia(c,e._inertiaScale*l.inertia(c.vertices,c.mass)),l.translate(c.vertices,{x:c.position.x,y:c.position.y}),w>0&&(p+=c.area,P+=c.inertia),c.position.x=v.x+(c.position.x-v.x)*r,c.position.y=v.y+(c.position.y-v.y)*a,o.update(c.bounds,c.vertices,t.velocity)}t.parts.length>1&&(t.area=p,t.isStatic||(e.setMass(t,t.density*p),e.setInertia(t,P))),t.circleRadius&&(r===a?t.circleRadius*=r:t.circleRadius=null)},e.update=function(t,r,a,v){var p=Math.pow(r*a*t.timeScale,2),P=1-t.frictionAir*a*t.timeScale,w=t.position.x-t.positionPrev.x,c=t.position.y-t.positionPrev.y;t.velocity.x=w*P*v+t.force.x/t.mass*p,t.velocity.y=c*P*v+t.force.y/t.mass*p,t.positionPrev.x=t.position.x,t.positionPrev.y=t.position.y,t.position.x+=t.velocity.x,t.position.y+=t.velocity.y,t.angularVelocity=(t.angle-t.anglePrev)*P*v+t.torque/t.inertia*p,t.anglePrev=t.angle,t.angle+=t.angularVelocity,t.speed=s.magnitude(t.velocity),t.angularSpeed=Math.abs(t.angularVelocity);for(var h=0;h<t.parts.length;h++){var m=t.parts[h];l.translate(m.vertices,t.velocity),h>0&&(m.position.x+=t.velocity.x,m.position.y+=t.velocity.y),t.angularVelocity!==0&&(l.rotate(m.vertices,t.angularVelocity,t.position),f.rotate(m.axes,t.angularVelocity),h>0&&s.rotateAbout(m.position,t.angularVelocity,t.position,m.position)),o.update(m.bounds,m.vertices,t.velocity)}},e.applyForce=function(t,r,a){t.force.x+=a.x,t.force.y+=a.y;var v={x:r.x-t.position.x,y:r.y-t.position.y};t.torque+=v.x*a.y-v.y*a.x},e._totalProperties=function(t){for(var r={mass:0,area:0,inertia:0,centre:{x:0,y:0}},a=t.parts.length===1?0:1;a<t.parts.length;a++){var v=t.parts[a],p=v.mass!==1/0?v.mass:1;r.mass+=p,r.area+=v.area,r.inertia+=v.inertia,r.centre=s.add(r.centre,s.mult(v.position,p))}return r.centre=s.div(r.centre,r.mass),r}})()},function(M,E,g){var e={};M.exports=e;var l=g(4);(function(){e._motionWakeThreshold=.18,e._motionSleepThreshold=.08,e._minBias=.9,e.update=function(s,n){for(var u=n*n*n,o=0;o<s.length;o++){var f=s[o],i=f.speed*f.speed+f.angularSpeed*f.angularSpeed;if(f.force.x!==0||f.force.y!==0){e.set(f,!1);continue}var t=Math.min(f.motion,i),r=Math.max(f.motion,i);f.motion=e._minBias*t+(1-e._minBias)*r,f.sleepThreshold>0&&f.motion<e._motionSleepThreshold*u?(f.sleepCounter+=1,f.sleepCounter>=f.sleepThreshold&&e.set(f,!0)):f.sleepCounter>0&&(f.sleepCounter-=1)}},e.afterCollisions=function(s,n){for(var u=n*n*n,o=0;o<s.length;o++){var f=s[o];if(!!f.isActive){var i=f.collision,t=i.bodyA.parent,r=i.bodyB.parent;if(!(t.isSleeping&&r.isSleeping||t.isStatic||r.isStatic)&&(t.isSleeping||r.isSleeping)){var a=t.isSleeping&&!t.isStatic?t:r,v=a===t?r:t;!a.isStatic&&v.motion>e._motionWakeThreshold*u&&e.set(a,!1)}}}},e.set=function(s,n){var u=s.isSleeping;n?(s.isSleeping=!0,s.sleepCounter=s.sleepThreshold,s.positionImpulse.x=0,s.positionImpulse.y=0,s.positionPrev.x=s.position.x,s.positionPrev.y=s.position.y,s.anglePrev=s.angle,s.speed=0,s.angularSpeed=0,s.motion=0,u||l.trigger(s,"sleepStart")):(s.isSleeping=!1,s.sleepCounter=0,u&&l.trigger(s,"sleepEnd"))}})()},function(M,E,g){var e={};M.exports=e;var l=g(3),s=g(9);(function(){var n=[],u={overlap:0,axis:null},o={overlap:0,axis:null};e.create=function(f,i){return{pair:null,collided:!1,bodyA:f,bodyB:i,parentA:f.parent,parentB:i.parent,depth:0,normal:{x:0,y:0},tangent:{x:0,y:0},penetration:{x:0,y:0},supports:[]}},e.collides=function(f,i,t){if(e._overlapAxes(u,f.vertices,i.vertices,f.axes),u.overlap<=0||(e._overlapAxes(o,i.vertices,f.vertices,i.axes),o.overlap<=0))return null;var r=t&&t.table[s.id(f,i)],a;r?a=r.collision:(a=e.create(f,i),a.collided=!0,a.bodyA=f.id<i.id?f:i,a.bodyB=f.id<i.id?i:f,a.parentA=a.bodyA.parent,a.parentB=a.bodyB.parent),f=a.bodyA,i=a.bodyB;var v;u.overlap<o.overlap?v=u:v=o;var p=a.normal,P=a.supports,w=v.axis,c=w.x,h=w.y;c*(i.position.x-f.position.x)+h*(i.position.y-f.position.y)<0?(p.x=c,p.y=h):(p.x=-c,p.y=-h),a.tangent.x=-p.y,a.tangent.y=p.x,a.depth=v.overlap,a.penetration.x=p.x*a.depth,a.penetration.y=p.y*a.depth;var m=e._findSupports(f,i,p,1),d=0;if(l.contains(f.vertices,m[0])&&(P[d++]=m[0]),l.contains(f.vertices,m[1])&&(P[d++]=m[1]),d<2){var S=e._findSupports(i,f,p,-1);l.contains(i.vertices,S[0])&&(P[d++]=S[0]),d<2&&l.contains(i.vertices,S[1])&&(P[d++]=S[1])}return d===0&&(P[d++]=m[0]),P.length=d,a},e._overlapAxes=function(f,i,t,r){var a=i.length,v=t.length,p=i[0].x,P=i[0].y,w=t[0].x,c=t[0].y,h=r.length,m=Number.MAX_VALUE,d=0,S,y,C,x,A,B;for(A=0;A<h;A++){var L=r[A],R=L.x,F=L.y,k=p*R+P*F,H=w*R+c*F,O=k,D=H;for(B=1;B<a;B+=1)x=i[B].x*R+i[B].y*F,x>O?O=x:x<k&&(k=x);for(B=1;B<v;B+=1)x=t[B].x*R+t[B].y*F,x>D?D=x:x<H&&(H=x);if(y=O-H,C=D-k,S=y<C?y:C,S<m&&(m=S,d=A,S<=0))break}f.axis=r[d],f.overlap=m},e._projectToAxis=function(f,i,t){for(var r=i[0].x*t.x+i[0].y*t.y,a=r,v=1;v<i.length;v+=1){var p=i[v].x*t.x+i[v].y*t.y;p>a?a=p:p<r&&(r=p)}f.min=r,f.max=a},e._findSupports=function(f,i,t,r){var a=i.vertices,v=a.length,p=f.position.x,P=f.position.y,w=t.x*r,c=t.y*r,h=Number.MAX_VALUE,m,d,S,y,C;for(C=0;C<v;C+=1)d=a[C],y=w*(p-d.x)+c*(P-d.y),y<h&&(h=y,m=d);return S=a[(v+m.index-1)%v],h=w*(p-S.x)+c*(P-S.y),d=a[(m.index+1)%v],w*(p-d.x)+c*(P-d.y)<h?(n[0]=m,n[1]=d,n):(n[0]=m,n[1]=S,n)}})()},function(M,E,g){var e={};M.exports=e;var l=g(17);(function(){e.create=function(s,n){var u=s.bodyA,o=s.bodyB,f={id:e.id(u,o),bodyA:u,bodyB:o,collision:s,contacts:[],activeContacts:[],separation:0,isActive:!0,confirmedActive:!0,isSensor:u.isSensor||o.isSensor,timeCreated:n,timeUpdated:n,inverseMass:0,friction:0,frictionStatic:0,restitution:0,slop:0};return e.update(f,s,n),f},e.update=function(s,n,u){var o=s.contacts,f=n.supports,i=s.activeContacts,t=n.parentA,r=n.parentB,a=t.vertices.length;s.isActive=!0,s.timeUpdated=u,s.collision=n,s.separation=n.depth,s.inverseMass=t.inverseMass+r.inverseMass,s.friction=t.friction<r.friction?t.friction:r.friction,s.frictionStatic=t.frictionStatic>r.frictionStatic?t.frictionStatic:r.frictionStatic,s.restitution=t.restitution>r.restitution?t.restitution:r.restitution,s.slop=t.slop>r.slop?t.slop:r.slop,n.pair=s,i.length=0;for(var v=0;v<f.length;v++){var p=f[v],P=p.body===t?p.index:a+p.index,w=o[P];w?i.push(w):i.push(o[P]=l.create(p))}},e.setActive=function(s,n,u){n?(s.isActive=!0,s.timeUpdated=u):(s.isActive=!1,s.activeContacts.length=0)},e.id=function(s,n){return s.id<n.id?"A"+s.id+"B"+n.id:"A"+n.id+"B"+s.id}})()},function(M,E,g){var e={};M.exports=e;var l=g(3),s=g(2),n=g(7),u=g(1),o=g(11),f=g(0);(function(){e._warming=.4,e._torqueDampen=1,e._minLength=1e-6,e.create=function(i){var t=i;t.bodyA&&!t.pointA&&(t.pointA={x:0,y:0}),t.bodyB&&!t.pointB&&(t.pointB={x:0,y:0});var r=t.bodyA?s.add(t.bodyA.position,t.pointA):t.pointA,a=t.bodyB?s.add(t.bodyB.position,t.pointB):t.pointB,v=s.magnitude(s.sub(r,a));t.length=typeof t.length!="undefined"?t.length:v,t.id=t.id||f.nextId(),t.label=t.label||"Constraint",t.type="constraint",t.stiffness=t.stiffness||(t.length>0?1:.7),t.damping=t.damping||0,t.angularStiffness=t.angularStiffness||0,t.angleA=t.bodyA?t.bodyA.angle:t.angleA,t.angleB=t.bodyB?t.bodyB.angle:t.angleB,t.plugin={};var p={visible:!0,lineWidth:2,strokeStyle:"#ffffff",type:"line",anchors:!0};return t.length===0&&t.stiffness>.1?(p.type="pin",p.anchors=!1):t.stiffness<.9&&(p.type="spring"),t.render=f.extend(p,t.render),t},e.preSolveAll=function(i){for(var t=0;t<i.length;t+=1){var r=i[t],a=r.constraintImpulse;r.isStatic||a.x===0&&a.y===0&&a.angle===0||(r.position.x+=a.x,r.position.y+=a.y,r.angle+=a.angle)}},e.solveAll=function(i,t){for(var r=0;r<i.length;r+=1){var a=i[r],v=!a.bodyA||a.bodyA&&a.bodyA.isStatic,p=!a.bodyB||a.bodyB&&a.bodyB.isStatic;(v||p)&&e.solve(i[r],t)}for(r=0;r<i.length;r+=1)a=i[r],v=!a.bodyA||a.bodyA&&a.bodyA.isStatic,p=!a.bodyB||a.bodyB&&a.bodyB.isStatic,!v&&!p&&e.solve(i[r],t)},e.solve=function(i,t){var r=i.bodyA,a=i.bodyB,v=i.pointA,p=i.pointB;if(!(!r&&!a)){r&&!r.isStatic&&(s.rotate(v,r.angle-i.angleA,v),i.angleA=r.angle),a&&!a.isStatic&&(s.rotate(p,a.angle-i.angleB,p),i.angleB=a.angle);var P=v,w=p;if(r&&(P=s.add(r.position,v)),a&&(w=s.add(a.position,p)),!(!P||!w)){var c=s.sub(P,w),h=s.magnitude(c);h<e._minLength&&(h=e._minLength);var m=(h-i.length)/h,d=i.stiffness<1?i.stiffness*t:i.stiffness,S=s.mult(c,m*d),y=(r?r.inverseMass:0)+(a?a.inverseMass:0),C=(r?r.inverseInertia:0)+(a?a.inverseInertia:0),x=y+C,A,B,L,R,F;if(i.damping){var k=s.create();L=s.div(c,h),F=s.sub(a&&s.sub(a.position,a.positionPrev)||k,r&&s.sub(r.position,r.positionPrev)||k),R=s.dot(L,F)}r&&!r.isStatic&&(B=r.inverseMass/y,r.constraintImpulse.x-=S.x*B,r.constraintImpulse.y-=S.y*B,r.position.x-=S.x*B,r.position.y-=S.y*B,i.damping&&(r.positionPrev.x-=i.damping*L.x*R*B,r.positionPrev.y-=i.damping*L.y*R*B),A=s.cross(v,S)/x*e._torqueDampen*r.inverseInertia*(1-i.angularStiffness),r.constraintImpulse.angle-=A,r.angle-=A),a&&!a.isStatic&&(B=a.inverseMass/y,a.constraintImpulse.x+=S.x*B,a.constraintImpulse.y+=S.y*B,a.position.x+=S.x*B,a.position.y+=S.y*B,i.damping&&(a.positionPrev.x+=i.damping*L.x*R*B,a.positionPrev.y+=i.damping*L.y*R*B),A=s.cross(p,S)/x*e._torqueDampen*a.inverseInertia*(1-i.angularStiffness),a.constraintImpulse.angle+=A,a.angle+=A)}}},e.postSolveAll=function(i){for(var t=0;t<i.length;t++){var r=i[t],a=r.constraintImpulse;if(!(r.isStatic||a.x===0&&a.y===0&&a.angle===0)){n.set(r,!1);for(var v=0;v<r.parts.length;v++){var p=r.parts[v];l.translate(p.vertices,a),v>0&&(p.position.x+=a.x,p.position.y+=a.y),a.angle!==0&&(l.rotate(p.vertices,a.angle,r.position),o.rotate(p.axes,a.angle),v>0&&s.rotateAbout(p.position,a.angle,r.position,p.position)),u.update(p.bounds,p.vertices,r.velocity)}a.angle*=e._warming,a.x*=e._warming,a.y*=e._warming}}},e.pointAWorld=function(i){return{x:(i.bodyA?i.bodyA.position.x:0)+i.pointA.x,y:(i.bodyA?i.bodyA.position.y:0)+i.pointA.y}},e.pointBWorld=function(i){return{x:(i.bodyB?i.bodyB.position.x:0)+i.pointB.x,y:(i.bodyB?i.bodyB.position.y:0)+i.pointB.y}}})()},function(M,E,g){var e={};M.exports=e;var l=g(2),s=g(0);(function(){e.fromVertices=function(n){for(var u={},o=0;o<n.length;o++){var f=(o+1)%n.length,i=l.normalise({x:n[f].y-n[o].y,y:n[o].x-n[f].x}),t=i.y===0?1/0:i.x/i.y;t=t.toFixed(3).toString(),u[t]=i}return s.values(u)},e.rotate=function(n,u){if(u!==0)for(var o=Math.cos(u),f=Math.sin(u),i=0;i<n.length;i++){var t=n[i],r;r=t.x*o-t.y*f,t.y=t.x*f+t.y*o,t.x=r}}})()},function(M,E,g){var e={};M.exports=e;var l=g(3),s=g(0),n=g(6),u=g(1),o=g(2);(function(){e.rectangle=function(f,i,t,r,a){a=a||{};var v={label:"Rectangle Body",position:{x:f,y:i},vertices:l.fromPath("L 0 0 L "+t+" 0 L "+t+" "+r+" L 0 "+r)};if(a.chamfer){var p=a.chamfer;v.vertices=l.chamfer(v.vertices,p.radius,p.quality,p.qualityMin,p.qualityMax),delete a.chamfer}return n.create(s.extend({},v,a))},e.trapezoid=function(f,i,t,r,a,v){v=v||{},a*=.5;var p=(1-a*2)*t,P=t*a,w=P+p,c=w+P,h;a<.5?h="L 0 0 L "+P+" "+-r+" L "+w+" "+-r+" L "+c+" 0":h="L 0 0 L "+w+" "+-r+" L "+c+" 0";var m={label:"Trapezoid Body",position:{x:f,y:i},vertices:l.fromPath(h)};if(v.chamfer){var d=v.chamfer;m.vertices=l.chamfer(m.vertices,d.radius,d.quality,d.qualityMin,d.qualityMax),delete v.chamfer}return n.create(s.extend({},m,v))},e.circle=function(f,i,t,r,a){r=r||{};var v={label:"Circle Body",circleRadius:t};a=a||25;var p=Math.ceil(Math.max(10,Math.min(a,t)));return p%2===1&&(p+=1),e.polygon(f,i,p,t,s.extend({},v,r))},e.polygon=function(f,i,t,r,a){if(a=a||{},t<3)return e.circle(f,i,r,a);for(var v=2*Math.PI/t,p="",P=v*.5,w=0;w<t;w+=1){var c=P+w*v,h=Math.cos(c)*r,m=Math.sin(c)*r;p+="L "+h.toFixed(3)+" "+m.toFixed(3)+" "}var d={label:"Polygon Body",position:{x:f,y:i},vertices:l.fromPath(p)};if(a.chamfer){var S=a.chamfer;d.vertices=l.chamfer(d.vertices,S.radius,S.quality,S.qualityMin,S.qualityMax),delete a.chamfer}return n.create(s.extend({},d,a))},e.fromVertices=function(f,i,t,r,a,v,p,P){var w=s.getDecomp(),c,h,m,d,S,y,C,x,A,B,L;for(c=Boolean(w&&w.quickDecomp),r=r||{},m=[],a=typeof a!="undefined"?a:!1,v=typeof v!="undefined"?v:.01,p=typeof p!="undefined"?p:10,P=typeof P!="undefined"?P:.01,s.isArray(t[0])||(t=[t]),B=0;B<t.length;B+=1)if(y=t[B],d=l.isConvex(y),S=!d,S&&!c&&s.warnOnce("Bodies.fromVertices: Install the 'poly-decomp' library and use Common.setDecomp or provide 'decomp' as a global to decompose concave vertices."),d||!c)d?y=l.clockwiseSort(y):y=l.hull(y),m.push({position:{x:f,y:i},vertices:y});else{var R=y.map(function(U){return[U.x,U.y]});w.makeCCW(R),v!==!1&&w.removeCollinearPoints(R,v),P!==!1&&w.removeDuplicatePoints&&w.removeDuplicatePoints(R,P);var F=w.quickDecomp(R);for(C=0;C<F.length;C++){var k=F[C],H=k.map(function(U){return{x:U[0],y:U[1]}});p>0&&l.area(H)<p||m.push({position:l.centre(H),vertices:H})}}for(C=0;C<m.length;C++)m[C]=n.create(s.extend(m[C],r));if(a){var O=5;for(C=0;C<m.length;C++){var D=m[C];for(x=C+1;x<m.length;x++){var W=m[x];if(u.overlaps(D.bounds,W.bounds)){var $=D.vertices,V=W.vertices;for(A=0;A<D.vertices.length;A++)for(L=0;L<W.vertices.length;L++){var Z=o.magnitudeSquared(o.sub($[(A+1)%$.length],V[L])),z=o.magnitudeSquared(o.sub($[A],V[(L+1)%V.length]));Z<O&&z<O&&($[A].isInternal=!0,V[L].isInternal=!0)}}}}}return m.length>1?(h=n.create(s.extend({parts:m.slice(0)},r)),n.setPosition(h,{x:f,y:i}),h):m[0]}})()},function(M,E,g){var e={};M.exports=e;var l=g(0);(function(){e.create=function(s){var n={};return s||l.log("Mouse.create: element was undefined, defaulting to document.body","warn"),n.element=s||document.body,n.absolute={x:0,y:0},n.position={x:0,y:0},n.mousedownPosition={x:0,y:0},n.mouseupPosition={x:0,y:0},n.offset={x:0,y:0},n.scale={x:1,y:1},n.wheelDelta=0,n.button=-1,n.pixelRatio=parseInt(n.element.getAttribute("data-pixel-ratio"),10)||1,n.sourceEvents={mousemove:null,mousedown:null,mouseup:null,mousewheel:null},n.mousemove=function(u){var o=e._getRelativeMousePosition(u,n.element,n.pixelRatio),f=u.changedTouches;f&&(n.button=0,u.preventDefault()),n.absolute.x=o.x,n.absolute.y=o.y,n.position.x=n.absolute.x*n.scale.x+n.offset.x,n.position.y=n.absolute.y*n.scale.y+n.offset.y,n.sourceEvents.mousemove=u},n.mousedown=function(u){var o=e._getRelativeMousePosition(u,n.element,n.pixelRatio),f=u.changedTouches;f?(n.button=0,u.preventDefault()):n.button=u.button,n.absolute.x=o.x,n.absolute.y=o.y,n.position.x=n.absolute.x*n.scale.x+n.offset.x,n.position.y=n.absolute.y*n.scale.y+n.offset.y,n.mousedownPosition.x=n.position.x,n.mousedownPosition.y=n.position.y,n.sourceEvents.mousedown=u},n.mouseup=function(u){var o=e._getRelativeMousePosition(u,n.element,n.pixelRatio),f=u.changedTouches;f&&u.preventDefault(),n.button=-1,n.absolute.x=o.x,n.absolute.y=o.y,n.position.x=n.absolute.x*n.scale.x+n.offset.x,n.position.y=n.absolute.y*n.scale.y+n.offset.y,n.mouseupPosition.x=n.position.x,n.mouseupPosition.y=n.position.y,n.sourceEvents.mouseup=u},n.mousewheel=function(u){n.wheelDelta=Math.max(-1,Math.min(1,u.wheelDelta||-u.detail)),u.preventDefault()},e.setElement(n,n.element),n},e.setElement=function(s,n){s.element=n,n.addEventListener("mousemove",s.mousemove),n.addEventListener("mousedown",s.mousedown),n.addEventListener("mouseup",s.mouseup),n.addEventListener("mousewheel",s.mousewheel),n.addEventListener("DOMMouseScroll",s.mousewheel),n.addEventListener("touchmove",s.mousemove),n.addEventListener("touchstart",s.mousedown),n.addEventListener("touchend",s.mouseup)},e.clearSourceEvents=function(s){s.sourceEvents.mousemove=null,s.sourceEvents.mousedown=null,s.sourceEvents.mouseup=null,s.sourceEvents.mousewheel=null,s.wheelDelta=0},e.setOffset=function(s,n){s.offset.x=n.x,s.offset.y=n.y,s.position.x=s.absolute.x*s.scale.x+s.offset.x,s.position.y=s.absolute.y*s.scale.y+s.offset.y},e.setScale=function(s,n){s.scale.x=n.x,s.scale.y=n.y,s.position.x=s.absolute.x*s.scale.x+s.offset.x,s.position.y=s.absolute.y*s.scale.y+s.offset.y},e._getRelativeMousePosition=function(s,n,u){var o=n.getBoundingClientRect(),f=document.documentElement||document.body.parentNode||document.body,i=window.pageXOffset!==void 0?window.pageXOffset:f.scrollLeft,t=window.pageYOffset!==void 0?window.pageYOffset:f.scrollTop,r=s.changedTouches,a,v;return r?(a=r[0].pageX-o.left-i,v=r[0].pageY-o.top-t):(a=s.pageX-o.left-i,v=s.pageY-o.top-t),{x:a/(n.clientWidth/(n.width||n.clientWidth)*u),y:v/(n.clientHeight/(n.height||n.clientHeight)*u)}}})()},function(M,E,g){var e={};M.exports=e;var l=g(0),s=g(8);(function(){e.create=function(n){var u={bodies:[],pairs:null};return l.extend(u,n)},e.setBodies=function(n,u){n.bodies=u.slice(0)},e.clear=function(n){n.bodies=[]},e.collisions=function(n){var u=[],o=n.pairs,f=n.bodies,i=f.length,t=e.canCollide,r=s.collides,a,v;for(f.sort(e._compareBoundsX),a=0;a<i;a++){var p=f[a],P=p.bounds,w=p.bounds.max.x,c=p.bounds.max.y,h=p.bounds.min.y,m=p.isStatic||p.isSleeping,d=p.parts.length,S=d===1;for(v=a+1;v<i;v++){var y=f[v],C=y.bounds;if(C.min.x>w)break;if(!(c<C.min.y||h>C.max.y)&&!(m&&(y.isStatic||y.isSleeping))&&!!t(p.collisionFilter,y.collisionFilter)){var x=y.parts.length;if(S&&x===1){var A=r(p,y,o);A&&u.push(A)}else for(var B=d>1?1:0,L=x>1?1:0,R=B;R<d;R++)for(var F=p.parts[R],P=F.bounds,k=L;k<x;k++){var H=y.parts[k],C=H.bounds;if(!(P.min.x>C.max.x||P.max.x<C.min.x||P.max.y<C.min.y||P.min.y>C.max.y)){var A=r(F,H,o);A&&u.push(A)}}}}}return u},e.canCollide=function(n,u){return n.group===u.group&&n.group!==0?n.group>0:(n.mask&u.category)!==0&&(u.mask&n.category)!==0},e._compareBoundsX=function(n,u){return n.bounds.min.x-u.bounds.min.x}})()},function(M,E,g){var e={};M.exports=e;var l=g(0);(function(){e._registry={},e.register=function(s){if(e.isPlugin(s)||l.warn("Plugin.register:",e.toString(s),"does not implement all required fields."),s.name in e._registry){var n=e._registry[s.name],u=e.versionParse(s.version).number,o=e.versionParse(n.version).number;u>o?(l.warn("Plugin.register:",e.toString(n),"was upgraded to",e.toString(s)),e._registry[s.name]=s):u<o?l.warn("Plugin.register:",e.toString(n),"can not be downgraded to",e.toString(s)):s!==n&&l.warn("Plugin.register:",e.toString(s),"is already registered to different plugin object")}else e._registry[s.name]=s;return s},e.resolve=function(s){return e._registry[e.dependencyParse(s).name]},e.toString=function(s){return typeof s=="string"?s:(s.name||"anonymous")+"@"+(s.version||s.range||"0.0.0")},e.isPlugin=function(s){return s&&s.name&&s.version&&s.install},e.isUsed=function(s,n){return s.used.indexOf(n)>-1},e.isFor=function(s,n){var u=s.for&&e.dependencyParse(s.for);return!s.for||n.name===u.name&&e.versionSatisfies(n.version,u.range)},e.use=function(s,n){if(s.uses=(s.uses||[]).concat(n||[]),s.uses.length===0){l.warn("Plugin.use:",e.toString(s),"does not specify any dependencies to install.");return}for(var u=e.dependencies(s),o=l.topologicalSort(u),f=[],i=0;i<o.length;i+=1)if(o[i]!==s.name){var t=e.resolve(o[i]);if(!t){f.push("\u274C "+o[i]);continue}e.isUsed(s,t.name)||(e.isFor(t,s)||(l.warn("Plugin.use:",e.toString(t),"is for",t.for,"but installed on",e.toString(s)+"."),t._warned=!0),t.install?t.install(s):(l.warn("Plugin.use:",e.toString(t),"does not specify an install function."),t._warned=!0),t._warned?(f.push("\u{1F536} "+e.toString(t)),delete t._warned):f.push("\u2705 "+e.toString(t)),s.used.push(t.name))}f.length>0&&l.info(f.join("  "))},e.dependencies=function(s,n){var u=e.dependencyParse(s),o=u.name;if(n=n||{},!(o in n)){s=e.resolve(s)||s,n[o]=l.map(s.uses||[],function(i){e.isPlugin(i)&&e.register(i);var t=e.dependencyParse(i),r=e.resolve(i);return r&&!e.versionSatisfies(r.version,t.range)?(l.warn("Plugin.dependencies:",e.toString(r),"does not satisfy",e.toString(t),"used by",e.toString(u)+"."),r._warned=!0,s._warned=!0):r||(l.warn("Plugin.dependencies:",e.toString(i),"used by",e.toString(u),"could not be resolved."),s._warned=!0),t.name});for(var f=0;f<n[o].length;f+=1)e.dependencies(n[o][f],n);return n}},e.dependencyParse=function(s){if(l.isString(s)){var n=/^[\w-]+(@(\*|[\^~]?\d+\.\d+\.\d+(-[0-9A-Za-z-+]+)?))?$/;return n.test(s)||l.warn("Plugin.dependencyParse:",s,"is not a valid dependency string."),{name:s.split("@")[0],range:s.split("@")[1]||"*"}}return{name:s.name,range:s.range||s.version}},e.versionParse=function(s){var n=/^(\*)|(\^|~|>=|>)?\s*((\d+)\.(\d+)\.(\d+))(-[0-9A-Za-z-+]+)?$/;n.test(s)||l.warn("Plugin.versionParse:",s,"is not a valid version or range.");var u=n.exec(s),o=Number(u[4]),f=Number(u[5]),i=Number(u[6]);return{isRange:Boolean(u[1]||u[2]),version:u[3],range:s,operator:u[1]||u[2]||"",major:o,minor:f,patch:i,parts:[o,f,i],prerelease:u[7],number:o*1e8+f*1e4+i}},e.versionSatisfies=function(s,n){n=n||"*";var u=e.versionParse(n),o=e.versionParse(s);if(u.isRange){if(u.operator==="*"||s==="*")return!0;if(u.operator===">")return o.number>u.number;if(u.operator===">=")return o.number>=u.number;if(u.operator==="~")return o.major===u.major&&o.minor===u.minor&&o.patch>=u.patch;if(u.operator==="^")return u.major>0?o.major===u.major&&o.number>=u.number:u.minor>0?o.minor===u.minor&&o.patch>=u.patch:o.patch===u.patch}return s===n||s==="*"}})()},function(M,E,g){var e={};M.exports=e;var l=g(0),s=g(5),n=g(1),u=g(4),o=g(2),f=g(13);(function(){var i,t;typeof window!="undefined"&&(i=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||function(c){window.setTimeout(function(){c(l.now())},1e3/60)},t=window.cancelAnimationFrame||window.mozCancelAnimationFrame||window.webkitCancelAnimationFrame||window.msCancelAnimationFrame),e._goodFps=30,e._goodDelta=1e3/60,e.create=function(c){var h={controller:e,engine:null,element:null,canvas:null,mouse:null,frameRequestId:null,timing:{historySize:60,delta:0,deltaHistory:[],lastTime:0,lastTimestamp:0,lastElapsed:0,timestampElapsed:0,timestampElapsedHistory:[],engineDeltaHistory:[],engineElapsedHistory:[],elapsedHistory:[]},options:{width:800,height:600,pixelRatio:1,background:"#14151f",wireframeBackground:"#14151f",hasBounds:!!c.bounds,enabled:!0,wireframes:!0,showSleeping:!0,showDebug:!1,showStats:!1,showPerformance:!1,showBounds:!1,showVelocity:!1,showCollisions:!1,showSeparations:!1,showAxes:!1,showPositions:!1,showAngleIndicator:!1,showIds:!1,showVertexNumbers:!1,showConvexHulls:!1,showInternalEdges:!1,showMousePosition:!1}},m=l.extend(h,c);return m.canvas&&(m.canvas.width=m.options.width||m.canvas.width,m.canvas.height=m.options.height||m.canvas.height),m.mouse=c.mouse,m.engine=c.engine,m.canvas=m.canvas||v(m.options.width,m.options.height),m.context=m.canvas.getContext("2d"),m.textures={},m.bounds=m.bounds||{min:{x:0,y:0},max:{x:m.canvas.width,y:m.canvas.height}},m.options.showBroadphase=!1,m.options.pixelRatio!==1&&e.setPixelRatio(m,m.options.pixelRatio),l.isElement(m.element)?m.element.appendChild(m.canvas):m.canvas.parentNode||l.log("Render.create: options.element was undefined, render.canvas was created but not appended","warn"),m},e.run=function(c){(function h(m){c.frameRequestId=i(h),r(c,m),e.world(c,m),(c.options.showStats||c.options.showDebug)&&e.stats(c,c.context,m),(c.options.showPerformance||c.options.showDebug)&&e.performance(c,c.context,m)})()},e.stop=function(c){t(c.frameRequestId)},e.setPixelRatio=function(c,h){var m=c.options,d=c.canvas;h==="auto"&&(h=p(d)),m.pixelRatio=h,d.setAttribute("data-pixel-ratio",h),d.width=m.width*h,d.height=m.height*h,d.style.width=m.width+"px",d.style.height=m.height+"px"},e.lookAt=function(c,h,m,d){d=typeof d!="undefined"?d:!0,h=l.isArray(h)?h:[h],m=m||{x:0,y:0};for(var S={min:{x:1/0,y:1/0},max:{x:-1/0,y:-1/0}},y=0;y<h.length;y+=1){var C=h[y],x=C.bounds?C.bounds.min:C.min||C.position||C,A=C.bounds?C.bounds.max:C.max||C.position||C;x&&A&&(x.x<S.min.x&&(S.min.x=x.x),A.x>S.max.x&&(S.max.x=A.x),x.y<S.min.y&&(S.min.y=x.y),A.y>S.max.y&&(S.max.y=A.y))}var B=S.max.x-S.min.x+2*m.x,L=S.max.y-S.min.y+2*m.y,R=c.canvas.height,F=c.canvas.width,k=F/R,H=B/L,O=1,D=1;H>k?D=H/k:O=k/H,c.options.hasBounds=!0,c.bounds.min.x=S.min.x,c.bounds.max.x=S.min.x+B*O,c.bounds.min.y=S.min.y,c.bounds.max.y=S.min.y+L*D,d&&(c.bounds.min.x+=B*.5-B*O*.5,c.bounds.max.x+=B*.5-B*O*.5,c.bounds.min.y+=L*.5-L*D*.5,c.bounds.max.y+=L*.5-L*D*.5),c.bounds.min.x-=m.x,c.bounds.max.x-=m.x,c.bounds.min.y-=m.y,c.bounds.max.y-=m.y,c.mouse&&(f.setScale(c.mouse,{x:(c.bounds.max.x-c.bounds.min.x)/c.canvas.width,y:(c.bounds.max.y-c.bounds.min.y)/c.canvas.height}),f.setOffset(c.mouse,c.bounds.min))},e.startViewTransform=function(c){var h=c.bounds.max.x-c.bounds.min.x,m=c.bounds.max.y-c.bounds.min.y,d=h/c.options.width,S=m/c.options.height;c.context.setTransform(c.options.pixelRatio/d,0,0,c.options.pixelRatio/S,0,0),c.context.translate(-c.bounds.min.x,-c.bounds.min.y)},e.endViewTransform=function(c){c.context.setTransform(c.options.pixelRatio,0,0,c.options.pixelRatio,0,0)},e.world=function(c,h){var m=l.now(),d=c.engine,S=d.world,y=c.canvas,C=c.context,x=c.options,A=c.timing,B=s.allBodies(S),L=s.allConstraints(S),R=x.wireframes?x.wireframeBackground:x.background,F=[],k=[],H,O={timestamp:d.timing.timestamp};if(u.trigger(c,"beforeRender",O),c.currentBackground!==R&&w(c,R),C.globalCompositeOperation="source-in",C.fillStyle="transparent",C.fillRect(0,0,y.width,y.height),C.globalCompositeOperation="source-over",x.hasBounds){for(H=0;H<B.length;H++){var D=B[H];n.overlaps(D.bounds,c.bounds)&&F.push(D)}for(H=0;H<L.length;H++){var W=L[H],$=W.bodyA,V=W.bodyB,Z=W.pointA,z=W.pointB;$&&(Z=o.add($.position,W.pointA)),V&&(z=o.add(V.position,W.pointB)),!(!Z||!z)&&(n.contains(c.bounds,Z)||n.contains(c.bounds,z))&&k.push(W)}e.startViewTransform(c),c.mouse&&(f.setScale(c.mouse,{x:(c.bounds.max.x-c.bounds.min.x)/c.options.width,y:(c.bounds.max.y-c.bounds.min.y)/c.options.height}),f.setOffset(c.mouse,c.bounds.min))}else k=L,F=B,c.options.pixelRatio!==1&&c.context.setTransform(c.options.pixelRatio,0,0,c.options.pixelRatio,0,0);!x.wireframes||d.enableSleeping&&x.showSleeping?e.bodies(c,F,C):(x.showConvexHulls&&e.bodyConvexHulls(c,F,C),e.bodyWireframes(c,F,C)),x.showBounds&&e.bodyBounds(c,F,C),(x.showAxes||x.showAngleIndicator)&&e.bodyAxes(c,F,C),x.showPositions&&e.bodyPositions(c,F,C),x.showVelocity&&e.bodyVelocity(c,F,C),x.showIds&&e.bodyIds(c,F,C),x.showSeparations&&e.separations(c,d.pairs.list,C),x.showCollisions&&e.collisions(c,d.pairs.list,C),x.showVertexNumbers&&e.vertexNumbers(c,F,C),x.showMousePosition&&e.mousePosition(c,c.mouse,C),e.constraints(k,C),x.hasBounds&&e.endViewTransform(c),u.trigger(c,"afterRender",O),A.lastElapsed=l.now()-m},e.stats=function(c,h,m){for(var d=c.engine,S=d.world,y=s.allBodies(S),C=0,x=55,A=44,B=0,L=0,R=0;R<y.length;R+=1)C+=y[R].parts.length;var F={Part:C,Body:y.length,Cons:s.allConstraints(S).length,Comp:s.allComposites(S).length,Pair:d.pairs.list.length};h.fillStyle="#0e0f19",h.fillRect(B,L,x*5.5,A),h.font="12px Arial",h.textBaseline="top",h.textAlign="right";for(var k in F){var H=F[k];h.fillStyle="#aaa",h.fillText(k,B+x,L+8),h.fillStyle="#eee",h.fillText(H,B+x,L+26),B+=x}},e.performance=function(c,h){var m=c.engine,d=c.timing,S=d.deltaHistory,y=d.elapsedHistory,C=d.timestampElapsedHistory,x=d.engineDeltaHistory,A=d.engineElapsedHistory,B=m.timing.lastDelta,L=a(S),R=a(y),F=a(x),k=a(A),H=a(C),O=H/L||0,D=1e3/L||0,W=4,$=12,V=60,Z=34,z=10,U=69;h.fillStyle="#0e0f19",h.fillRect(0,50,$*4+V*5+22,Z),e.status(h,z,U,V,W,S.length,Math.round(D)+" fps",D/e._goodFps,function(N){return S[N]/L-1}),e.status(h,z+$+V,U,V,W,x.length,B.toFixed(2)+" dt",e._goodDelta/B,function(N){return x[N]/F-1}),e.status(h,z+($+V)*2,U,V,W,A.length,k.toFixed(2)+" ut",1-k/e._goodFps,function(N){return A[N]/k-1}),e.status(h,z+($+V)*3,U,V,W,y.length,R.toFixed(2)+" rt",1-R/e._goodFps,function(N){return y[N]/R-1}),e.status(h,z+($+V)*4,U,V,W,C.length,O.toFixed(2)+" x",O*O*O,function(N){return(C[N]/S[N]/O||0)-1})},e.status=function(c,h,m,d,S,y,C,x,A){c.strokeStyle="#888",c.fillStyle="#444",c.lineWidth=1,c.fillRect(h,m+7,d,1),c.beginPath(),c.moveTo(h,m+7-S*l.clamp(.4*A(0),-2,2));for(var B=0;B<d;B+=1)c.lineTo(h+B,m+7-(B<y?S*l.clamp(.4*A(B),-2,2):0));c.stroke(),c.fillStyle="hsl("+l.clamp(25+95*x,0,120)+",100%,60%)",c.fillRect(h,m-7,4,4),c.font="12px Arial",c.textBaseline="middle",c.textAlign="right",c.fillStyle="#eee",c.fillText(C,h+d,m-5)},e.constraints=function(c,h){for(var m=h,d=0;d<c.length;d++){var S=c[d];if(!(!S.render.visible||!S.pointA||!S.pointB)){var y=S.bodyA,C=S.bodyB,x,A;if(y?x=o.add(y.position,S.pointA):x=S.pointA,S.render.type==="pin")m.beginPath(),m.arc(x.x,x.y,3,0,2*Math.PI),m.closePath();else{if(C?A=o.add(C.position,S.pointB):A=S.pointB,m.beginPath(),m.moveTo(x.x,x.y),S.render.type==="spring")for(var B=o.sub(A,x),L=o.perp(o.normalise(B)),R=Math.ceil(l.clamp(S.length/5,12,20)),F,k=1;k<R;k+=1)F=k%2===0?1:-1,m.lineTo(x.x+B.x*(k/R)+L.x*F*4,x.y+B.y*(k/R)+L.y*F*4);m.lineTo(A.x,A.y)}S.render.lineWidth&&(m.lineWidth=S.render.lineWidth,m.strokeStyle=S.render.strokeStyle,m.stroke()),S.render.anchors&&(m.fillStyle=S.render.strokeStyle,m.beginPath(),m.arc(x.x,x.y,3,0,2*Math.PI),m.arc(A.x,A.y,3,0,2*Math.PI),m.closePath(),m.fill())}}},e.bodies=function(c,h,m){var d=m;c.engine;var S=c.options,y=S.showInternalEdges||!S.wireframes,C,x,A,B;for(A=0;A<h.length;A++)if(C=h[A],!!C.render.visible){for(B=C.parts.length>1?1:0;B<C.parts.length;B++)if(x=C.parts[B],!!x.render.visible){if(S.showSleeping&&C.isSleeping?d.globalAlpha=.5*x.render.opacity:x.render.opacity!==1&&(d.globalAlpha=x.render.opacity),x.render.sprite&&x.render.sprite.texture&&!S.wireframes){var L=x.render.sprite,R=P(c,L.texture);d.translate(x.position.x,x.position.y),d.rotate(x.angle),d.drawImage(R,R.width*-L.xOffset*L.xScale,R.height*-L.yOffset*L.yScale,R.width*L.xScale,R.height*L.yScale),d.rotate(-x.angle),d.translate(-x.position.x,-x.position.y)}else{if(x.circleRadius)d.beginPath(),d.arc(x.position.x,x.position.y,x.circleRadius,0,2*Math.PI);else{d.beginPath(),d.moveTo(x.vertices[0].x,x.vertices[0].y);for(var F=1;F<x.vertices.length;F++)!x.vertices[F-1].isInternal||y?d.lineTo(x.vertices[F].x,x.vertices[F].y):d.moveTo(x.vertices[F].x,x.vertices[F].y),x.vertices[F].isInternal&&!y&&d.moveTo(x.vertices[(F+1)%x.vertices.length].x,x.vertices[(F+1)%x.vertices.length].y);d.lineTo(x.vertices[0].x,x.vertices[0].y),d.closePath()}S.wireframes?(d.lineWidth=1,d.strokeStyle="#bbb",d.stroke()):(d.fillStyle=x.render.fillStyle,x.render.lineWidth&&(d.lineWidth=x.render.lineWidth,d.strokeStyle=x.render.strokeStyle,d.stroke()),d.fill())}d.globalAlpha=1}}},e.bodyWireframes=function(c,h,m){var d=m,S=c.options.showInternalEdges,y,C,x,A,B;for(d.beginPath(),x=0;x<h.length;x++)if(y=h[x],!!y.render.visible)for(B=y.parts.length>1?1:0;B<y.parts.length;B++){for(C=y.parts[B],d.moveTo(C.vertices[0].x,C.vertices[0].y),A=1;A<C.vertices.length;A++)!C.vertices[A-1].isInternal||S?d.lineTo(C.vertices[A].x,C.vertices[A].y):d.moveTo(C.vertices[A].x,C.vertices[A].y),C.vertices[A].isInternal&&!S&&d.moveTo(C.vertices[(A+1)%C.vertices.length].x,C.vertices[(A+1)%C.vertices.length].y);d.lineTo(C.vertices[0].x,C.vertices[0].y)}d.lineWidth=1,d.strokeStyle="#bbb",d.stroke()},e.bodyConvexHulls=function(c,h,m){var d=m,S,y,C;for(d.beginPath(),y=0;y<h.length;y++)if(S=h[y],!(!S.render.visible||S.parts.length===1)){for(d.moveTo(S.vertices[0].x,S.vertices[0].y),C=1;C<S.vertices.length;C++)d.lineTo(S.vertices[C].x,S.vertices[C].y);d.lineTo(S.vertices[0].x,S.vertices[0].y)}d.lineWidth=1,d.strokeStyle="rgba(255,255,255,0.2)",d.stroke()},e.vertexNumbers=function(c,h,m){var d=m,S,y,C;for(S=0;S<h.length;S++){var x=h[S].parts;for(C=x.length>1?1:0;C<x.length;C++){var A=x[C];for(y=0;y<A.vertices.length;y++)d.fillStyle="rgba(255,255,255,0.2)",d.fillText(S+"_"+y,A.position.x+(A.vertices[y].x-A.position.x)*.8,A.position.y+(A.vertices[y].y-A.position.y)*.8)}}},e.mousePosition=function(c,h,m){var d=m;d.fillStyle="rgba(255,255,255,0.8)",d.fillText(h.position.x+"  "+h.position.y,h.position.x+5,h.position.y-5)},e.bodyBounds=function(c,h,m){var d=m;c.engine;var S=c.options;d.beginPath();for(var y=0;y<h.length;y++){var C=h[y];if(C.render.visible)for(var x=h[y].parts,A=x.length>1?1:0;A<x.length;A++){var B=x[A];d.rect(B.bounds.min.x,B.bounds.min.y,B.bounds.max.x-B.bounds.min.x,B.bounds.max.y-B.bounds.min.y)}}S.wireframes?d.strokeStyle="rgba(255,255,255,0.08)":d.strokeStyle="rgba(0,0,0,0.1)",d.lineWidth=1,d.stroke()},e.bodyAxes=function(c,h,m){var d=m;c.engine;var S=c.options,y,C,x,A;for(d.beginPath(),C=0;C<h.length;C++){var B=h[C],L=B.parts;if(!!B.render.visible)if(S.showAxes)for(x=L.length>1?1:0;x<L.length;x++)for(y=L[x],A=0;A<y.axes.length;A++){var R=y.axes[A];d.moveTo(y.position.x,y.position.y),d.lineTo(y.position.x+R.x*20,y.position.y+R.y*20)}else for(x=L.length>1?1:0;x<L.length;x++)for(y=L[x],A=0;A<y.axes.length;A++)d.moveTo(y.position.x,y.position.y),d.lineTo((y.vertices[0].x+y.vertices[y.vertices.length-1].x)/2,(y.vertices[0].y+y.vertices[y.vertices.length-1].y)/2)}S.wireframes?(d.strokeStyle="indianred",d.lineWidth=1):(d.strokeStyle="rgba(255, 255, 255, 0.4)",d.globalCompositeOperation="overlay",d.lineWidth=2),d.stroke(),d.globalCompositeOperation="source-over"},e.bodyPositions=function(c,h,m){var d=m;c.engine;var S=c.options,y,C,x,A;for(d.beginPath(),x=0;x<h.length;x++)if(y=h[x],!!y.render.visible)for(A=0;A<y.parts.length;A++)C=y.parts[A],d.arc(C.position.x,C.position.y,3,0,2*Math.PI,!1),d.closePath();for(S.wireframes?d.fillStyle="indianred":d.fillStyle="rgba(0,0,0,0.5)",d.fill(),d.beginPath(),x=0;x<h.length;x++)y=h[x],y.render.visible&&(d.arc(y.positionPrev.x,y.positionPrev.y,2,0,2*Math.PI,!1),d.closePath());d.fillStyle="rgba(255,165,0,0.8)",d.fill()},e.bodyVelocity=function(c,h,m){var d=m;d.beginPath();for(var S=0;S<h.length;S++){var y=h[S];!y.render.visible||(d.moveTo(y.position.x,y.position.y),d.lineTo(y.position.x+(y.position.x-y.positionPrev.x)*2,y.position.y+(y.position.y-y.positionPrev.y)*2))}d.lineWidth=3,d.strokeStyle="cornflowerblue",d.stroke()},e.bodyIds=function(c,h,m){var d=m,S,y;for(S=0;S<h.length;S++)if(!!h[S].render.visible){var C=h[S].parts;for(y=C.length>1?1:0;y<C.length;y++){var x=C[y];d.font="12px Arial",d.fillStyle="rgba(255,255,255,0.5)",d.fillText(x.id,x.position.x+10,x.position.y-10)}}},e.collisions=function(c,h,m){var d=m,S=c.options,y,C,x,A;for(d.beginPath(),x=0;x<h.length;x++)if(y=h[x],!!y.isActive)for(C=y.collision,A=0;A<y.activeContacts.length;A++){var B=y.activeContacts[A],L=B.vertex;d.rect(L.x-1.5,L.y-1.5,3.5,3.5)}for(S.wireframes?d.fillStyle="rgba(255,255,255,0.7)":d.fillStyle="orange",d.fill(),d.beginPath(),x=0;x<h.length;x++)if(y=h[x],!!y.isActive&&(C=y.collision,y.activeContacts.length>0)){var R=y.activeContacts[0].vertex.x,F=y.activeContacts[0].vertex.y;y.activeContacts.length===2&&(R=(y.activeContacts[0].vertex.x+y.activeContacts[1].vertex.x)/2,F=(y.activeContacts[0].vertex.y+y.activeContacts[1].vertex.y)/2),C.bodyB===C.supports[0].body||C.bodyA.isStatic===!0?d.moveTo(R-C.normal.x*8,F-C.normal.y*8):d.moveTo(R+C.normal.x*8,F+C.normal.y*8),d.lineTo(R,F)}S.wireframes?d.strokeStyle="rgba(255,165,0,0.7)":d.strokeStyle="orange",d.lineWidth=1,d.stroke()},e.separations=function(c,h,m){var d=m,S=c.options,y,C,x,A,B;for(d.beginPath(),B=0;B<h.length;B++)if(y=h[B],!!y.isActive){C=y.collision,x=C.bodyA,A=C.bodyB;var L=1;!A.isStatic&&!x.isStatic&&(L=.5),A.isStatic&&(L=0),d.moveTo(A.position.x,A.position.y),d.lineTo(A.position.x-C.penetration.x*L,A.position.y-C.penetration.y*L),L=1,!A.isStatic&&!x.isStatic&&(L=.5),x.isStatic&&(L=0),d.moveTo(x.position.x,x.position.y),d.lineTo(x.position.x+C.penetration.x*L,x.position.y+C.penetration.y*L)}S.wireframes?d.strokeStyle="rgba(255,165,0,0.5)":d.strokeStyle="orange",d.stroke()},e.inspector=function(c,h){c.engine;var m=c.selected,d=c.render,S=d.options,y;if(S.hasBounds){var C=d.bounds.max.x-d.bounds.min.x,x=d.bounds.max.y-d.bounds.min.y,A=C/d.options.width,B=x/d.options.height;h.scale(1/A,1/B),h.translate(-d.bounds.min.x,-d.bounds.min.y)}for(var L=0;L<m.length;L++){var R=m[L].data;switch(h.translate(.5,.5),h.lineWidth=1,h.strokeStyle="rgba(255,165,0,0.9)",h.setLineDash([1,2]),R.type){case"body":y=R.bounds,h.beginPath(),h.rect(Math.floor(y.min.x-3),Math.floor(y.min.y-3),Math.floor(y.max.x-y.min.x+6),Math.floor(y.max.y-y.min.y+6)),h.closePath(),h.stroke();break;case"constraint":var F=R.pointA;R.bodyA&&(F=R.pointB),h.beginPath(),h.arc(F.x,F.y,10,0,2*Math.PI),h.closePath(),h.stroke();break}h.setLineDash([]),h.translate(-.5,-.5)}c.selectStart!==null&&(h.translate(.5,.5),h.lineWidth=1,h.strokeStyle="rgba(255,165,0,0.6)",h.fillStyle="rgba(255,165,0,0.1)",y=c.selectBounds,h.beginPath(),h.rect(Math.floor(y.min.x),Math.floor(y.min.y),Math.floor(y.max.x-y.min.x),Math.floor(y.max.y-y.min.y)),h.closePath(),h.stroke(),h.fill(),h.translate(-.5,-.5)),S.hasBounds&&h.setTransform(1,0,0,1,0,0)};var r=function(c,h){var m=c.engine,d=c.timing,S=d.historySize,y=m.timing.timestamp;d.delta=h-d.lastTime||e._goodDelta,d.lastTime=h,d.timestampElapsed=y-d.lastTimestamp||0,d.lastTimestamp=y,d.deltaHistory.unshift(d.delta),d.deltaHistory.length=Math.min(d.deltaHistory.length,S),d.engineDeltaHistory.unshift(m.timing.lastDelta),d.engineDeltaHistory.length=Math.min(d.engineDeltaHistory.length,S),d.timestampElapsedHistory.unshift(d.timestampElapsed),d.timestampElapsedHistory.length=Math.min(d.timestampElapsedHistory.length,S),d.engineElapsedHistory.unshift(m.timing.lastElapsed),d.engineElapsedHistory.length=Math.min(d.engineElapsedHistory.length,S),d.elapsedHistory.unshift(d.lastElapsed),d.elapsedHistory.length=Math.min(d.elapsedHistory.length,S)},a=function(c){for(var h=0,m=0;m<c.length;m+=1)h+=c[m];return h/c.length||0},v=function(c,h){var m=document.createElement("canvas");return m.width=c,m.height=h,m.oncontextmenu=function(){return!1},m.onselectstart=function(){return!1},m},p=function(c){var h=c.getContext("2d"),m=window.devicePixelRatio||1,d=h.webkitBackingStorePixelRatio||h.mozBackingStorePixelRatio||h.msBackingStorePixelRatio||h.oBackingStorePixelRatio||h.backingStorePixelRatio||1;return m/d},P=function(c,h){var m=c.textures[h];return m||(m=c.textures[h]=new Image,m.src=h,m)},w=function(c,h){var m=h;/(jpg|gif|png)$/.test(h)&&(m="url("+h+")"),c.canvas.style.background=m,c.canvas.style.backgroundSize="contain",c.currentBackground=h}})()},function(M,E){var g={};M.exports=g,function(){g.create=function(e){return{vertex:e,normalImpulse:0,tangentImpulse:0}}}()},function(M,E,g){var e={};M.exports=e;var l=g(7),s=g(19),n=g(14),u=g(20),o=g(4),f=g(5),i=g(10),t=g(0),r=g(6);(function(){e.create=function(a){a=a||{};var v={positionIterations:6,velocityIterations:4,constraintIterations:2,enableSleeping:!1,events:[],plugin:{},gravity:{x:0,y:1,scale:.001},timing:{timestamp:0,timeScale:1,lastDelta:0,lastElapsed:0}},p=t.extend(v,a);return p.world=a.world||f.create({label:"World"}),p.pairs=a.pairs||u.create(),p.detector=a.detector||n.create(),p.grid={buckets:[]},p.world.gravity=p.gravity,p.broadphase=p.grid,p.metrics={},p},e.update=function(a,v,p){var P=t.now();v=v||1e3/60,p=p||1;var w=a.world,c=a.detector,h=a.pairs,m=a.timing,d=m.timestamp,S;m.timestamp+=v*m.timeScale,m.lastDelta=v*m.timeScale;var y={timestamp:m.timestamp};o.trigger(a,"beforeUpdate",y);var C=f.allBodies(w),x=f.allConstraints(w);for(w.isModified&&n.setBodies(c,C),w.isModified&&f.setModified(w,!1,!1,!0),a.enableSleeping&&l.update(C,m.timeScale),e._bodiesApplyGravity(C,a.gravity),e._bodiesUpdate(C,v,m.timeScale,p,w.bounds),i.preSolveAll(C),S=0;S<a.constraintIterations;S++)i.solveAll(x,m.timeScale);i.postSolveAll(C),c.pairs=a.pairs;var A=n.collisions(c);for(u.update(h,A,d),a.enableSleeping&&l.afterCollisions(h.list,m.timeScale),h.collisionStart.length>0&&o.trigger(a,"collisionStart",{pairs:h.collisionStart}),s.preSolvePosition(h.list),S=0;S<a.positionIterations;S++)s.solvePosition(h.list,m.timeScale);for(s.postSolvePosition(C),i.preSolveAll(C),S=0;S<a.constraintIterations;S++)i.solveAll(x,m.timeScale);for(i.postSolveAll(C),s.preSolveVelocity(h.list),S=0;S<a.velocityIterations;S++)s.solveVelocity(h.list,m.timeScale);return h.collisionActive.length>0&&o.trigger(a,"collisionActive",{pairs:h.collisionActive}),h.collisionEnd.length>0&&o.trigger(a,"collisionEnd",{pairs:h.collisionEnd}),e._bodiesClearForces(C),o.trigger(a,"afterUpdate",y),a.timing.lastElapsed=t.now()-P,a},e.merge=function(a,v){if(t.extend(a,v),v.world){a.world=v.world,e.clear(a);for(var p=f.allBodies(a.world),P=0;P<p.length;P++){var w=p[P];l.set(w,!1),w.id=t.nextId()}}},e.clear=function(a){u.clear(a.pairs),n.clear(a.detector)},e._bodiesClearForces=function(a){for(var v=0;v<a.length;v++){var p=a[v];p.force.x=0,p.force.y=0,p.torque=0}},e._bodiesApplyGravity=function(a,v){var p=typeof v.scale!="undefined"?v.scale:.001;if(!(v.x===0&&v.y===0||p===0))for(var P=0;P<a.length;P++){var w=a[P];w.isStatic||w.isSleeping||(w.force.y+=w.mass*v.y*p,w.force.x+=w.mass*v.x*p)}},e._bodiesUpdate=function(a,v,p,P,w){for(var c=0;c<a.length;c++){var h=a[c];h.isStatic||h.isSleeping||r.update(h,v,p,P)}}})()},function(M,E,g){var e={};M.exports=e;var l=g(3),s=g(1);(function(){e._restingThresh=4,e._restingThreshTangent=6,e._positionDampen=.9,e._positionWarming=.8,e._frictionNormalMultiplier=5,e.preSolvePosition=function(n){var u,o,f,i=n.length;for(u=0;u<i;u++)o=n[u],o.isActive&&(f=o.activeContacts.length,o.collision.parentA.totalContacts+=f,o.collision.parentB.totalContacts+=f)},e.solvePosition=function(n,u){var o,f,i,t,r,a,v,p,P=e._positionDampen,w=n.length;for(o=0;o<w;o++)f=n[o],!(!f.isActive||f.isSensor)&&(i=f.collision,t=i.parentA,r=i.parentB,a=i.normal,f.separation=a.x*(r.positionImpulse.x+i.penetration.x-t.positionImpulse.x)+a.y*(r.positionImpulse.y+i.penetration.y-t.positionImpulse.y));for(o=0;o<w;o++)f=n[o],!(!f.isActive||f.isSensor)&&(i=f.collision,t=i.parentA,r=i.parentB,a=i.normal,p=(f.separation-f.slop)*u,(t.isStatic||r.isStatic)&&(p*=2),t.isStatic||t.isSleeping||(v=P/t.totalContacts,t.positionImpulse.x+=a.x*p*v,t.positionImpulse.y+=a.y*p*v),r.isStatic||r.isSleeping||(v=P/r.totalContacts,r.positionImpulse.x-=a.x*p*v,r.positionImpulse.y-=a.y*p*v))},e.postSolvePosition=function(n){for(var u=e._positionWarming,o=n.length,f=l.translate,i=s.update,t=0;t<o;t++){var r=n[t],a=r.positionImpulse,v=a.x,p=a.y,P=r.velocity;if(r.totalContacts=0,v!==0||p!==0){for(var w=0;w<r.parts.length;w++){var c=r.parts[w];f(c.vertices,a),i(c.bounds,c.vertices,P),c.position.x+=v,c.position.y+=p}r.positionPrev.x+=v,r.positionPrev.y+=p,v*P.x+p*P.y<0?(a.x=0,a.y=0):(a.x*=u,a.y*=u)}}},e.preSolveVelocity=function(n){var u=n.length,o,f;for(o=0;o<u;o++){var i=n[o];if(!(!i.isActive||i.isSensor)){var t=i.activeContacts,r=t.length,a=i.collision,v=a.parentA,p=a.parentB,P=a.normal,w=a.tangent;for(f=0;f<r;f++){var c=t[f],h=c.vertex,m=c.normalImpulse,d=c.tangentImpulse;if(m!==0||d!==0){var S=P.x*m+w.x*d,y=P.y*m+w.y*d;v.isStatic||v.isSleeping||(v.positionPrev.x+=S*v.inverseMass,v.positionPrev.y+=y*v.inverseMass,v.anglePrev+=v.inverseInertia*((h.x-v.position.x)*y-(h.y-v.position.y)*S)),p.isStatic||p.isSleeping||(p.positionPrev.x-=S*p.inverseMass,p.positionPrev.y-=y*p.inverseMass,p.anglePrev-=p.inverseInertia*((h.x-p.position.x)*y-(h.y-p.position.y)*S))}}}}},e.solveVelocity=function(n,u){var o=u*u,f=e._restingThresh*o,i=e._frictionNormalMultiplier,t=e._restingThreshTangent*o,r=Number.MAX_VALUE,a=n.length,v,p,P,w;for(P=0;P<a;P++){var c=n[P];if(!(!c.isActive||c.isSensor)){var h=c.collision,m=h.parentA,d=h.parentB,S=m.velocity,y=d.velocity,C=h.normal.x,x=h.normal.y,A=h.tangent.x,B=h.tangent.y,L=c.activeContacts,R=L.length,F=1/R,k=m.inverseMass+d.inverseMass,H=c.friction*c.frictionStatic*i*o;for(S.x=m.position.x-m.positionPrev.x,S.y=m.position.y-m.positionPrev.y,y.x=d.position.x-d.positionPrev.x,y.y=d.position.y-d.positionPrev.y,m.angularVelocity=m.angle-m.anglePrev,d.angularVelocity=d.angle-d.anglePrev,w=0;w<R;w++){var O=L[w],D=O.vertex,W=D.x-m.position.x,$=D.y-m.position.y,V=D.x-d.position.x,Z=D.y-d.position.y,z=S.x-$*m.angularVelocity,U=S.y+W*m.angularVelocity,N=y.x-Z*d.angularVelocity,at=y.y+V*d.angularVelocity,He=z-N,De=U-at,_=C*He+x*De,X=A*He+B*De,Ve=c.separation+_,we=Math.min(Ve,1);we=Ve<0?0:we;var We=we*H;X>We||-X>We?(p=X>0?X:-X,v=c.friction*(X>0?1:-1)*o,v<-p?v=-p:v>p&&(v=p)):(v=X,p=r);var $e=W*x-$*C,Ge=V*x-Z*C,ze=F/(k+m.inverseInertia*$e*$e+d.inverseInertia*Ge*Ge),le=(1+c.restitution)*_*ze;if(v*=ze,_*_>f&&_<0)O.normalImpulse=0;else{var st=O.normalImpulse;O.normalImpulse+=le,O.normalImpulse=Math.min(O.normalImpulse,0),le=O.normalImpulse-st}if(X*X>t)O.tangentImpulse=0;else{var ot=O.tangentImpulse;O.tangentImpulse+=v,O.tangentImpulse<-p&&(O.tangentImpulse=-p),O.tangentImpulse>p&&(O.tangentImpulse=p),v=O.tangentImpulse-ot}var fe=C*le+A*v,ue=x*le+B*v;m.isStatic||m.isSleeping||(m.positionPrev.x+=fe*m.inverseMass,m.positionPrev.y+=ue*m.inverseMass,m.anglePrev+=(W*ue-$*fe)*m.inverseInertia),d.isStatic||d.isSleeping||(d.positionPrev.x-=fe*d.inverseMass,d.positionPrev.y-=ue*d.inverseMass,d.anglePrev-=(V*ue-Z*fe)*d.inverseInertia)}}}}})()},function(M,E,g){var e={};M.exports=e;var l=g(9),s=g(0);(function(){e.create=function(n){return s.extend({table:{},list:[],collisionStart:[],collisionActive:[],collisionEnd:[]},n)},e.update=function(n,u,o){var f=n.list,i=f.length,t=n.table,r=u.length,a=n.collisionStart,v=n.collisionEnd,p=n.collisionActive,P,w,c,h;for(a.length=0,v.length=0,p.length=0,h=0;h<i;h++)f[h].confirmedActive=!1;for(h=0;h<r;h++)P=u[h],c=P.pair,c?(c.isActive?p.push(c):a.push(c),l.update(c,P,o),c.confirmedActive=!0):(c=l.create(P,o),t[c.id]=c,a.push(c),f.push(c));var m=[];for(i=f.length,h=0;h<i;h++)c=f[h],c.confirmedActive||(l.setActive(c,!1,o),v.push(c),!c.collision.bodyA.isSleeping&&!c.collision.bodyB.isSleeping&&m.push(h));for(h=0;h<m.length;h++)w=m[h]-h,c=f[w],f.splice(w,1),delete t[c.id]},e.clear=function(n){return n.table={},n.list.length=0,n.collisionStart.length=0,n.collisionActive.length=0,n.collisionEnd.length=0,n}})()},function(M,E,g){var e=M.exports=g(22);e.Axes=g(11),e.Bodies=g(12),e.Body=g(6),e.Bounds=g(1),e.Collision=g(8),e.Common=g(0),e.Composite=g(5),e.Composites=g(23),e.Constraint=g(10),e.Contact=g(17),e.Detector=g(14),e.Engine=g(18),e.Events=g(4),e.Grid=g(24),e.Mouse=g(13),e.MouseConstraint=g(25),e.Pair=g(9),e.Pairs=g(20),e.Plugin=g(15),e.Query=g(26),e.Render=g(16),e.Resolver=g(19),e.Runner=g(27),e.SAT=g(28),e.Sleeping=g(7),e.Svg=g(29),e.Vector=g(2),e.Vertices=g(3),e.World=g(30),e.Engine.run=e.Runner.run,e.Common.deprecated(e.Engine,"run","Engine.run \u27A4 use Matter.Runner.run(engine) instead")},function(M,E,g){var e={};M.exports=e;var l=g(15),s=g(0);(function(){e.name="matter-js",e.version="0.18.0",e.uses=[],e.used=[],e.use=function(){l.use(e,Array.prototype.slice.call(arguments))},e.before=function(n,u){return n=n.replace(/^Matter./,""),s.chainPathBefore(e,n,u)},e.after=function(n,u){return n=n.replace(/^Matter./,""),s.chainPathAfter(e,n,u)}})()},function(M,E,g){var e={};M.exports=e;var l=g(5),s=g(10),n=g(0),u=g(6),o=g(12),f=n.deprecated;(function(){e.stack=function(i,t,r,a,v,p,P){for(var w=l.create({label:"Stack"}),c=i,h=t,m,d=0,S=0;S<a;S++){for(var y=0,C=0;C<r;C++){var x=P(c,h,C,S,m,d);if(x){var A=x.bounds.max.y-x.bounds.min.y,B=x.bounds.max.x-x.bounds.min.x;A>y&&(y=A),u.translate(x,{x:B*.5,y:A*.5}),c=x.bounds.max.x+v,l.addBody(w,x),m=x,d+=1}else c+=v}h+=y+p,c=i}return w},e.chain=function(i,t,r,a,v,p){for(var P=i.bodies,w=1;w<P.length;w++){var c=P[w-1],h=P[w],m=c.bounds.max.y-c.bounds.min.y,d=c.bounds.max.x-c.bounds.min.x,S=h.bounds.max.y-h.bounds.min.y,y=h.bounds.max.x-h.bounds.min.x,C={bodyA:c,pointA:{x:d*t,y:m*r},bodyB:h,pointB:{x:y*a,y:S*v}},x=n.extend(C,p);l.addConstraint(i,s.create(x))}return i.label+=" Chain",i},e.mesh=function(i,t,r,a,v){var p=i.bodies,P,w,c,h,m;for(P=0;P<r;P++){for(w=1;w<t;w++)c=p[w-1+P*t],h=p[w+P*t],l.addConstraint(i,s.create(n.extend({bodyA:c,bodyB:h},v)));if(P>0)for(w=0;w<t;w++)c=p[w+(P-1)*t],h=p[w+P*t],l.addConstraint(i,s.create(n.extend({bodyA:c,bodyB:h},v))),a&&w>0&&(m=p[w-1+(P-1)*t],l.addConstraint(i,s.create(n.extend({bodyA:m,bodyB:h},v)))),a&&w<t-1&&(m=p[w+1+(P-1)*t],l.addConstraint(i,s.create(n.extend({bodyA:m,bodyB:h},v))))}return i.label+=" Mesh",i},e.pyramid=function(i,t,r,a,v,p,P){return e.stack(i,t,r,a,v,p,function(w,c,h,m,d,S){var y=Math.min(a,Math.ceil(r/2)),C=d?d.bounds.max.x-d.bounds.min.x:0;if(!(m>y)){m=y-m;var x=m,A=r-1-m;if(!(h<x||h>A)){S===1&&u.translate(d,{x:(h+(r%2===1?1:-1))*C,y:0});var B=d?h*C:0;return P(i+B+h*v,c,h,m,d,S)}}})},e.newtonsCradle=function(i,t,r,a,v){for(var p=l.create({label:"Newtons Cradle"}),P=0;P<r;P++){var w=1.9,c=o.circle(i+P*(a*w),t+v,a,{inertia:1/0,restitution:1,friction:0,frictionAir:1e-4,slop:1}),h=s.create({pointA:{x:i+P*(a*w),y:t},bodyB:c});l.addBody(p,c),l.addConstraint(p,h)}return p},f(e,"newtonsCradle","Composites.newtonsCradle \u27A4 moved to newtonsCradle example"),e.car=function(i,t,r,a,v){var p=u.nextGroup(!0),P=20,w=-r*.5+P,c=r*.5-P,h=0,m=l.create({label:"Car"}),d=o.rectangle(i,t,r,a,{collisionFilter:{group:p},chamfer:{radius:a*.5},density:2e-4}),S=o.circle(i+w,t+h,v,{collisionFilter:{group:p},friction:.8}),y=o.circle(i+c,t+h,v,{collisionFilter:{group:p},friction:.8}),C=s.create({bodyB:d,pointB:{x:w,y:h},bodyA:S,stiffness:1,length:0}),x=s.create({bodyB:d,pointB:{x:c,y:h},bodyA:y,stiffness:1,length:0});return l.addBody(m,d),l.addBody(m,S),l.addBody(m,y),l.addConstraint(m,C),l.addConstraint(m,x),m},f(e,"car","Composites.car \u27A4 moved to car example"),e.softBody=function(i,t,r,a,v,p,P,w,c,h){c=n.extend({inertia:1/0},c),h=n.extend({stiffness:.2,render:{type:"line",anchors:!1}},h);var m=e.stack(i,t,r,a,v,p,function(d,S){return o.circle(d,S,w,c)});return e.mesh(m,r,a,P,h),m.label="Soft Body",m},f(e,"softBody","Composites.softBody \u27A4 moved to softBody and cloth examples")})()},function(M,E,g){var e={};M.exports=e;var l=g(9),s=g(0),n=s.deprecated;(function(){e.create=function(u){var o={buckets:{},pairs:{},pairsList:[],bucketWidth:48,bucketHeight:48};return s.extend(o,u)},e.update=function(u,o,f,i){var t,r,a,v=f.world,p=u.buckets,P,w,c=!1;for(t=0;t<o.length;t++){var h=o[t];if(!(h.isSleeping&&!i)&&!(v.bounds&&(h.bounds.max.x<v.bounds.min.x||h.bounds.min.x>v.bounds.max.x||h.bounds.max.y<v.bounds.min.y||h.bounds.min.y>v.bounds.max.y))){var m=e._getRegion(u,h);if(!h.region||m.id!==h.region.id||i){(!h.region||i)&&(h.region=m);var d=e._regionUnion(m,h.region);for(r=d.startCol;r<=d.endCol;r++)for(a=d.startRow;a<=d.endRow;a++){w=e._getBucketId(r,a),P=p[w];var S=r>=m.startCol&&r<=m.endCol&&a>=m.startRow&&a<=m.endRow,y=r>=h.region.startCol&&r<=h.region.endCol&&a>=h.region.startRow&&a<=h.region.endRow;!S&&y&&y&&P&&e._bucketRemoveBody(u,P,h),(h.region===m||S&&!y||i)&&(P||(P=e._createBucket(p,w)),e._bucketAddBody(u,P,h))}h.region=m,c=!0}}}c&&(u.pairsList=e._createActivePairsList(u))},n(e,"update","Grid.update \u27A4 replaced by Matter.Detector"),e.clear=function(u){u.buckets={},u.pairs={},u.pairsList=[]},n(e,"clear","Grid.clear \u27A4 replaced by Matter.Detector"),e._regionUnion=function(u,o){var f=Math.min(u.startCol,o.startCol),i=Math.max(u.endCol,o.endCol),t=Math.min(u.startRow,o.startRow),r=Math.max(u.endRow,o.endRow);return e._createRegion(f,i,t,r)},e._getRegion=function(u,o){var f=o.bounds,i=Math.floor(f.min.x/u.bucketWidth),t=Math.floor(f.max.x/u.bucketWidth),r=Math.floor(f.min.y/u.bucketHeight),a=Math.floor(f.max.y/u.bucketHeight);return e._createRegion(i,t,r,a)},e._createRegion=function(u,o,f,i){return{id:u+","+o+","+f+","+i,startCol:u,endCol:o,startRow:f,endRow:i}},e._getBucketId=function(u,o){return"C"+u+"R"+o},e._createBucket=function(u,o){var f=u[o]=[];return f},e._bucketAddBody=function(u,o,f){var i=u.pairs,t=l.id,r=o.length,a;for(a=0;a<r;a++){var v=o[a];if(!(f.id===v.id||f.isStatic&&v.isStatic)){var p=t(f,v),P=i[p];P?P[2]+=1:i[p]=[f,v,1]}}o.push(f)},e._bucketRemoveBody=function(u,o,f){var i=u.pairs,t=l.id,r;o.splice(s.indexOf(o,f),1);var a=o.length;for(r=0;r<a;r++){var v=i[t(f,o[r])];v&&(v[2]-=1)}},e._createActivePairsList=function(u){var o,f=u.pairs,i=s.keys(f),t=i.length,r=[],a;for(a=0;a<t;a++)o=f[i[a]],o[2]>0?r.push(o):delete f[i[a]];return r}})()},function(M,E,g){var e={};M.exports=e;var l=g(3),s=g(7),n=g(13),u=g(4),o=g(14),f=g(10),i=g(5),t=g(0),r=g(1);(function(){e.create=function(a,v){var p=(a?a.mouse:null)||(v?v.mouse:null);p||(a&&a.render&&a.render.canvas?p=n.create(a.render.canvas):v&&v.element?p=n.create(v.element):(p=n.create(),t.warn("MouseConstraint.create: options.mouse was undefined, options.element was undefined, may not function as expected")));var P=f.create({label:"Mouse Constraint",pointA:p.position,pointB:{x:0,y:0},length:.01,stiffness:.1,angularStiffness:1,render:{strokeStyle:"#90EE90",lineWidth:3}}),w={type:"mouseConstraint",mouse:p,element:null,body:null,constraint:P,collisionFilter:{category:1,mask:4294967295,group:0}},c=t.extend(w,v);return u.on(a,"beforeUpdate",function(){var h=i.allBodies(a.world);e.update(c,h),e._triggerEvents(c)}),c},e.update=function(a,v){var p=a.mouse,P=a.constraint,w=a.body;if(p.button===0){if(P.bodyB)s.set(P.bodyB,!1),P.pointA=p.position;else for(var c=0;c<v.length;c++)if(w=v[c],r.contains(w.bounds,p.position)&&o.canCollide(w.collisionFilter,a.collisionFilter))for(var h=w.parts.length>1?1:0;h<w.parts.length;h++){var m=w.parts[h];if(l.contains(m.vertices,p.position)){P.pointA=p.position,P.bodyB=a.body=w,P.pointB={x:p.position.x-w.position.x,y:p.position.y-w.position.y},P.angleB=w.angle,s.set(w,!1),u.trigger(a,"startdrag",{mouse:p,body:w});break}}}else P.bodyB=a.body=null,P.pointB=null,w&&u.trigger(a,"enddrag",{mouse:p,body:w})},e._triggerEvents=function(a){var v=a.mouse,p=v.sourceEvents;p.mousemove&&u.trigger(a,"mousemove",{mouse:v}),p.mousedown&&u.trigger(a,"mousedown",{mouse:v}),p.mouseup&&u.trigger(a,"mouseup",{mouse:v}),n.clearSourceEvents(v)}})()},function(M,E,g){var e={};M.exports=e;var l=g(2),s=g(8),n=g(1),u=g(12),o=g(3);(function(){e.collides=function(f,i){for(var t=[],r=i.length,a=f.bounds,v=s.collides,p=n.overlaps,P=0;P<r;P++){var w=i[P],c=w.parts.length,h=c===1?0:1;if(p(w.bounds,a))for(var m=h;m<c;m++){var d=w.parts[m];if(p(d.bounds,a)){var S=v(d,f);if(S){t.push(S);break}}}}return t},e.ray=function(f,i,t,r){r=r||1e-100;for(var a=l.angle(i,t),v=l.magnitude(l.sub(i,t)),p=(t.x+i.x)*.5,P=(t.y+i.y)*.5,w=u.rectangle(p,P,v,r,{angle:a}),c=e.collides(w,f),h=0;h<c.length;h+=1){var m=c[h];m.body=m.bodyB=m.bodyA}return c},e.region=function(f,i,t){for(var r=[],a=0;a<f.length;a++){var v=f[a],p=n.overlaps(v.bounds,i);(p&&!t||!p&&t)&&r.push(v)}return r},e.point=function(f,i){for(var t=[],r=0;r<f.length;r++){var a=f[r];if(n.contains(a.bounds,i))for(var v=a.parts.length===1?0:1;v<a.parts.length;v++){var p=a.parts[v];if(n.contains(p.bounds,i)&&o.contains(p.vertices,i)){t.push(a);break}}}return t}})()},function(M,E,g){var e={};M.exports=e;var l=g(4),s=g(18),n=g(0);(function(){var u,o;if(typeof window!="undefined"&&(u=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame,o=window.cancelAnimationFrame||window.mozCancelAnimationFrame||window.webkitCancelAnimationFrame||window.msCancelAnimationFrame),!u){var f;u=function(i){f=setTimeout(function(){i(n.now())},1e3/60)},o=function(){clearTimeout(f)}}e.create=function(i){var t={fps:60,correction:1,deltaSampleSize:60,counterTimestamp:0,frameCounter:0,deltaHistory:[],timePrev:null,timeScalePrev:1,frameRequestId:null,isFixed:!1,enabled:!0},r=n.extend(t,i);return r.delta=r.delta||1e3/r.fps,r.deltaMin=r.deltaMin||1e3/r.fps,r.deltaMax=r.deltaMax||1e3/(r.fps*.5),r.fps=1e3/r.delta,r},e.run=function(i,t){return typeof i.positionIterations!="undefined"&&(t=i,i=e.create()),function r(a){i.frameRequestId=u(r),a&&i.enabled&&e.tick(i,t,a)}(),i},e.tick=function(i,t,r){var a=t.timing,v=1,p,P={timestamp:a.timestamp};l.trigger(i,"beforeTick",P),i.isFixed?p=i.delta:(p=r-i.timePrev||i.delta,i.timePrev=r,i.deltaHistory.push(p),i.deltaHistory=i.deltaHistory.slice(-i.deltaSampleSize),p=Math.min.apply(null,i.deltaHistory),p=p<i.deltaMin?i.deltaMin:p,p=p>i.deltaMax?i.deltaMax:p,v=p/i.delta,i.delta=p),i.timeScalePrev!==0&&(v*=a.timeScale/i.timeScalePrev),a.timeScale===0&&(v=0),i.timeScalePrev=a.timeScale,i.correction=v,i.frameCounter+=1,r-i.counterTimestamp>=1e3&&(i.fps=i.frameCounter*((r-i.counterTimestamp)/1e3),i.counterTimestamp=r,i.frameCounter=0),l.trigger(i,"tick",P),l.trigger(i,"beforeUpdate",P),s.update(t,p,v),l.trigger(i,"afterUpdate",P),l.trigger(i,"afterTick",P)},e.stop=function(i){o(i.frameRequestId)},e.start=function(i,t){e.run(i,t)}})()},function(M,E,g){var e={};M.exports=e;var l=g(8),s=g(0),n=s.deprecated;(function(){e.collides=function(u,o){return l.collides(u,o)},n(e,"collides","SAT.collides \u27A4 replaced by Collision.collides")})()},function(M,E,g){var e={};M.exports=e,g(1);var l=g(0);(function(){e.pathToVertices=function(s,n){typeof window!="undefined"&&!("SVGPathSeg"in window)&&l.warn("Svg.pathToVertices: SVGPathSeg not defined, a polyfill is required.");var u,o,f,i,t,r,a,v,p,P,w=[],c,h,m=0,d=0,S=0;n=n||15;var y=function(x,A,B){var L=B%2===1&&B>1;if(!p||x!=p.x||A!=p.y){p&&L?(c=p.x,h=p.y):(c=0,h=0);var R={x:c+x,y:h+A};(L||!p)&&(p=R),w.push(R),d=c+x,S=h+A}},C=function(x){var A=x.pathSegTypeAsLetter.toUpperCase();if(A!=="Z"){switch(A){case"M":case"L":case"T":case"C":case"S":case"Q":d=x.x,S=x.y;break;case"H":d=x.x;break;case"V":S=x.y;break}y(d,S,x.pathSegType)}};for(e._svgPathToAbsolute(s),f=s.getTotalLength(),r=[],u=0;u<s.pathSegList.numberOfItems;u+=1)r.push(s.pathSegList.getItem(u));for(a=r.concat();m<f;){if(P=s.getPathSegAtLength(m),t=r[P],t!=v){for(;a.length&&a[0]!=t;)C(a.shift());v=t}switch(t.pathSegTypeAsLetter.toUpperCase()){case"C":case"T":case"S":case"Q":case"A":i=s.getPointAtLength(m),y(i.x,i.y,0);break}m+=n}for(u=0,o=a.length;u<o;++u)C(a[u]);return w},e._svgPathToAbsolute=function(s){for(var n,u,o,f,i,t,r=s.pathSegList,a=0,v=0,p=r.numberOfItems,P=0;P<p;++P){var w=r.getItem(P),c=w.pathSegTypeAsLetter;if(/[MLHVCSQTA]/.test(c))"x"in w&&(a=w.x),"y"in w&&(v=w.y);else switch("x1"in w&&(o=a+w.x1),"x2"in w&&(i=a+w.x2),"y1"in w&&(f=v+w.y1),"y2"in w&&(t=v+w.y2),"x"in w&&(a+=w.x),"y"in w&&(v+=w.y),c){case"m":r.replaceItem(s.createSVGPathSegMovetoAbs(a,v),P);break;case"l":r.replaceItem(s.createSVGPathSegLinetoAbs(a,v),P);break;case"h":r.replaceItem(s.createSVGPathSegLinetoHorizontalAbs(a),P);break;case"v":r.replaceItem(s.createSVGPathSegLinetoVerticalAbs(v),P);break;case"c":r.replaceItem(s.createSVGPathSegCurvetoCubicAbs(a,v,o,f,i,t),P);break;case"s":r.replaceItem(s.createSVGPathSegCurvetoCubicSmoothAbs(a,v,i,t),P);break;case"q":r.replaceItem(s.createSVGPathSegCurvetoQuadraticAbs(a,v,o,f),P);break;case"t":r.replaceItem(s.createSVGPathSegCurvetoQuadraticSmoothAbs(a,v),P);break;case"a":r.replaceItem(s.createSVGPathSegArcAbs(a,v,w.r1,w.r2,w.angle,w.largeArcFlag,w.sweepFlag),P);break;case"z":case"Z":a=n,v=u;break}(c=="M"||c=="m")&&(n=a,u=v)}}})()},function(M,E,g){var e={};M.exports=e;var l=g(5);g(0),function(){e.create=l.create,e.add=l.add,e.remove=l.remove,e.clear=l.clear,e.addComposite=l.addComposite,e.addBody=l.addBody,e.addConstraint=l.addConstraint}()}])})})(nt);var J=It(nt.exports);const Ke=J.Engine,Je=J.Render;J.Runner;const te=J.Bodies,Tt=J.Composite,Bt=J.Mouse,Et=J.Events,ne=J.Body,it=J.Composites,K=1024;let Xe=0,Ye=0,j,rt,oe,me,re,Ee,Le,je,be,ge=null,G,Y,q;async function Lt(I){G=I,G.width=window.innerWidth,G.height=window.innerHeight,q=Ke.create(),Y=Je.create({engine:q,canvas:G,bounds:{max:{x:window.innerWidth,y:window.innerHeight},min:{x:0,y:0}},options:{width:window.innerWidth,height:window.innerHeight,wireframes:!1}}),rt=kt();const T=Ot();oe=T.bodies[0],me=T.bodies[1],re=Bt.create(Y.canvas);const M=Dt();be=M.wallLeft,je=M.wallTop,Le=M.wallRight,Ee=M.wallBot,Tt.add(q.world,[T,Ee,be,Le,je]),Je.run(Y),setInterval(()=>{Ke.update(q,7)},7),Rt(),Et.on(q,"afterUpdate",()=>{!re.position.x&&!re.position.y||(Vt(),j&&Ft())}),tt.subscribe(E=>j=E),window.addEventListener("resize",Ht),setInterval(()=>{j.panBy(Ye,Xe),Ye=0,Xe=0},50)}function Rt(){J.Events.on(q,"collisionStart",I=>{if(!!j)for(const T of I.pairs){const{bodyA:M,bodyB:E,separation:g}=T;if(g<1||M.label!=="collider"&&E.label!=="collider")continue;const e=30*g;let l=0,s=0;(M.label==="wallLeft"||E.label==="wallLeft")&&(l=-e),(M.label==="wallRight"||E.label==="wallRight")&&(l=e),(M.label==="wallTop"||E.label==="wallTop")&&(s=-e),(M.label==="wallBot"||E.label==="wallBot")&&(s=e),j.panBy(l,s)}})}function Ft(){const I=oe.position.x,T=oe.position.y,M=me.position.x,E=me.position.y,g=(M-I)*(M-I),e=(E-T)*(E-T);if(Math.sqrt(g+e)<80)return;const s=M>I?"right":"left";if(!ge){ge=s;return}const n=s!==ge;if(E<T&&n){const o=j.getZoom();j.setZoom(o+(s==="left"?-1:1))}ge=s}function kt(){return it.stack(500,80,2,1,10,0,(I,T,M)=>{const E=M===0?5:10,g=M===0?1:100,e=M===0?1:.06,l=M===0?"handle":"collider";return te.circle(window.innerWidth/2,window.innerHeight/2,E,{label:l,mass:g,frictionAir:e,render:{fillStyle:"#E6AE00",lineWidth:3,strokeStyle:"#333"}},64)})}function Ot(){return it.chain(rt,0,0,0,0,{stiffness:1,length:15,render:{lineWidth:.5,fillStyle:"red",strokeStyle:"#666"}})}function Ht(){Y.bounds.max.x=window.innerWidth,Y.bounds.max.y=window.innerHeight,Y.options.width=window.innerWidth,Y.options.height=window.innerHeight,Y.canvas.width=window.innerWidth,Y.canvas.height=window.innerHeight,ne.setPosition(Le,{x:window.innerWidth+K/2,y:window.innerHeight/2}),ne.setPosition(Ee,{x:window.innerWidth/2,y:window.innerHeight+K/2}),ne.setPosition(oe,{x:window.innerWidth/2,y:window.innerHeight/2}),ne.setPosition(me,{x:window.innerWidth/2,y:window.innerHeight/2})}function Dt(){const I=te.rectangle(G.width/2,G.height+K/2,G.width,K,{isStatic:!0,label:"wallBot"}),T=te.rectangle(G.width/2,-K/2,G.width,K,{isStatic:!0,label:"wallTop"}),M=te.rectangle(-K/2,G.height/2,K,G.height,{isStatic:!0,label:"wallLeft"}),E=te.rectangle(G.width+K/2,G.height/2,K,G.height,{isStatic:!0,label:"wallRight"});return{wallBot:I,wallLeft:M,wallRight:E,wallTop:T}}function Vt(){const I=re.position.x,T=re.position.y;ne.setPosition(oe,{x:I,y:T})}function Wt(I){let T;return{c(){T=Fe("canvas"),ae(T,"id","physics-canvas"),ae(T,"class","svelte-1o94rtw")},m(M,E){Re(M,T,E),I[1](T)},p:Q,i:Q,o:Q,d(M){M&&Se(T),I[1](null)}}}function $t(I,T,M){let E;_e(()=>Lt(E));function g(e){pe[e?"unshift":"push"](()=>{E=e,M(0,E)})}return[E,g]}class Gt extends Oe{constructor(T){super(),ke(this,T,$t,Wt,ye,{})}}function zt(I){let T,M,E,g,e;return M=new At({}),g=new Gt({}),{c(){T=Fe("main"),Ze(M.$$.fragment),E=gt(),Ze(g.$$.fragment),ae(T,"class","svelte-vfqu2l")},m(l,s){Re(l,T,s),Te(M,T,null),ct(T,E),Te(g,T,null),e=!0},p:Q,i(l){e||(Ie(M.$$.fragment,l),Ie(g.$$.fragment,l),e=!0)},o(l){Qe(M.$$.fragment,l),Qe(g.$$.fragment,l),e=!1},d(l){l&&Se(T),Be(M),Be(g)}}}class Ut extends Oe{constructor(T){super(),ke(this,T,null,zt,ye,{})}}new Ut({target:document.getElementById("app")});
